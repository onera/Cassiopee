.. CPlot.Decorator documentation master file

:tocdepth: 2

CPlot.Decorator: decoration of CPlot images using Matplotlib
============================================================

Preamble
########

CPlot can generate images of meshes or flow fields. Those image can be
further enhanced with any additional Matplotlib items using this module. 

This module is part of Cassiopee, a free open-source pre- and post-processor for CFD simulations.

To import CPlot.Decorator module::

   import CPlot.Decorator as Decorator


.. py:module:: CPlot.Decorator


List of functions
##################

**-- Actions**

.. autosummary::
   :nosignatures:

    CPlot.Decorator.getInfo2DMode
    CPlot.Decorator.getImage
    CPlot.Decorator.createSubPlot
    CPlot.Decorator.createColorBar
    CPlot.Decorator.createArrow
    CPlot.Decorator.savefig
    CPlot.Decorator.show
    CPlot.Decorator.closeAll

Contents
#########

    
Actions
---------------------------------------------------------------------------

.. py:function:: CPlot.Decorator.getInfo2DMode(xlim, ylim, zplane, ppw)
    
    Get the CPlot camera and export parameters to emulate a 2D projection mode.

    :param xlim: x-axis view limits.
    :type xlim: list of two floats [xmin, xmax]
    :param ylim: y-axis view limits.
    :type ylim: list of two floats [ymin, ymax]
    :param zplane: constant-z position of the 2D plane.
    :type zplane: float
    :param ppw: pixels per width.
    :type ppw: float
    :return: posCam, posEye, dirCam, viewAngle, and exportResolution CPlot.display parameters.

    *Example of use:*
    
    * `Create 2D image view with osmesa (offscreen=1) or with openGL (offscreen=2) (pyTree) <Examples/CPlot/decoratorGetInfo2DModePT.py>`_:

    .. literalinclude:: ../build/Examples/CPlot/decoratorGetInfo2DModePT.py 

--------------------------

.. py:function:: CPlot.Decorator.getImage()
    
    Read an image from a file into a numpy array.

    :param fileName: name of the image file to read
    :type fileName: string

--------------------------

.. py:function:: CPlot.Decorator.createSubPlot(img='.decorator.png', figsize=None, dpi=None, title=None, box=False, xlim=[], ylim=[], **kwargs)

    Create a Matplotlib figure and axes from an image generated by CPlot.display or elsewhere.
    The returned figure and axes can be further modified with any Matplotlib command.

    If xlim and ylim are both specified, then the axes are automatically transformed to be in the real coordinate system, which facilitates further modifications with Matplotlib commands. If box is also set to True, then both axes are fully graduated from xmin,ymin to xmax,ymax.

    :param img: filename string or numpy array describing the image.
    :type title: string or numpy array
    :param figsize: width and height of the figure in inches. If None, figsize is automatically calculated from the image ratio.
    :type figsize: tuple of two floats (width, height)
    :param dpi: the resolution in dots per inch. If None, dpi is automatically calculated from the image size and the figsize parameter.
    :type dpi: float
    :param title: if not None, add a title to the figure.
    :type title: string
    :param box: if True, display the axes around the image.
    :type box: boolean
    :param xlim: actual limits of the figure in the x direction.
    :type xlim: list of two floats [xmin, xmax]
    :param ylim: actual limits of the figure in the y direction.
    :type ylim: list of two floats [ymin, ymax]
    :return: Matplotlib figure and axes (fig, ax).

    Other kwargs parameters:

    + **fontsize** (float, default=12.)
    + **labelsize** (float, default=10.)
    + **interpolation** (string, default='none') # 'none', 'auto', 'antialiased'
    + **xlabel** (string, default='x')
    + **xlabelpad** (float, default=11.)
    + **ylabel** (string, default='y')
    + **ylabelpad** (float, default=11.)
    + **boxColor** (string, default='black')
    + **boxLineWidth** (float, default=1.0)
    + **titlepad** (float, default=12.)

    *Example of use:*
    
    * `Create subplot with osmesa (offscreen=1) or with openGL (offscreen=2) (pyTree) <Examples/CPlot/decoratorCreateSubPlotPT.py>`_:

    .. literalinclude:: ../build/Examples/CPlot/decoratorCreateSubPlotPT.py    
    
--------------------------

.. py:function:: CPlot.Decorator.createColorBar(fig, ax, levels=None, title=None, cmap=None, discrete=False, location='right', size='3%', pad=0.5, **kwargs)

    Create and add a colorbar to an existing subplot figure.
    
    Possible colormap names are 'Jet', 'Magma', 'Inferno', 'Viridis', 'Plasma', 'Diverging', 'Greys', and 'Greens'.

    :param fig: subplot figure.
    :type fig: Matplotlib figure
    :param ax: subplot axes.
    :type ax: Matplotlib axes
    :param levels: level information to display in the colorbar. If None, levels are taken from CPlot.
    :type levels: list [nLevels, minLevel, maxLevel]
    :param title: if not None, add a title to the colorbar.
    :type title: string
    :param cmap: colormap name ('Blue2Red', ...) or list. If None, cmap is taken from CPlot.
    :type cmap: string or list of colors or list of (value, color) 
    :param discrete: if True, create a discrete colormap with as many colors as the number of levels.
    :type discrete: boolean
    :param location: location of the colorbar on the figure.
    :type location: string ('left', 'right', 'top', 'bottom')
    :param size: colorbar size in figure percentage.
    :type size: string
    :param pad: amount of padding in inches between the axes and the colorbar.
    :type pad: float
    :return: Matplotlib colorbar (cbar).

    Other kwargs parameters:

    + **extend** (string, 'neither') # 'neither', 'both', 'min', 'max'
    + **extendrect** (boolean, True)
    + **fontsize** (float, 12.)
    + **labelsize** (float, 10.)
    + **titlepad** (float, 12.)
    + **labelFormat** (string, '%.2f')
    + **nticks** (int, 5)

    *Example of use:*
    
    * `Create subplot with colorbar with osmesa (offscreen=1) or with openGL (offscreen=2) (pyTree) <Examples/CPlot/decoratorCreateColorBarPT.py>`_:

    .. literalinclude:: ../build/Examples/CPlot/decoratorCreateColorBarPT.py    

--------------------------

.. py:function:: CPlot.Decorator.createArrow(ax, X1, X2, width=0.001, text=None, textSize=10, shiftText=(0,0))
    
    Create an arrow on figure.

    :param X1: 3D position of arrow tail
    :type X1: tuple of 3 floats
    :param X2: 3D position of arrow head
    :type X2: tuple of 3 floats
    :param width: width of arrow
    :type width: float
    :param color: arrow color
    :type color: string
    :param text: text to be displayed at arrow tail
    :type text: string or None
    :param textSize: size of text
    :type textSize: int
    :param shiftText: text offset in pixel units
    :type shiftText: tuple of 2 floats
    
    *Example of use:*
    
    * `Create arrow on figure (pyTree) <Examples/CPlot/createArrowPT.py>`_:

    .. literalinclude:: ../build/Examples/CPlot/createArrowPT.py

--------------------------
    
.. py:function:: CPlot.Decorator.savefig(fileName, pad=0., dpi='figure')
    
    Save figure in fileName. All file formats handled by Matplotlib can be used for export.

    :param fileName: name of the file to export to
    :type fileName: string
    :param pad: amount of padding in inches around the figure, starting from a tight layout.
    :type pad: float
    :param dpi: the resolution in dots per inch. If 'figure', use the figure's dpi value.
    :type dpi: float or 'figure'

--------------------------
    
.. py:function:: CPlot.Decorator.show()
    
    Display figure.

--------------------------
    
.. py:function:: CPlot.Decorator.closeAll()
    
    Close all figures previously created with Decorator.createSubPlot or directly via Matplotlib function calls.


---------------------------------------------------------------------------


.. toctree::
   :maxdepth: 2


Index
########

* :ref:`genindex`
* :ref:`modindex`
* :ref:`search`


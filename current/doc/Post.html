
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="ASCII" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Post: post-processing module &#8212; Post 4.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/classic.css" />
    
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="#">Post 4.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Post: post-processing module</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="post-post-processing-module">
<h1>Post: post-processing module</h1>
<section id="preamble">
<h2>Preamble</h2>
<p>This module provides post-processing tools for  CFD simulations.
It manipulates arrays (as defined in Converter documentation)
or CGNS/Python trees (or pyTree, as defined in Converter/Internal documentation)
as data structures.</p>
<p>This module is part of Cassiopee, a free open-source
pre- and post-processor for CFD simulations.</p>
<p>For use with the array interface, you have to import Post module:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">Post</span>
</pre></div>
</div>
<p>For use with the pyTree interface:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">Post.PyTree</span> <span class="k">as</span> <span class="nn">Post</span>
</pre></div>
</div>
<span class="target" id="module-Post"></span></section>
<section id="list-of-functions">
<h2>List of functions</h2>
<p><strong>&#8211; Modifying/creating Variables</strong></p>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#Post.renameVars" title="Post.renameVars"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Post.renameVars</span></code></a></p></td>
<td><p>Rename variables names in varsPrev with names defined by varsNew.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Post.PyTree.importVariables" title="Post.PyTree.importVariables"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Post.PyTree.importVariables</span></code></a></p></td>
<td><p>Import the variables of tree t1 to tree t2.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Post.computeVariables" title="Post.computeVariables"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Post.computeVariables</span></code></a></p></td>
<td><p>Compute the variables defined in varname for array.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Post.computeExtraVariable" title="Post.computeExtraVariable"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Post.computeExtraVariable</span></code></a></p></td>
<td><p>Compute variables that require a change of location.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Post.PyTree.computeWallShearStress" title="Post.PyTree.computeWallShearStress"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Post.PyTree.computeWallShearStress</span></code></a></p></td>
<td><p>Compute wall shear stress.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Post.computeGrad" title="Post.computeGrad"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Post.computeGrad</span></code></a></p></td>
<td><p>Compute the gradient of the field varname defined in array.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Post.computeGrad2" title="Post.computeGrad2"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Post.computeGrad2</span></code></a></p></td>
<td><p>Compute the gradient of a field defined on centers.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Post.computeGradLSQ" title="Post.computeGradLSQ"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Post.computeGradLSQ</span></code></a></p></td>
<td><p>Compute gradient using least-squares method.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Post.computeNormGrad" title="Post.computeNormGrad"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Post.computeNormGrad</span></code></a></p></td>
<td><p>Compute the norm of gradient of field varname defined in array.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Post.computeDiv" title="Post.computeDiv"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Post.computeDiv</span></code></a></p></td>
<td><p>Compute the divergence of the given vector, whose components are defined in array using the computeGrad method for gradients.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Post.computeDiv2" title="Post.computeDiv2"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Post.computeDiv2</span></code></a></p></td>
<td><p>Compute the divergence of the field varname, whose components are defined in array using the computeGrad2 method for gradients.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Post.computeCurl" title="Post.computeCurl"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Post.computeCurl</span></code></a></p></td>
<td><p>Compute the curl of the 3D-field defined in array.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Post.computeNormCurl" title="Post.computeNormCurl"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Post.computeNormCurl</span></code></a></p></td>
<td><p>Compute the norm of the curl of the 3D-field defined in array.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Post.computeDiff" title="Post.computeDiff"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Post.computeDiff</span></code></a></p></td>
<td><p>Compute the difference of the field varname defined in array.</p></td>
</tr>
</tbody>
</table>
<p><strong>&#8211; Solution selection</strong></p>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#Post.selectCells" title="Post.selectCells"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Post.selectCells</span></code></a></p></td>
<td><p>Select cells in a given array.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Post.selectCells2" title="Post.selectCells2"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Post.selectCells2</span></code></a></p></td>
<td><p>Select cells in a given array following tag.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Post.interiorFaces" title="Post.interiorFaces"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Post.interiorFaces</span></code></a></p></td>
<td><p>Interior faces of an array a.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Post.exteriorFaces" title="Post.exteriorFaces"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Post.exteriorFaces</span></code></a></p></td>
<td><p>Exterior faces of an array.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Post.exteriorFacesStructured" title="Post.exteriorFacesStructured"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Post.exteriorFacesStructured</span></code></a></p></td>
<td><p>Return the list of exterior faces for a structured array Usage: exteriorFacesStructured(a,indices)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Post.exteriorElts" title="Post.exteriorElts"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Post.exteriorElts</span></code></a></p></td>
<td><p>Exterior elements of an array.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Post.frontFaces" title="Post.frontFaces"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Post.frontFaces</span></code></a></p></td>
<td><p>Select faces located in the front of tag=0 and tag=1.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Post.sharpEdges" title="Post.sharpEdges"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Post.sharpEdges</span></code></a></p></td>
<td><p>Detect sharp edges between adjacent cells of a surface.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Post.silhouette" title="Post.silhouette"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Post.silhouette</span></code></a></p></td>
<td><p>Detect shape of an unstructured surface.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Post.coarsen" title="Post.coarsen"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Post.coarsen</span></code></a></p></td>
<td><p>Coarsen a surface TRI-type mesh given a coarsening indicator for each element.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#id0" title="Post.refine"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Post.refine</span></code></a></p></td>
<td><p>Refine a surface TRI-type mesh given an indicator for each element.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Post.computeIndicatorValue" title="Post.computeIndicatorValue"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Post.computeIndicatorValue</span></code></a></p></td>
<td><p>Computes the indicator value on the octree mesh based on the maximum value of the absolute value of indicField.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Post.computeIndicatorField" title="Post.computeIndicatorField"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Post.computeIndicatorField</span></code></a></p></td>
<td><p>Compute the indicator -1, 0 or 1 for each element of the HEXA octree with respect to the indicatorValue field located at element centers.</p></td>
</tr>
</tbody>
</table>
<p><strong>&#8211; Solution extraction</strong></p>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#Post.extractPoint" title="Post.extractPoint"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Post.extractPoint</span></code></a></p></td>
<td><p>Extract the solution in one or more points.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Post.extractPlane" title="Post.extractPlane"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Post.extractPlane</span></code></a></p></td>
<td><p>Slice solution with a plane.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Post.extractMesh" title="Post.extractMesh"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Post.extractMesh</span></code></a></p></td>
<td><p>Extract the solution on a given mesh.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Post.projectCloudSolution" title="Post.projectCloudSolution"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Post.projectCloudSolution</span></code></a></p></td>
<td><p>Project the solution defined on a set of points to a TRI surface.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Post.zipper" title="Post.zipper"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Post.zipper</span></code></a></p></td>
<td><p>Extract Chimera surface as an unique unstructured surface.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Post.usurp" title="Post.usurp"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Post.usurp</span></code></a></p></td>
<td><p>Extract unique surfaces using ranked polygons.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Post.Probe.Probe" title="Post.Probe.Probe"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Post.Probe.Probe</span></code></a></p></td>
<td><p>Probe for extracting data from fields during computations.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Post.Probe.Probe.extract" title="Post.Probe.Probe.extract"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Post.Probe.Probe.extract</span></code></a></p></td>
<td><p>Extract XYZ or Ind fields from t.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Post.Probe.Probe.flush" title="Post.Probe.Probe.flush"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Post.Probe.Probe.flush</span></code></a></p></td>
<td><p>Flush probe to file.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Post.Probe.Probe.read" title="Post.Probe.Probe.read"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Post.Probe.Probe.read</span></code></a></p></td>
<td><p>Reread all data from probe file.</p></td>
</tr>
</tbody>
</table>
<p><strong>&#8211; Streams/Isos</strong></p>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#Post.streamLine" title="Post.streamLine"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Post.streamLine</span></code></a></p></td>
<td><p>Compute a streamline starting from (x0,y0,z0) given a list of arrays containing 'vector' information.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Post.streamRibbon" title="Post.streamRibbon"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Post.streamRibbon</span></code></a></p></td>
<td><p>Compute a streamribbon starting from (x0,y0,z0) given a list of arrays containing 'vector' information.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Post.streamSurf" title="Post.streamSurf"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Post.streamSurf</span></code></a></p></td>
<td><p>Compute a stream surface.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Post.isoLine" title="Post.isoLine"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Post.isoLine</span></code></a></p></td>
<td><p>Compute an isoLine correponding to value of field 'var' on arrays.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Post.isoSurf" title="Post.isoSurf"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Post.isoSurf</span></code></a></p></td>
<td><p>Compute an isoSurf corresponding to value of field 'var' in volume arrays.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Post.isoSurfMC" title="Post.isoSurfMC"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Post.isoSurfMC</span></code></a></p></td>
<td><p>Compute an isoSurf correponding to value of field 'var' in volume arrays.</p></td>
</tr>
</tbody>
</table>
<p><strong>&#8211; Solution integration</strong></p>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#Post.integ" title="Post.integ"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Post.integ</span></code></a></p></td>
<td><p>Integral of fields.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Post.integNorm" title="Post.integNorm"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Post.integNorm</span></code></a></p></td>
<td><p>Integral of fields times normal.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Post.integNormProduct" title="Post.integNormProduct"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Post.integNormProduct</span></code></a></p></td>
<td><p>Integral of scalar product fields times normal.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Post.integMoment" title="Post.integMoment"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Post.integMoment</span></code></a></p></td>
<td><p>Integral of moments.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Post.integMomentNorm" title="Post.integMomentNorm"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Post.integMomentNorm</span></code></a></p></td>
<td><p>Integral of moments (OM^f.vect(n)).</p></td>
</tr>
</tbody>
</table>
</section>
<section id="contents">
<h2>Contents</h2>
<section id="modifying-creating-variables">
<h3>Modifying/creating variables</h3>
<dl class="py function">
<dt class="sig sig-object py" id="Post.renameVars">
<span class="sig-prename descclassname"><span class="pre">Post.</span></span><span class="sig-name descname"><span class="pre">renameVars</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">t</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">oldVarNameList</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">newVarNameList</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Rename a list of variables with new variable names.
Exists also as in place function (_renameVars) that modifies t and returns None.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>t</strong> (<em>[</em><em>array</em><em>, </em><em>arrays</em><em>] or </em><em>[</em><em>zone</em><em>, </em><em>list</em><em> of </em><em>zones</em><em>, </em><em>base</em><em>, </em><em>tree</em><em>]</em>) &#8211; Input data</p></li>
<li><p><strong>oldVarNameList</strong> (<em>list</em><em> of </em><em>strings</em>) &#8211; list of variables to rename</p></li>
<li><p><strong>newVarNameList</strong> (<em>list</em><em> of </em><em>strings</em>) &#8211; list of new variable names</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>reference copy of input</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>identical to t</p>
</dd>
</dl>
<p><em>Example of use:</em></p>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/renameVars.py">Rename variables (array)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - renameVars (array) -</span>
<span class="kn">import</span> <span class="nn">Converter</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Post</span> <span class="k">as</span> <span class="nn">P</span>
<span class="kn">import</span> <span class="nn">Generator</span> <span class="k">as</span> <span class="nn">G</span>

<span class="n">ni</span> <span class="o">=</span> <span class="mi">30</span><span class="p">;</span> <span class="n">nj</span> <span class="o">=</span> <span class="mi">40</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cart</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mf">10.</span><span class="o">/</span><span class="p">(</span><span class="n">ni</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mf">10.</span><span class="o">/</span><span class="p">(</span><span class="n">nj</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="n">ni</span><span class="p">,</span><span class="n">nj</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="s1">&#39;ro&#39;</span><span class="p">,</span> <span class="mf">1.</span><span class="p">)</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="s1">&#39;rou&#39;</span><span class="p">,</span> <span class="mf">1.</span><span class="p">)</span>

<span class="c1"># Rename a list of variables</span>
<span class="n">m2</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">renameVars</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;ro&#39;</span><span class="p">,</span><span class="s1">&#39;rou&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;Density&#39;</span><span class="p">,</span><span class="s1">&#39;MomentumX&#39;</span><span class="p">])</span>
<span class="n">C</span><span class="o">.</span><span class="n">convertArrays2File</span><span class="p">(</span><span class="n">m2</span><span class="p">,</span> <span class="s2">&quot;out.plt&quot;</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/renameVarsPT.py">Rename variables (pyTree)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - renameVars (pyTree) -</span>
<span class="kn">import</span> <span class="nn">Converter.PyTree</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Post.PyTree</span> <span class="k">as</span> <span class="nn">P</span>
<span class="kn">import</span> <span class="nn">Generator.PyTree</span> <span class="k">as</span> <span class="nn">G</span>

<span class="n">ni</span> <span class="o">=</span> <span class="mi">30</span><span class="p">;</span> <span class="n">nj</span> <span class="o">=</span> <span class="mi">40</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cart</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mf">10.</span><span class="o">/</span><span class="p">(</span><span class="n">ni</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mf">10.</span><span class="o">/</span><span class="p">(</span><span class="n">nj</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="n">ni</span><span class="p">,</span><span class="n">nj</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">addVars</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;Density&#39;</span><span class="p">,</span> <span class="s1">&#39;centers:MomentumX&#39;</span><span class="p">])</span>

<span class="c1"># Rename a list of variables</span>
<span class="n">m2</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">renameVars</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;Density&#39;</span><span class="p">,</span> <span class="s1">&#39;centers:MomentumX&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;Density_M&#39;</span><span class="p">,</span> <span class="s1">&#39;centers:MomentumX_M&#39;</span><span class="p">])</span>

<span class="n">C</span><span class="o">.</span><span class="n">convertPyTree2File</span><span class="p">(</span><span class="n">m2</span><span class="p">,</span> <span class="s1">&#39;out.cgns&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<hr class="docutils" />
<dl class="py function">
<dt class="sig sig-object py" id="Post.PyTree.importVariables">
<span class="sig-prename descclassname"><span class="pre">Post.PyTree.</span></span><span class="sig-name descname"><span class="pre">importVariables</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">t1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.e-6</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">addExtra</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Variables located at nodes and/or centers can be imported from a pyTree t1
to a pyTree t2.
If one variable already exists in t2, it is replaced by the same
variable from t1.
If method=0, zone are matched from names, if method=1, zones are
matched from coordinates with a tolerance eps, if method=2, zones
are taken in the given order of t1 and t2 (must match one by one).
If addExtra=1, unmatched zones are added to a base named &#8216;EXTRA&#8217;.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>t1</strong> (<em>pyTree</em>) &#8211; Input data</p></li>
<li><p><strong>t2</strong> (<em>pyTree</em>) &#8211; Input data</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>reference copy of t2</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pyTree</p>
</dd>
</dl>
<p><em>Example of use:</em></p>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/importVariablesPT.py">Import variables to a tree (pyTree)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - importVariables (pyTree) -</span>
<span class="kn">import</span> <span class="nn">Converter.PyTree</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Generator.PyTree</span> <span class="k">as</span> <span class="nn">G</span>
<span class="kn">import</span> <span class="nn">Post.PyTree</span> <span class="k">as</span> <span class="nn">P</span>

<span class="n">z1</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cart</span><span class="p">((</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">),(</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.1</span><span class="p">),(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>
<span class="n">z2</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cart</span><span class="p">((</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">),(</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.1</span><span class="p">),(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>
<span class="n">t1</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">newPyTree</span><span class="p">([</span><span class="s1">&#39;Base&#39;</span><span class="p">,</span> <span class="n">z1</span><span class="p">]);</span> <span class="n">t2</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">newPyTree</span><span class="p">([</span><span class="s1">&#39;Base&#39;</span><span class="p">,</span> <span class="n">z2</span><span class="p">])</span>

<span class="n">C</span><span class="o">.</span><span class="n">_initVars</span><span class="p">(</span><span class="n">t1</span><span class="p">,</span><span class="s1">&#39;centers:cellN&#39;</span><span class="p">,</span><span class="mf">1.</span><span class="p">)</span>
<span class="n">C</span><span class="o">.</span><span class="n">_initVars</span><span class="p">(</span><span class="n">t1</span><span class="p">,</span><span class="s1">&#39;centers:Density&#39;</span><span class="p">,</span><span class="mf">1.</span><span class="p">)</span>
<span class="n">C</span><span class="o">.</span><span class="n">_initVars</span><span class="p">(</span><span class="n">t1</span><span class="p">,</span><span class="s1">&#39;Pressure&#39;</span><span class="p">,</span><span class="mf">10.</span><span class="p">)</span>
<span class="n">C</span><span class="o">.</span><span class="n">_initVars</span><span class="p">(</span><span class="n">t2</span><span class="p">,</span><span class="s1">&#39;centers:cellN&#39;</span><span class="p">,</span><span class="mf">0.</span><span class="p">)</span>

<span class="n">t2</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">importVariables</span><span class="p">(</span><span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">)</span>

<span class="n">C</span><span class="o">.</span><span class="n">convertPyTree2File</span><span class="p">(</span><span class="n">t2</span><span class="p">,</span> <span class="s1">&#39;out.cgns&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<hr class="docutils" />
<dl class="py function">
<dt class="sig sig-object py" id="Post.computeVariables">
<span class="sig-prename descclassname"><span class="pre">Post.</span></span><span class="sig-name descname"><span class="pre">computeVariables</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">varList</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gamma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.4</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rgp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">287.053</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">s0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">betas</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.458e-6</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Cs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">110.4</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mus</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.76e-5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Ts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">273.15</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>New variables can be computed from conservative variables.
The list of the names of the variables to compute must be provided.
The computation of some variables (e.g. viscosity) require some constants as input data.
In the pyTree version, if a reference state node is defined in the pyTree, then the corresponding reference
constants are used. Otherwise, they must be specified as an argument of the function.
Exists also as in place version (_computeVariables) that modifies a and returns None.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>a</strong> (<em>[</em><em>array</em><em>, </em><em>list</em><em> of </em><em>arrays</em><em>] or </em><em>[</em><em>pyTree</em><em>, </em><em>base</em><em>, </em><em>zone</em><em>, </em><em>list</em><em> of </em><em>zones</em><em>]</em>) &#8211; Input data</p></li>
<li><p><strong>varList</strong> (<em>list</em><em> of </em><em>strings</em>) &#8211; list of variable names (can be preceded by &#8216;nodes:&#8217; or &#8216;centers:&#8217;)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>identical to input</p>
</dd>
</dl>
<p>The constants are:</p>
<ul class="simple">
<li><p>&#8216;gamma&#8217; for the specific heat ratio: <span class="math notranslate nohighlight">\(\gamma\)</span>;</p></li>
<li><p>&#8216;rgp&#8217; for the perfect gas constant: <span class="math notranslate nohighlight">\(R = (\gamma-1) \times C_v\)</span>;</p></li>
<li><p>&#8216;betas&#8217; and &#8216;Cs&#8217; (Sutherland&#8217;s law constants), or &#8216;Cs&#8217;,&#8217;Ts&#8217; and &#8216;mus&#8217;;</p></li>
<li><p>&#8216;s0&#8217; for a constant entropy, defined by: <span class="math notranslate nohighlight">\(s_0 = s_{ref} - R \frac{\gamma}{\gamma-1} ln(T_{ref}) + R\ ln(P_{ref})\)</span> where <span class="math notranslate nohighlight">\(\ s_{ref}, T_{ref}\)</span> and <span class="math notranslate nohighlight">\(P_{ref}\)</span> are defined for a reference state.</p></li>
</ul>
<p>Computed variables are defined by their CGNS names:</p>
<ul class="simple">
<li><p>&#8216;VelocityX&#8217;, &#8216;VelocityY&#8217;, &#8216;VelocityZ&#8217; for components of the absolute velocity,</p></li>
<li><p>&#8216;VelocityMagnitude&#8217; for the absolute velocity magnitude,</p></li>
<li><p>&#8216;Pressure&#8217; for the static pressure (requires: gamma),</p></li>
<li><p>&#8216;Temperature&#8217; for the static temperature (requires: gamma, rgp),</p></li>
<li><p>&#8216;Enthalpy&#8217; for the enthalpy (requires: gamma),</p></li>
<li><p>&#8216;Entropy&#8217; for the entropy (requires: gamma, rgp, s0),</p></li>
<li><p>&#8216;Mach&#8217; for the Mach number (requires: gamma),</p></li>
<li><p>&#8216;ViscosityMolecular&#8217; for the fluid molecular viscosity (requires: gamma, rgp, Ts, mus, Cs),</p></li>
<li><p>&#8216;PressureStagnation&#8217; for stagnation pressure(requires: gamma),</p></li>
<li><p>&#8216;TemperatureStagnation&#8217; for stagnation temperature (requires: gamma, rgp),</p></li>
<li><p>&#8216;PressureDynamic&#8217; for dynamic pressure (requires: gamma).</p></li>
</ul>
<p><em>Example of use:</em></p>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/computeVariables.py">Compute variables (array)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - computeVariables (array) -</span>
<span class="kn">import</span> <span class="nn">Converter</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Post</span> <span class="k">as</span> <span class="nn">P</span>
<span class="kn">import</span> <span class="nn">Generator</span> <span class="k">as</span> <span class="nn">G</span>

<span class="n">ni</span> <span class="o">=</span> <span class="mi">30</span><span class="p">;</span> <span class="n">nj</span> <span class="o">=</span> <span class="mi">40</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cart</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mf">10.</span><span class="o">/</span><span class="p">(</span><span class="n">ni</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mf">10.</span><span class="o">/</span><span class="p">(</span><span class="n">nj</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="n">ni</span><span class="p">,</span><span class="n">nj</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="s1">&#39;ro,rou, rov,row,roE&#39;</span><span class="p">,</span> <span class="n">ni</span><span class="p">,</span> <span class="n">nj</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="s1">&#39;ro&#39;</span><span class="p">,</span> <span class="mf">1.</span><span class="p">)</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="s1">&#39;rou&#39;</span><span class="p">,</span> <span class="mf">1.</span><span class="p">)</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="s1">&#39;rov&#39;</span><span class="p">,</span> <span class="mf">0.</span><span class="p">)</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="s1">&#39;row&#39;</span><span class="p">,</span> <span class="mf">0.</span><span class="p">)</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="s1">&#39;roE&#39;</span><span class="p">,</span> <span class="mf">1.</span><span class="p">)</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">addVars</span><span class="p">([</span><span class="n">m</span><span class="p">,</span> <span class="n">c</span><span class="p">])</span>

<span class="c1">#--------------------------------------------</span>
<span class="c1"># Pressure and Mach number extraction</span>
<span class="c1"># default values of rgp and gamma are used</span>
<span class="c1">#--------------------------------------------</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">computeVariables</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;Mach&#39;</span><span class="p">,</span> <span class="s1">&#39;Pressure&#39;</span><span class="p">])</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">addVars</span><span class="p">([</span><span class="n">m</span><span class="p">,</span> <span class="n">p</span><span class="p">])</span>
<span class="n">C</span><span class="o">.</span><span class="n">convertArrays2File</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="s2">&quot;out.plt&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In the pyTree version, if the variable name is prefixed by &#8216;centers:&#8217; then the variable is computed at centers only (e.g. &#8216;centers:Pressure&#8217;), and if it is not prefixed, then the variable is computed at nodes.</p>
</div>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/computeVariablesPT.py">Compute variables (pyTree)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - computeVariables (pyTree) -</span>
<span class="kn">import</span> <span class="nn">Converter.PyTree</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Post.PyTree</span> <span class="k">as</span> <span class="nn">P</span>
<span class="kn">import</span> <span class="nn">Generator.PyTree</span> <span class="k">as</span> <span class="nn">G</span>

<span class="n">ni</span> <span class="o">=</span> <span class="mi">30</span><span class="p">;</span> <span class="n">nj</span> <span class="o">=</span> <span class="mi">40</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cart</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mf">10.</span><span class="o">/</span><span class="p">(</span><span class="n">ni</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mf">10.</span><span class="o">/</span><span class="p">(</span><span class="n">nj</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="n">ni</span><span class="p">,</span><span class="n">nj</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
<span class="nb">vars</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Density&#39;</span><span class="p">,</span><span class="s1">&#39;MomentumX&#39;</span><span class="p">,</span> <span class="s1">&#39;MomentumY&#39;</span><span class="p">,</span> <span class="s1">&#39;MomentumZ&#39;</span><span class="p">,</span> \
        <span class="s1">&#39;EnergyStagnationDensity&#39;</span><span class="p">]</span>
<span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">vars</span><span class="p">:</span> <span class="n">m</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">addVars</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>

<span class="c1"># Pressure and Mach number extraction</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">computeVariables</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;Mach&#39;</span><span class="p">,</span> <span class="s1">&#39;Pressure&#39;</span><span class="p">])</span>
<span class="n">C</span><span class="o">.</span><span class="n">convertPyTree2File</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="s1">&#39;out.cgns&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<hr class="docutils" />
<dl class="py function">
<dt class="sig sig-object py" id="Post.computeExtraVariable">
<span class="sig-prename descclassname"><span class="pre">Post.</span></span><span class="sig-name descname"><span class="pre">computeExtraVariable</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">varName</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gamma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.4</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rgp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">287.053</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Cs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">110.4</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mus</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.76e-5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Ts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">273.15</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Compute more advanced variables from conservative variables.
&#8216;varName&#8217; can be:</p>
<ul class="simple">
<li><p>Vorticity,</p></li>
<li><p>VorticityMagnitude,</p></li>
<li><p>QCriterion,</p></li>
<li><p>ShearStress,</p></li>
<li><p>SkinFriction,</p></li>
<li><p>SkinFrictionTangential</p></li>
</ul>
<p>The computation of the shear stress requires  gamma, rgp, Ts, mus, Cs as input data.
In the pyTree version, if a reference state node is defined in the pyTree, then thecorresponding reference
constants are used. Otherwise, they must be specified as an argument of the function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>a</strong> (<em>[</em><em>array</em><em>, </em><em>list</em><em> of </em><em>arrays</em><em>] or </em><em>[</em><em>pyTree</em><em>, </em><em>base</em><em>, </em><em>zone</em><em>, </em><em>list</em><em> of </em><em>zones</em><em>]</em>) &#8211; Input data</p></li>
<li><p><strong>varName</strong> (<em>string</em>) &#8211; variable name (can be preceded by &#8216;nodes:&#8217; or &#8216;centers:&#8217;)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>identical to input</p>
</dd>
</dl>
<p><em>Example of use:</em></p>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/computeExtraVariable.py">Extra variables computation (array)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - computeExtraVariable (array) -</span>
<span class="kn">import</span> <span class="nn">Generator</span> <span class="k">as</span> <span class="nn">G</span>
<span class="kn">import</span> <span class="nn">Converter</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Post</span> <span class="k">as</span> <span class="nn">P</span>
<span class="kn">import</span> <span class="nn">Transform</span> <span class="k">as</span> <span class="nn">T</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cart</span><span class="p">(</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">50</span><span class="p">,</span><span class="mi">50</span><span class="p">,</span><span class="mi">50</span><span class="p">)</span> <span class="p">)</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;Density&#39;</span><span class="p">,</span> <span class="mf">1.</span><span class="p">)</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;MomentumX&#39;</span><span class="p">,</span> <span class="mf">1.</span><span class="p">)</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;MomentumY&#39;</span><span class="p">,</span> <span class="mf">0.</span><span class="p">)</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;MomentumZ&#39;</span><span class="p">,</span> <span class="mf">0.</span><span class="p">)</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;EnergyStagnationDensity&#39;</span><span class="p">,</span> <span class="mf">100000.</span><span class="p">)</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">computeExtraVariable</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;VorticityMagnitude&#39;</span><span class="p">)</span>
<span class="n">q</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">computeExtraVariable</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;QCriterion&#39;</span><span class="p">)</span>
<span class="n">tau</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">computeExtraVariable</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;ShearStress&#39;</span><span class="p">)</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">node2Center</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">addVars</span><span class="p">([</span><span class="n">a</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">q</span><span class="p">,</span> <span class="n">tau</span><span class="p">])</span>

<span class="c1"># Skin friction requires a surface array with shear stress already computed</span>
<span class="n">wall</span> <span class="o">=</span> <span class="n">T</span><span class="o">.</span><span class="n">subzone</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">49</span><span class="p">,</span><span class="mi">49</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
<span class="n">skinFriction</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">computeExtraVariable</span><span class="p">(</span><span class="n">wall</span><span class="p">,</span> <span class="s1">&#39;SkinFriction&#39;</span><span class="p">)</span>
<span class="n">skinFrictionTangential</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">computeExtraVariable</span><span class="p">(</span><span class="n">wall</span><span class="p">,</span> <span class="s1">&#39;SkinFrictionTangential&#39;</span><span class="p">)</span>
<span class="n">wall</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">addVars</span><span class="p">([</span><span class="n">wall</span><span class="p">,</span> <span class="n">skinFriction</span><span class="p">,</span> <span class="n">skinFrictionTangential</span><span class="p">])</span>
<span class="n">C</span><span class="o">.</span><span class="n">convertArrays2File</span><span class="p">([</span><span class="n">wall</span><span class="p">],</span> <span class="s1">&#39;out.plt&#39;</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/computeExtraVariablePT.py">Extra variables computation (pyTree)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - computeExtraVariable (pyTree) -</span>
<span class="kn">import</span> <span class="nn">Generator.PyTree</span> <span class="k">as</span> <span class="nn">G</span>
<span class="kn">import</span> <span class="nn">Converter.PyTree</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Transform.PyTree</span> <span class="k">as</span> <span class="nn">T</span>
<span class="kn">import</span> <span class="nn">Post.PyTree</span> <span class="k">as</span> <span class="nn">P</span>

<span class="k">def</span> <span class="nf">F</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">):</span> <span class="k">return</span> <span class="n">x</span><span class="o">*</span><span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="o">*</span><span class="n">y</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cart</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">50</span><span class="p">,</span><span class="mi">50</span><span class="p">,</span><span class="mi">50</span><span class="p">))</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;Density&#39;</span><span class="p">,</span> <span class="mf">1.</span><span class="p">)</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;MomentumX&#39;</span><span class="p">,</span> <span class="n">F</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;CoordinateX&#39;</span><span class="p">,</span> <span class="s1">&#39;CoordinateY&#39;</span><span class="p">])</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;MomentumY&#39;</span><span class="p">,</span> <span class="mf">0.</span><span class="p">)</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;MomentumZ&#39;</span><span class="p">,</span> <span class="mf">0.</span><span class="p">)</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;EnergyStagnationDensity&#39;</span><span class="p">,</span> <span class="mf">100000.</span><span class="p">)</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">computeExtraVariable</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;centers:VorticityMagnitude&#39;</span><span class="p">)</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">computeExtraVariable</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;centers:QCriterion&#39;</span><span class="p">)</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">computeExtraVariable</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;centers:ShearStress&#39;</span><span class="p">)</span>

<span class="n">b</span> <span class="o">=</span> <span class="n">T</span><span class="o">.</span><span class="n">subzone</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">50</span><span class="p">,</span><span class="mi">50</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">computeExtraVariable</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="s1">&#39;centers:SkinFriction&#39;</span><span class="p">)</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">computeExtraVariable</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="s1">&#39;centers:SkinFrictionTangential&#39;</span><span class="p">)</span>

<span class="n">C</span><span class="o">.</span><span class="n">convertPyTree2File</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;out.cgns&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<hr class="docutils" />
<dl class="py function">
<dt class="sig sig-object py" id="Post.PyTree.computeWallShearStress">
<span class="sig-prename descclassname"><span class="pre">Post.PyTree.</span></span><span class="sig-name descname"><span class="pre">computeWallShearStress</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">t</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Compute the shear stress at wall boundaries provided the velocity gradient is already computed.
The problem dimension and the reference state must be provided in t, defining the skin mesh.</p>
<p>Exists also as in place version (_computeWallShearStress) that modifies t and returns None.</p>
<p>The function is only available in the pyTree version.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>t</strong> (<em>pyTree</em><em>, </em><em>base</em><em>, </em><em>zone</em><em>, </em><em>list</em><em> of </em><em>zones</em>) &#8211; input data</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>identical to input</p>
</dd>
</dl>
<p><em>Example of use:</em></p>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/computeWallShearStressPT.py">Wall shear stress computation (pyTree)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - computeWallShearStress (pyTree) -</span>
<span class="kn">import</span> <span class="nn">Generator.PyTree</span> <span class="k">as</span> <span class="nn">G</span>
<span class="kn">import</span> <span class="nn">Converter.PyTree</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Transform.PyTree</span> <span class="k">as</span> <span class="nn">T</span>
<span class="kn">import</span> <span class="nn">Post.PyTree</span> <span class="k">as</span> <span class="nn">P</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cart</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">50</span><span class="p">,</span><span class="mi">50</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">newPyTree</span><span class="p">([</span><span class="s1">&#39;Base&#39;</span><span class="p">,</span><span class="n">a</span><span class="p">])</span>
<span class="n">C</span><span class="o">.</span><span class="n">_addState</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="s1">&#39;EquationDimension&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">C</span><span class="o">.</span><span class="n">_addState</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">adim</span><span class="o">=</span><span class="s1">&#39;adim1&#39;</span><span class="p">)</span>
<span class="n">C</span><span class="o">.</span><span class="n">_initVars</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="s1">&#39;</span><span class="si">{VelocityX}</span><span class="s1">=0.2*</span><span class="si">{CoordinateX}</span><span class="s1">**2&#39;</span><span class="p">)</span>
<span class="n">C</span><span class="o">.</span><span class="n">_initVars</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="s1">&#39;</span><span class="si">{VelocityY}</span><span class="s1">=0.3*</span><span class="si">{CoordinateY}</span><span class="s1">*</span><span class="si">{CoordinateX}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">C</span><span class="o">.</span><span class="n">_initVars</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="s1">&#39;VelocityZ&#39;</span><span class="p">,</span> <span class="mf">0.</span><span class="p">)</span>
<span class="k">for</span> <span class="n">var</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;VelocityX&#39;</span><span class="p">,</span><span class="s1">&#39;VelocityY&#39;</span><span class="p">,</span><span class="s1">&#39;VelocityZ&#39;</span><span class="p">]:</span>
    <span class="n">t</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">computeGrad</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="n">var</span><span class="p">)</span>
    <span class="n">t</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">node2Center</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="n">var</span><span class="p">)</span>
<span class="n">C</span><span class="o">.</span><span class="n">_initVars</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="s1">&#39;centers:Density&#39;</span><span class="p">,</span> <span class="mf">1.</span><span class="p">)</span>
<span class="n">C</span><span class="o">.</span><span class="n">_initVars</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="s1">&#39;centers:EnergyStagnationDensity&#39;</span><span class="p">,</span> <span class="mf">1.</span><span class="p">)</span>
<span class="n">C</span><span class="o">.</span><span class="n">_initVars</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="s1">&#39;centers:Temperature&#39;</span><span class="p">,</span> <span class="mf">1.</span><span class="p">)</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">computeWallShearStress</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="n">C</span><span class="o">.</span><span class="n">convertPyTree2File</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="s1">&#39;wall.cgns&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<hr class="docutils" />
<dl class="py function">
<dt class="sig sig-object py" id="Post.computeGrad">
<span class="sig-prename descclassname"><span class="pre">Post.</span></span><span class="sig-name descname"><span class="pre">computeGrad</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">varname</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Compute the gradient (<span class="math notranslate nohighlight">\(\nabla x, \nabla y, \nabla z\)</span>) of a field of name <em>varname</em>
defined in <em>a</em>. The returned field is located at cell centers.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>a</strong> (<em>[</em><em>array</em><em>, </em><em>list</em><em> of </em><em>arrays</em><em>] or </em><em>[</em><em>pyTree</em><em>, </em><em>base</em><em>, </em><em>zone</em><em>, </em><em>list</em><em> of </em><em>zones</em><em>]</em>) &#8211; Input data</p></li>
<li><p><strong>varname</strong> (<em>string</em>) &#8211; variable name (can be preceded by &#8216;nodes:&#8217; or &#8216;centers:&#8217;)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>identical to input</p>
</dd>
</dl>
<p><em>Example of use:</em></p>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/computeGrad.py">Gradient of density field (array)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - computeGrad (array) -</span>
<span class="kn">import</span> <span class="nn">Converter</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Post</span> <span class="k">as</span> <span class="nn">P</span>
<span class="kn">import</span> <span class="nn">Generator</span> <span class="k">as</span> <span class="nn">G</span>

<span class="n">ni</span> <span class="o">=</span> <span class="mi">1001</span><span class="p">;</span> <span class="n">nj</span> <span class="o">=</span> <span class="mi">1001</span><span class="p">;</span> <span class="n">nk</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cart</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mf">10.</span><span class="o">/</span><span class="p">(</span><span class="n">ni</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mf">10.</span><span class="o">/</span><span class="p">(</span><span class="n">nj</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="n">ni</span><span class="p">,</span><span class="n">nj</span><span class="p">,</span><span class="n">nk</span><span class="p">))</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">{ro}</span><span class="s1">= 2*</span><span class="si">{x}</span><span class="s1">+</span><span class="si">{x}</span><span class="s1">*</span><span class="si">{y}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">computeGrad</span><span class="p">(</span><span class="n">m</span><span class="p">,</span><span class="s1">&#39;ro&#39;</span><span class="p">)</span> <span class="c1"># p is defined on centers</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">center2Node</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="c1"># back on initial mesh</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">addVars</span><span class="p">([</span><span class="n">m</span><span class="p">,</span> <span class="n">p</span><span class="p">])</span>
<span class="n">C</span><span class="o">.</span><span class="n">convertArrays2File</span><span class="p">([</span><span class="n">p</span><span class="p">],</span> <span class="s1">&#39;out.plt&#39;</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/computeGradPT.py">Gradient of density field (pyTree)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - computeGrad (pyTree) -</span>
<span class="kn">import</span> <span class="nn">Converter.PyTree</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Post.PyTree</span> <span class="k">as</span> <span class="nn">P</span>
<span class="kn">import</span> <span class="nn">Generator.PyTree</span> <span class="k">as</span> <span class="nn">G</span>

<span class="n">ni</span> <span class="o">=</span> <span class="mi">30</span><span class="p">;</span> <span class="n">nj</span> <span class="o">=</span> <span class="mi">40</span><span class="p">;</span> <span class="n">nk</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cart</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mf">10.</span><span class="o">/</span><span class="p">(</span><span class="n">ni</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mf">10.</span><span class="o">/</span><span class="p">(</span><span class="n">nj</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="n">ni</span><span class="p">,</span><span class="n">nj</span><span class="p">,</span><span class="n">nk</span><span class="p">))</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">{Density}</span><span class="s1">=2*</span><span class="si">{CoordinateX}</span><span class="s1">+</span><span class="si">{CoordinateX}</span><span class="s1">*</span><span class="si">{CoordinateY}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">computeGrad</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="s1">&#39;Density&#39;</span><span class="p">)</span>
<span class="n">C</span><span class="o">.</span><span class="n">convertPyTree2File</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="s1">&#39;out.cgns&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<hr class="docutils" />
<dl class="py function">
<dt class="sig sig-object py" id="Post.computeGrad2">
<span class="sig-prename descclassname"><span class="pre">Post.</span></span><span class="sig-name descname"><span class="pre">computeGrad2</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">varname</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Compute the gradient (<span class="math notranslate nohighlight">\(\nabla x, \nabla y, \nabla z\)</span>) at cell centers for a field of name <em>varname</em> located at cell centers.</p>
<p>Using Converter.array interface:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">P</span><span class="o">.</span><span class="n">computeGrad2</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">ac</span><span class="p">,</span> <span class="n">indices</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">BCField</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
<p><em>a</em> denotes the mesh, <em>ac</em> denotes the fields located at centers.
indices is a numpy 1D-array of face list, BCField is the corresponding numpy array of face fields. They are used to force a value at some faces before computing the gradient.</p>
<p>Using the pyTree version:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">P</span><span class="o">.</span><span class="n">computeGrad2</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">varname</span><span class="p">)</span>
</pre></div>
</div>
<p>The variable name must be located at cell centers.
Indices and BCFields are automatically extracted from BCDataSet nodes:
if a BCDataSet node is defined for a BC of the pyTree, the corresponding face fields
are imposed when computing the gradient.
If volume has already been computed and volume field is present in tree, it is not recomputed for the gradient computation (only NGON cases up to now).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>a</strong> (<em>[</em><em>array</em><em>, </em><em>list</em><em> of </em><em>arrays</em><em>] or </em><em>[</em><em>pyTree</em><em>, </em><em>base</em><em>, </em><em>zone</em><em>, </em><em>list</em><em> of </em><em>zones</em><em>]</em>) &#8211; Input data</p></li>
<li><p><strong>varname</strong> (<em>string</em>) &#8211; variable name (can be preceded by &#8216;nodes:&#8217; or &#8216;centers:&#8217;)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>identical to input</p>
</dd>
</dl>
<p><em>Example of use:</em></p>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/computeGrad2.py">Gradient of density field with computeGrad2 (array)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - computeGrad2 (array) -</span>
<span class="kn">import</span> <span class="nn">Converter</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Post</span> <span class="k">as</span> <span class="nn">P</span>
<span class="kn">import</span> <span class="nn">Generator</span> <span class="k">as</span> <span class="nn">G</span>

<span class="n">m</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cartNGon</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>

<span class="n">mc</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">node2Center</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="n">mc</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">mc</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">{ro}</span><span class="s1">= 2*</span><span class="si">{x}</span><span class="s1">+</span><span class="si">{x}</span><span class="s1">*</span><span class="si">{y}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="c1">#mc = C.initVars(mc, &#39;{ro}=1.&#39;)</span>
<span class="n">mv</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">extractVars</span><span class="p">(</span><span class="n">mc</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;ro&#39;</span><span class="p">])</span>

<span class="n">p</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">computeGrad2</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">mv</span><span class="p">)</span> <span class="c1"># p is defined on centers</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">center2Node</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="c1"># back on initial mesh</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">addVars</span><span class="p">([</span><span class="n">m</span><span class="p">,</span> <span class="n">p</span><span class="p">])</span>
<span class="n">C</span><span class="o">.</span><span class="n">convertArrays2File</span><span class="p">([</span><span class="n">p</span><span class="p">],</span> <span class="s1">&#39;out.plt&#39;</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/computeGradPT2.py">Gradient of density field with computeGrad2 (pyTree)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - computeGrad2 (pyTree) -</span>
<span class="kn">import</span> <span class="nn">Converter.PyTree</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Post.PyTree</span> <span class="k">as</span> <span class="nn">P</span>
<span class="kn">import</span> <span class="nn">Generator.PyTree</span> <span class="k">as</span> <span class="nn">G</span>

<span class="n">m</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cartNGon</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>
<span class="n">C</span><span class="o">.</span><span class="n">_initVars</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="s1">&#39;{centers:Density}= 2*{centers:CoordinateX}+{centers:CoordinateY}*{centers:CoordinateZ}&#39;</span><span class="p">)</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">computeGrad2</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="s1">&#39;centers:Density&#39;</span><span class="p">)</span>
<span class="n">C</span><span class="o">.</span><span class="n">convertPyTree2File</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="s1">&#39;out.cgns&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<hr class="docutils" />
<dl class="py function">
<dt class="sig sig-object py" id="Post.computeGradLSQ">
<span class="sig-prename descclassname"><span class="pre">Post.</span></span><span class="sig-name descname"><span class="pre">computeGradLSQ</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">varNames</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Compute the gradient (<span class="math notranslate nohighlight">\(\nabla x, \nabla y, \nabla z\)</span>) at cell centers for a list of fields of names <em>varNames</em> located at cell centers. Only supports NGon meshes.</p>
<p>Using the pyTree version:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">computeGradLSQ</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">varNames</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>a</strong> (<em>[</em><em>pyTree</em><em>, </em><em>base</em><em>, </em><em>zone</em><em>, </em><em>list</em><em> of </em><em>zones</em><em>]</em>) &#8211; Input data</p></li>
<li><p><strong>varname</strong> (<em>string</em>) &#8211; list of variable names</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>identical to input</p>
</dd>
</dl>
<p><em>Example of use:</em></p>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/computeGradLSQPT.py">Gradient of fields f and g defined by functions F and G with computeGradLSQ (pyTree)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">Converter.PyTree</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Post.PyTree</span> <span class="k">as</span> <span class="nn">P</span>
<span class="kn">import</span> <span class="nn">Generator.PyTree</span> <span class="k">as</span> <span class="nn">G</span>
<span class="kn">import</span> <span class="nn">Converter.Internal</span> <span class="k">as</span> <span class="nn">I</span>
<span class="kn">import</span> <span class="nn">KCore.test</span> <span class="k">as</span> <span class="nn">test</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cartHexa</span><span class="p">((</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">),</span> <span class="p">(</span><span class="mf">1.</span><span class="o">/</span><span class="mf">10.</span><span class="p">,</span><span class="mf">1.</span><span class="o">/</span><span class="mf">10.</span><span class="p">,</span><span class="mf">1.</span><span class="o">/</span><span class="mf">10.</span><span class="p">),</span> <span class="p">(</span><span class="mi">11</span><span class="p">,</span><span class="mi">11</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">convertArray2NGon</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="n">I</span><span class="o">.</span><span class="n">_adaptNGon32NGon4</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">):</span> <span class="k">return</span> <span class="mf">3.</span><span class="o">*</span><span class="n">x</span> <span class="o">+</span> <span class="mf">2.</span><span class="o">*</span><span class="n">y</span> <span class="o">+</span> <span class="n">z</span>
<span class="k">def</span> <span class="nf">g</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">):</span> <span class="k">return</span> <span class="mf">4.</span><span class="o">*</span><span class="n">x</span> <span class="o">+</span> <span class="mf">3.</span><span class="o">*</span><span class="n">y</span> <span class="o">+</span> <span class="mf">2.</span><span class="o">*</span><span class="n">z</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;centers:f&#39;</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;centers:CoordinateX&#39;</span><span class="p">,</span> <span class="s1">&#39;centers:CoordinateY&#39;</span><span class="p">,</span> <span class="s1">&#39;centers:CoordinateZ&#39;</span><span class="p">])</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;centers:g&#39;</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;centers:CoordinateX&#39;</span><span class="p">,</span> <span class="s1">&#39;centers:CoordinateY&#39;</span><span class="p">,</span> <span class="s1">&#39;centers:CoordinateZ&#39;</span><span class="p">])</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">makeParentElements</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">computeGradLSQ</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;g&#39;</span><span class="p">,</span> <span class="s1">&#39;f&#39;</span><span class="p">])</span>
<span class="n">C</span><span class="o">.</span><span class="n">convertPyTree2File</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;out.cgns&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<hr class="docutils" />
<dl class="py function">
<dt class="sig sig-object py" id="Post.computeDiv">
<span class="sig-prename descclassname"><span class="pre">Post.</span></span><span class="sig-name descname"><span class="pre">computeDiv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">varname</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Compute the divergence <span class="math notranslate nohighlight">\(\nabla\cdot\left(\vec{\bullet}\right)\)</span> of a field defined by its
component names [&#8216;vectX&#8217;,&#8217;vectY&#8217;,&#8217;vectZ&#8217;] defined in <em>a</em>.
The returned field is located at cell centers.</p>
<p>Using Converter.array interface:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">P</span><span class="o">.</span><span class="n">computeDiv</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;vectX&#39;</span><span class="p">,</span><span class="s1">&#39;vectY&#39;</span><span class="p">,</span><span class="s1">&#39;vectZ&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>Using the pyTree version:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">P</span><span class="o">.</span><span class="n">computeDiv</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;vect&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>a</strong> (<em>[</em><em>array</em><em>, </em><em>list</em><em> of </em><em>arrays</em><em>] or </em><em>[</em><em>pyTree</em><em>, </em><em>base</em><em>, </em><em>zone</em><em>, </em><em>list</em><em> of </em><em>zones</em><em>]</em>) &#8211; Input data</p></li>
<li><p><strong>varname</strong> (<em>string</em>) &#8211; variable name (can be preceded by &#8216;nodes:&#8217; or &#8216;centers:&#8217;)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>identical to input</p>
</dd>
</dl>
<p><em>Example of use:</em></p>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/computeDiv.py">Divergence of a vector field (array)  with computeDiv</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - computeDiv (array) -</span>
<span class="kn">import</span> <span class="nn">Converter</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Post</span> <span class="k">as</span> <span class="nn">P</span>
<span class="kn">import</span> <span class="nn">Generator</span> <span class="k">as</span> <span class="nn">G</span>

<span class="n">ni</span> <span class="o">=</span> <span class="mi">1001</span><span class="p">;</span> <span class="n">nj</span> <span class="o">=</span> <span class="mi">1001</span><span class="p">;</span> <span class="n">nk</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cart</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mf">10.</span><span class="o">/</span><span class="p">(</span><span class="n">ni</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mf">10.</span><span class="o">/</span><span class="p">(</span><span class="n">nj</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="n">ni</span><span class="p">,</span><span class="n">nj</span><span class="p">,</span><span class="n">nk</span><span class="p">))</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">{veloX}</span><span class="s1">= 2*</span><span class="si">{x}</span><span class="s1">+</span><span class="si">{x}</span><span class="s1">*</span><span class="si">{y}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">{veloY}</span><span class="s1">= 4.*</span><span class="si">{y}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">{veloZ}</span><span class="s1">= </span><span class="si">{x}</span><span class="s1">+</span><span class="si">{z}</span><span class="s1">*</span><span class="si">{z}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">computeDiv</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;veloX&#39;</span><span class="p">,</span><span class="s1">&#39;veloY&#39;</span><span class="p">,</span><span class="s1">&#39;veloZ&#39;</span><span class="p">])</span> <span class="c1"># p is defined on centers</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">center2Node</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="c1"># back to initial mesh</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">addVars</span><span class="p">([</span><span class="n">m</span><span class="p">,</span> <span class="n">p</span><span class="p">])</span>
<span class="n">C</span><span class="o">.</span><span class="n">convertArrays2File</span><span class="p">([</span><span class="n">p</span><span class="p">],</span> <span class="s1">&#39;out.plt&#39;</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/computeDivPT.py">Divergence of a vector field (pyTree)  with computeDiv</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - computeDiv (pyTree) -</span>
<span class="kn">import</span> <span class="nn">Converter.PyTree</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Post.PyTree</span> <span class="k">as</span> <span class="nn">P</span>
<span class="kn">import</span> <span class="nn">Generator.PyTree</span> <span class="k">as</span> <span class="nn">G</span>

<span class="n">ni</span> <span class="o">=</span> <span class="mi">30</span><span class="p">;</span> <span class="n">nj</span> <span class="o">=</span> <span class="mi">40</span><span class="p">;</span> <span class="n">nk</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cart</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mf">10.</span><span class="o">/</span><span class="p">(</span><span class="n">ni</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mf">10.</span><span class="o">/</span><span class="p">(</span><span class="n">nj</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="n">ni</span><span class="p">,</span><span class="n">nj</span><span class="p">,</span><span class="n">nk</span><span class="p">))</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">{fldX}</span><span class="s1">=2*</span><span class="si">{CoordinateX}</span><span class="s1">+</span><span class="si">{CoordinateX}</span><span class="s1">*</span><span class="si">{CoordinateY}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">{fldY}</span><span class="s1">=4*</span><span class="si">{CoordinateY}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">{fldZ}</span><span class="s1">=</span><span class="si">{CoordinateX}</span><span class="s1">+</span><span class="si">{CoordinateZ}</span><span class="s1">*</span><span class="si">{CoordinateZ}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">computeDiv</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="s1">&#39;fld&#39;</span><span class="p">)</span>
<span class="n">C</span><span class="o">.</span><span class="n">convertPyTree2File</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="s1">&#39;out.cgns&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<hr class="docutils" />
<dl class="py function">
<dt class="sig sig-object py" id="Post.computeDiv2">
<span class="sig-prename descclassname"><span class="pre">Post.</span></span><span class="sig-name descname"><span class="pre">computeDiv2</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">varname</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>compute the divergence <span class="math notranslate nohighlight">\(\nabla\cdot\left(\vec{\bullet}\right)\)</span> at cell
centers for a vector field defined by its variable names [&#8216;vectX&#8217;,&#8217;vectY&#8217;,&#8217;vectZ&#8217;]
located at cell centers.</p>
<p>Using Converter.array interface:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">P</span><span class="o">.</span><span class="n">computeDiv2</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">ac</span><span class="p">,</span> <span class="n">indices</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">BCField</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
<p><em>a</em> denotes the mesh, <em>ac</em> denotes the components of the vector field located at centers.
indices is a numpy 1D-array of face list, BCField is the corresponding numpy array of face fields.
They are used to force a value at some faces before computing the gradients.</p>
<p>Using the pyTree version:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">P</span><span class="o">.</span><span class="n">computeDiv2</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;vect&#39;</span><span class="p">)</span>
<span class="n">P</span><span class="o">.</span><span class="n">computeDiv2</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;vect1&#39;</span><span class="p">,</span> <span class="s1">&#39;vect2&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>The variable name must be located at cell centers.
Indices and BCFields are automatically extracted from BCDataSet nodes:
if a BCDataSet node is defined for a BC of the pyTree, the corresponding face fields
are imposed when computing the gradient.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>a</strong> (<em>[</em><em>array</em><em>, </em><em>list</em><em> of </em><em>arrays</em><em>] or </em><em>[</em><em>pyTree</em><em>, </em><em>base</em><em>, </em><em>zone</em><em>, </em><em>list</em><em> of </em><em>zones</em><em>]</em>) &#8211; Input data</p></li>
<li><p><strong>varname</strong> (<em>[</em><em>string</em><em>, </em><em>list</em><em> of </em><em>strings</em><em>]</em>) &#8211; variable name(s) (can be preceded by &#8216;nodes:&#8217; or &#8216;centers:&#8217;)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>identical to input</p>
</dd>
</dl>
<p><em>Example of use:</em></p>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/computeDiv2.py">Divergence of a vector field (array) with computeDiv2</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - computeDiv2 (array) -</span>
<span class="kn">import</span> <span class="nn">Converter</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Post</span> <span class="k">as</span> <span class="nn">P</span>
<span class="kn">import</span> <span class="nn">Generator</span> <span class="k">as</span> <span class="nn">G</span>
<span class="kn">import</span> <span class="nn">math</span>

<span class="n">m</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cartNGon</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>

<span class="k">def</span> <span class="nf">Fu</span><span class="p">(</span><span class="n">a</span><span class="p">):</span> <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">Fv</span><span class="p">(</span><span class="n">a</span><span class="p">):</span> <span class="k">return</span> <span class="mf">4.</span><span class="o">*</span><span class="n">a</span>
<span class="k">def</span> <span class="nf">Fw</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">):</span> <span class="k">return</span> <span class="n">b</span><span class="o">*</span><span class="p">(</span><span class="n">c</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>

<span class="n">mc</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">node2Center</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="n">mc</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">mc</span><span class="p">,</span> <span class="s1">&#39;fldX&#39;</span><span class="p">,</span> <span class="n">Fu</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">])</span>
<span class="n">mc</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">mc</span><span class="p">,</span> <span class="s1">&#39;fldY&#39;</span><span class="p">,</span> <span class="n">Fv</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">])</span>
<span class="n">mc</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">mc</span><span class="p">,</span> <span class="s1">&#39;fldZ&#39;</span><span class="p">,</span> <span class="n">Fw</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;z&#39;</span><span class="p">])</span>
<span class="n">mv</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">extractVars</span><span class="p">(</span><span class="n">mc</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;fldX&#39;</span><span class="p">,</span> <span class="s1">&#39;fldY&#39;</span><span class="p">,</span> <span class="s1">&#39;fldZ&#39;</span><span class="p">])</span>

<span class="n">p</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">computeDiv2</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">mv</span><span class="p">)</span> <span class="c1"># p is defined on centers</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">center2Node</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="c1"># back on initial mesh</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">addVars</span><span class="p">([</span><span class="n">m</span><span class="p">,</span> <span class="n">p</span><span class="p">])</span>
<span class="n">C</span><span class="o">.</span><span class="n">convertArrays2File</span><span class="p">([</span><span class="n">p</span><span class="p">],</span> <span class="s1">&#39;out.plt&#39;</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/computeDiv2PT.py">Divergence of a vector field (pyTree) with computeDiv2</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - computeDiv2 (pyTree) -</span>
<span class="kn">import</span> <span class="nn">Converter.PyTree</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Post.PyTree</span> <span class="k">as</span> <span class="nn">P</span>
<span class="kn">import</span> <span class="nn">Generator.PyTree</span> <span class="k">as</span> <span class="nn">G</span>

<span class="n">m</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cartNGon</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>
<span class="n">C</span><span class="o">.</span><span class="n">_initVars</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="s1">&#39;{centers:fldX}= cos({centers:CoordinateX})&#39;</span><span class="p">)</span>
<span class="n">C</span><span class="o">.</span><span class="n">_initVars</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="s1">&#39;{centers:fldY}= 4.*{centers:CoordinateY}&#39;</span><span class="p">)</span>
<span class="n">C</span><span class="o">.</span><span class="n">_initVars</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="s1">&#39;{centers:fldZ}= {centers:CoordinateY}*{centers:CoordinateZ}**2.&#39;</span><span class="p">)</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">computeDiv2</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="s1">&#39;centers:fld&#39;</span><span class="p">)</span>
<span class="n">C</span><span class="o">.</span><span class="n">convertPyTree2File</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="s1">&#39;out.cgns&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<hr class="docutils" />
<dl class="py function">
<dt class="sig sig-object py" id="Post.computeNormGrad">
<span class="sig-prename descclassname"><span class="pre">Post.</span></span><span class="sig-name descname"><span class="pre">computeNormGrad</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">varname</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Compute the norm of gradient (<span class="math notranslate nohighlight">\(\nabla x, \nabla y, \nabla z\)</span>) of a field of name varname defined in a. The returned field &#8216;grad&#8217;+varname and is located at cell centers. <strong>(???)</strong></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>a</strong> (<em>[</em><em>array</em><em>, </em><em>list</em><em> of </em><em>arrays</em><em>] or </em><em>[</em><em>pyTree</em><em>, </em><em>base</em><em>, </em><em>zone</em><em>, </em><em>list</em><em> of </em><em>zones</em><em>]</em>) &#8211; Input data</p></li>
<li><p><strong>varname</strong> (<em>string</em>) &#8211; variable name (can be preceded by &#8216;nodes:&#8217; or &#8216;centers:&#8217;)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>identical to input</p>
</dd>
</dl>
<p><em>Example of use:</em></p>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/computeNormGrad.py">Norm of gradient of density (array)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - computeNormGrad (array) -</span>
<span class="kn">import</span> <span class="nn">Converter</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Post</span> <span class="k">as</span> <span class="nn">P</span>
<span class="kn">import</span> <span class="nn">Generator</span> <span class="k">as</span> <span class="nn">G</span>

<span class="n">ni</span> <span class="o">=</span> <span class="mi">11</span><span class="p">;</span> <span class="n">nj</span> <span class="o">=</span> <span class="mi">11</span><span class="p">;</span> <span class="n">nk</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cart</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mf">10.</span><span class="o">/</span><span class="p">(</span><span class="n">ni</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mf">10.</span><span class="o">/</span><span class="p">(</span><span class="n">nj</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="n">ni</span><span class="p">,</span><span class="n">nj</span><span class="p">,</span><span class="n">nk</span><span class="p">))</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">{ro}</span><span class="s1">= 2*</span><span class="si">{x}</span><span class="s1">+</span><span class="si">{x}</span><span class="s1">*</span><span class="si">{y}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">computeNormGrad</span><span class="p">(</span><span class="n">m</span><span class="p">,</span><span class="s1">&#39;ro&#39;</span><span class="p">)</span> <span class="c1"># p is defined on centers</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">center2Node</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="c1"># back on initial mesh</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">addVars</span><span class="p">([</span><span class="n">m</span><span class="p">,</span> <span class="n">p</span><span class="p">])</span>
<span class="n">C</span><span class="o">.</span><span class="n">convertArrays2File</span><span class="p">([</span><span class="n">p</span><span class="p">],</span> <span class="s1">&#39;out.plt&#39;</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/computeNormGradPT.py">Norm of gradient of density (pyTree)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - computeNormGrad (pyTree) -</span>
<span class="kn">import</span> <span class="nn">Converter.PyTree</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Post.PyTree</span> <span class="k">as</span> <span class="nn">P</span>
<span class="kn">import</span> <span class="nn">Generator.PyTree</span> <span class="k">as</span> <span class="nn">G</span>

<span class="n">ni</span> <span class="o">=</span> <span class="mi">30</span><span class="p">;</span> <span class="n">nj</span> <span class="o">=</span> <span class="mi">40</span><span class="p">;</span> <span class="n">nk</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cart</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mf">10.</span><span class="o">/</span><span class="p">(</span><span class="n">ni</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mf">10.</span><span class="o">/</span><span class="p">(</span><span class="n">nj</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="n">ni</span><span class="p">,</span><span class="n">nj</span><span class="p">,</span><span class="n">nk</span><span class="p">))</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">{Density}</span><span class="s1">=2*</span><span class="si">{CoordinateX}</span><span class="s1">+</span><span class="si">{CoordinateX}</span><span class="s1">*</span><span class="si">{CoordinateY}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">computeNormGrad</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="s1">&#39;Density&#39;</span><span class="p">)</span>
<span class="n">C</span><span class="o">.</span><span class="n">convertPyTree2File</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="s1">&#39;out.cgns&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<hr class="docutils" />
<dl class="py function">
<dt class="sig sig-object py" id="Post.computeCurl">
<span class="sig-prename descclassname"><span class="pre">Post.</span></span><span class="sig-name descname"><span class="pre">computeCurl</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">'vectx'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">'vecty'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">'vectz'</span></span></em><span class="optional">]</span><span class="sig-paren">)</span></dt>
<dd><p>Compute curl of a 3D vector defined by its variable names
[&#8216;vectx&#8217;,&#8217;vecty&#8217;,&#8217;vectz&#8217;] in a.
The returned field is defined at cell centers for structured grids and elements centers for unstructured grids.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>a</strong> (<em>[</em><em>array</em><em>, </em><em>list</em><em> of </em><em>arrays</em><em>] or </em><em>[</em><em>pyTree</em><em>, </em><em>base</em><em>, </em><em>zone</em><em>, </em><em>list</em><em> of </em><em>zones</em><em>]</em>) &#8211; Input data</p></li>
<li><p><strong>vect*</strong> (<em>string</em>) &#8211; variable name defining the 3D vector</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>identical to input</p>
</dd>
</dl>
<p><em>Example of use:</em></p>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/computeCurl.py">Curl of momentum field (array)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - computeCurl (array) -</span>
<span class="kn">import</span> <span class="nn">Converter</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Post</span> <span class="k">as</span> <span class="nn">P</span>
<span class="kn">import</span> <span class="nn">Generator</span> <span class="k">as</span> <span class="nn">G</span>

<span class="k">def</span> <span class="nf">F</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">):</span>
    <span class="k">return</span> <span class="mi">12</span><span class="o">*</span><span class="n">y</span><span class="o">*</span><span class="n">y</span> <span class="o">+</span> <span class="mi">4</span>

<span class="n">ni</span> <span class="o">=</span> <span class="mi">30</span><span class="p">;</span> <span class="n">nj</span> <span class="o">=</span> <span class="mi">40</span><span class="p">;</span> <span class="n">nk</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cart</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mf">10.</span><span class="o">/</span><span class="p">(</span><span class="n">ni</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mf">10.</span><span class="o">/</span><span class="p">(</span><span class="n">nj</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="n">ni</span><span class="p">,</span><span class="n">nj</span><span class="p">,</span><span class="n">nk</span><span class="p">))</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">m</span><span class="p">,</span><span class="s1">&#39;F1&#39;</span><span class="p">,</span><span class="n">F</span><span class="p">,[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span><span class="s1">&#39;y&#39;</span><span class="p">,</span><span class="s1">&#39;z&#39;</span><span class="p">])</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">m</span><span class="p">,</span><span class="s1">&#39;F2&#39;</span><span class="p">,</span><span class="mf">0.</span><span class="p">);</span> <span class="n">m</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">m</span><span class="p">,</span><span class="s1">&#39;F3&#39;</span><span class="p">,</span><span class="mf">0.</span><span class="p">)</span>

<span class="n">varname</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;F1&#39;</span><span class="p">,</span><span class="s1">&#39;F2&#39;</span><span class="p">,</span><span class="s1">&#39;F3&#39;</span><span class="p">]</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">computeCurl</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">varname</span><span class="p">)</span> <span class="c1"># defined on centers</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">center2Node</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="c1"># back on init grid</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">addVars</span><span class="p">([</span><span class="n">m</span><span class="p">,</span><span class="n">p</span><span class="p">])</span>
<span class="n">C</span><span class="o">.</span><span class="n">convertArrays2File</span><span class="p">([</span><span class="n">p</span><span class="p">],</span> <span class="s2">&quot;out.plt&quot;</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/computeCurlPT.py">Curl of momentum field (pyTree)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - computeCurl (pyTree) -</span>
<span class="kn">import</span> <span class="nn">Converter.PyTree</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Post.PyTree</span> <span class="k">as</span> <span class="nn">P</span>
<span class="kn">import</span> <span class="nn">Generator.PyTree</span> <span class="k">as</span> <span class="nn">G</span>

<span class="n">ni</span> <span class="o">=</span> <span class="mi">30</span><span class="p">;</span> <span class="n">nj</span> <span class="o">=</span> <span class="mi">40</span><span class="p">;</span> <span class="n">nk</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cart</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mf">10.</span><span class="o">/</span><span class="p">(</span><span class="n">ni</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mf">10.</span><span class="o">/</span><span class="p">(</span><span class="n">nj</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="n">ni</span><span class="p">,</span><span class="n">nj</span><span class="p">,</span><span class="n">nk</span><span class="p">))</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">m</span><span class="p">,</span><span class="s1">&#39;</span><span class="si">{F1}</span><span class="s1">=12*</span><span class="si">{CoordinateY}</span><span class="s1">*</span><span class="si">{CoordinateY}</span><span class="s1">+4&#39;</span><span class="p">)</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">addVars</span><span class="p">(</span><span class="n">m</span><span class="p">,</span><span class="s1">&#39;F2&#39;</span><span class="p">);</span> <span class="n">m</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">addVars</span><span class="p">(</span><span class="n">m</span><span class="p">,</span><span class="s1">&#39;F3&#39;</span><span class="p">)</span>

<span class="n">varname</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;F1&#39;</span><span class="p">,</span><span class="s1">&#39;F2&#39;</span><span class="p">,</span><span class="s1">&#39;F3&#39;</span><span class="p">]</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">computeCurl</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">varname</span><span class="p">)</span>
<span class="n">C</span><span class="o">.</span><span class="n">convertPyTree2File</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="s1">&#39;out.cgns&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<hr class="docutils" />
<dl class="py function">
<dt class="sig sig-object py" id="Post.computeNormCurl">
<span class="sig-prename descclassname"><span class="pre">Post.</span></span><span class="sig-name descname"><span class="pre">computeNormCurl</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">'vectx'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">'vecty'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">'vectz'</span></span></em><span class="optional">]</span><span class="sig-paren">)</span></dt>
<dd><p>Compute the norm of the curl of a 3D vector defined by its variable names
[&#8216;vectx&#8217;,&#8217;vecty&#8217;,&#8217;vectz&#8217;] in a.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>a</strong> (<em>[</em><em>array</em><em>, </em><em>list</em><em> of </em><em>arrays</em><em>] or </em><em>[</em><em>pyTree</em><em>, </em><em>base</em><em>, </em><em>zone</em><em>, </em><em>list</em><em> of </em><em>zones</em><em>]</em>) &#8211; Input data</p></li>
<li><p><strong>vect*</strong> (<em>string</em>) &#8211; variable name defining the 3D vector</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>identical to input</p>
</dd>
</dl>
<p><em>Example of use:</em></p>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/computeNormCurl.py">Norm of the curl of momentum field (array)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - computeNormCurl (array) -</span>
<span class="kn">import</span> <span class="nn">Converter</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Post</span> <span class="k">as</span> <span class="nn">P</span>
<span class="kn">import</span> <span class="nn">Generator</span> <span class="k">as</span> <span class="nn">G</span>

<span class="k">def</span> <span class="nf">F</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">):</span>
    <span class="k">return</span> <span class="mi">12</span><span class="o">*</span><span class="n">y</span><span class="o">*</span><span class="n">y</span> <span class="o">+</span> <span class="mi">4</span>

<span class="n">ni</span> <span class="o">=</span> <span class="mi">30</span><span class="p">;</span> <span class="n">nj</span> <span class="o">=</span> <span class="mi">40</span><span class="p">;</span> <span class="n">nk</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cart</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mf">10.</span><span class="o">/</span><span class="p">(</span><span class="n">ni</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mf">10.</span><span class="o">/</span><span class="p">(</span><span class="n">nj</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="n">ni</span><span class="p">,</span><span class="n">nj</span><span class="p">,</span><span class="n">nk</span><span class="p">))</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">m</span><span class="p">,</span><span class="s1">&#39;F1&#39;</span><span class="p">,</span><span class="n">F</span><span class="p">,[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span><span class="s1">&#39;y&#39;</span><span class="p">,</span><span class="s1">&#39;z&#39;</span><span class="p">])</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">m</span><span class="p">,</span><span class="s1">&#39;F2&#39;</span><span class="p">,</span><span class="mf">0.</span><span class="p">);</span> <span class="n">m</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">m</span><span class="p">,</span><span class="s1">&#39;F3&#39;</span><span class="p">,</span><span class="mf">0.</span><span class="p">)</span>

<span class="n">varname</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;F1&#39;</span><span class="p">,</span><span class="s1">&#39;F2&#39;</span><span class="p">,</span><span class="s1">&#39;F3&#39;</span><span class="p">]</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">computeNormCurl</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">varname</span><span class="p">)</span> <span class="c1"># defined on centers</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">center2Node</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="c1"># back on init grid</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">addVars</span><span class="p">([</span><span class="n">m</span><span class="p">,</span><span class="n">p</span><span class="p">])</span>
<span class="n">C</span><span class="o">.</span><span class="n">convertArrays2File</span><span class="p">([</span><span class="n">p</span><span class="p">],</span> <span class="s2">&quot;out.plt&quot;</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/computeNormCurlPT.py">Norm of the curl of momentum field (pyTree)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - computeNormCurl (pyTree) -</span>
<span class="kn">import</span> <span class="nn">Converter.PyTree</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Post.PyTree</span> <span class="k">as</span> <span class="nn">P</span>
<span class="kn">import</span> <span class="nn">Generator.PyTree</span> <span class="k">as</span> <span class="nn">G</span>

<span class="k">def</span> <span class="nf">F</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">):</span> <span class="k">return</span> <span class="mi">12</span><span class="o">*</span><span class="n">y</span><span class="o">*</span><span class="n">y</span> <span class="o">+</span> <span class="mi">4</span>

<span class="n">ni</span> <span class="o">=</span> <span class="mi">30</span><span class="p">;</span> <span class="n">nj</span> <span class="o">=</span> <span class="mi">40</span><span class="p">;</span> <span class="n">nk</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cart</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mf">10.</span><span class="o">/</span><span class="p">(</span><span class="n">ni</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mf">10.</span><span class="o">/</span><span class="p">(</span><span class="n">nj</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="n">ni</span><span class="p">,</span><span class="n">nj</span><span class="p">,</span><span class="n">nk</span><span class="p">))</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">m</span><span class="p">,</span><span class="s1">&#39;F1&#39;</span><span class="p">,</span><span class="n">F</span><span class="p">,[</span><span class="s1">&#39;CoordinateX&#39;</span><span class="p">,</span><span class="s1">&#39;CoordinateY&#39;</span><span class="p">,</span><span class="s1">&#39;CoordinateZ&#39;</span><span class="p">])</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">addVars</span><span class="p">(</span><span class="n">m</span><span class="p">,</span><span class="s1">&#39;F2&#39;</span><span class="p">);</span> <span class="n">m</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">addVars</span><span class="p">(</span><span class="n">m</span><span class="p">,</span><span class="s1">&#39;F3&#39;</span><span class="p">)</span>

<span class="n">varname</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;F1&#39;</span><span class="p">,</span><span class="s1">&#39;F2&#39;</span><span class="p">,</span><span class="s1">&#39;F3&#39;</span><span class="p">]</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">computeNormCurl</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">varname</span><span class="p">)</span>
<span class="n">C</span><span class="o">.</span><span class="n">convertPyTree2File</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="s1">&#39;out.cgns&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<hr class="docutils" />
<dl class="py function">
<dt class="sig sig-object py" id="Post.computeDiff">
<span class="sig-prename descclassname"><span class="pre">Post.</span></span><span class="sig-name descname"><span class="pre">computeDiff</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">varname</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Compute the difference between neighbouring cells of a scalar field defined by its variable varname in a.
The maximum of the absolute difference among all directions is kept.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>a</strong> (<em>[</em><em>array</em><em>, </em><em>list</em><em> of </em><em>arrays</em><em>] or </em><em>[</em><em>pyTree</em><em>, </em><em>base</em><em>, </em><em>zone</em><em>, </em><em>list</em><em> of </em><em>zones</em><em>]</em>) &#8211; Input data</p></li>
<li><p><strong>varname</strong> (<em>string</em>) &#8211; variable name (can be preceded by &#8216;nodes:&#8217; or &#8216;centers:&#8217;)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>identical to input</p>
</dd>
</dl>
<p><em>Example of use:</em></p>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/computeDiff.py">Difference of density field (array)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - computeDiff (array) -</span>
<span class="kn">import</span> <span class="nn">Converter</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Post</span> <span class="k">as</span> <span class="nn">P</span>
<span class="kn">import</span> <span class="nn">Generator</span> <span class="k">as</span> <span class="nn">G</span>

<span class="k">def</span> <span class="nf">F</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">if</span> <span class="p">(</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mf">5.</span> <span class="p">):</span> <span class="k">return</span> <span class="kc">True</span>
    <span class="k">else</span> <span class="p">:</span> <span class="k">return</span> <span class="kc">False</span>

<span class="n">ni</span> <span class="o">=</span> <span class="mi">30</span><span class="p">;</span> <span class="n">nj</span> <span class="o">=</span> <span class="mi">40</span><span class="p">;</span> <span class="n">nk</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cart</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mf">10.</span><span class="o">/</span><span class="p">(</span><span class="n">ni</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mf">10.</span><span class="o">/</span><span class="p">(</span><span class="n">nj</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mf">1.</span><span class="p">),</span> <span class="p">(</span><span class="n">ni</span><span class="p">,</span><span class="n">nj</span><span class="p">,</span><span class="n">nk</span><span class="p">))</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="s1">&#39;ro&#39;</span><span class="p">,</span> <span class="n">F</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">])</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">computeDiff</span><span class="p">(</span><span class="n">m</span><span class="p">,</span><span class="s1">&#39;ro&#39;</span><span class="p">)</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">addVars</span><span class="p">([</span><span class="n">m</span><span class="p">,</span> <span class="n">p</span><span class="p">])</span>
<span class="n">C</span><span class="o">.</span><span class="n">convertArrays2File</span><span class="p">([</span><span class="n">p</span><span class="p">],</span> <span class="s1">&#39;out.plt&#39;</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/computeDiffPT.py">Difference of density field  (pyTree)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - computeDiff (pyTree) -</span>
<span class="kn">import</span> <span class="nn">Converter.PyTree</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Post.PyTree</span> <span class="k">as</span> <span class="nn">P</span>
<span class="kn">import</span> <span class="nn">Generator.PyTree</span> <span class="k">as</span> <span class="nn">G</span>

<span class="n">ni</span> <span class="o">=</span> <span class="mi">30</span><span class="p">;</span> <span class="n">nj</span> <span class="o">=</span> <span class="mi">40</span><span class="p">;</span> <span class="n">nk</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cart</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mf">10.</span><span class="o">/</span><span class="p">(</span><span class="n">ni</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mf">10.</span><span class="o">/</span><span class="p">(</span><span class="n">nj</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="n">ni</span><span class="p">,</span><span class="n">nj</span><span class="p">,</span><span class="n">nk</span><span class="p">))</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">{Density}</span><span class="s1">=(</span><span class="si">{CoordinateX}</span><span class="s1">&gt;5)*1.&#39;</span><span class="p">)</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">computeDiff</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="s1">&#39;Density&#39;</span><span class="p">)</span>
<span class="n">C</span><span class="o">.</span><span class="n">convertPyTree2File</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="s1">&#39;out.cgns&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
<hr class="docutils" />
<section id="solution-selection">
<h3>Solution selection</h3>
<dl class="py function">
<dt class="sig sig-object py" id="Post.selectCells">
<span class="sig-prename descclassname"><span class="pre">Post.</span></span><span class="sig-name descname"><span class="pre">selectCells</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">F</span></span></em>, <span class="optional">[</span><em class="sig-param"><span class="n"><span class="pre">'var1'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">'var2'</span></span></em>, <span class="optional">]</span><em class="sig-param"><span class="n"><span class="pre">strict=0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cleanConnectivity=True</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Select cells with respect to a given criterion.
If strict=0, the cell is selected if at least one of the cell vertices satisfies the criterion.
If strict=1, the cell is selected if all the cell vertices satisfy the criterion.
The criterion can be defined as a python function returning True (=selected) or False (=not selected):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">P</span><span class="o">.</span><span class="n">selectCells</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">F</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;var1&#39;</span><span class="p">,</span> <span class="s1">&#39;var2&#39;</span><span class="p">],</span> <span class="n">strict</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<p>or by a formula:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">P</span><span class="o">.</span><span class="n">selectCells</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">{x}</span><span class="s1">+</span><span class="si">{y}</span><span class="s1">&gt;2&#39;</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>a</strong> (<em>[</em><em>array</em><em>, </em><em>list</em><em> of </em><em>arrays</em><em>] or </em><em>[</em><em>pyTree</em><em>, </em><em>base</em><em>, </em><em>zone</em><em>, </em><em>list</em><em> of </em><em>zones</em><em>]</em>) &#8211; input data</p></li>
<li><p><strong>F</strong> (<em>function</em>) &#8211; cells selection criterion</p></li>
<li><p><strong>var*</strong> (<em>string</em>) &#8211; arguments of function F</p></li>
<li><p><strong>strict</strong> (<em>integer</em>) &#8211; selection mode (0 or 1)</p></li>
<li><p><strong>cleanConnectivity</strong> (<em>True</em><em> or </em><em>False</em>) &#8211; if True, connectivity is cleaned</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>identical to input</p>
</dd>
</dl>
<p><em>Example of use:</em></p>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/selectCells.py">Cell selection in a mesh (array)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - selectCells (array) -</span>
<span class="kn">import</span> <span class="nn">Converter</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Generator</span> <span class="k">as</span> <span class="nn">G</span>
<span class="kn">import</span> <span class="nn">Post</span> <span class="k">as</span> <span class="nn">P</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cart</span><span class="p">(</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">11</span><span class="p">,</span><span class="mi">11</span><span class="p">,</span><span class="mi">11</span><span class="p">)</span> <span class="p">)</span>
<span class="k">def</span> <span class="nf">F</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">):</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="mi">2</span><span class="o">*</span><span class="n">y</span> <span class="o">+</span> <span class="n">z</span> <span class="o">&gt;</span> <span class="mf">20.</span><span class="p">):</span> <span class="k">return</span> <span class="kc">True</span>
    <span class="k">else</span><span class="p">:</span> <span class="k">return</span> <span class="kc">False</span>

<span class="n">b</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">selectCells</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">F</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;z&#39;</span><span class="p">])</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">selectCells</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">F</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;z&#39;</span><span class="p">],</span> <span class="n">strict</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">selectCells</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">{x}</span><span class="s1">+2*</span><span class="si">{y}</span><span class="s1">+</span><span class="si">{z}</span><span class="s1">&gt;20&#39;</span><span class="p">)</span>
<span class="n">e</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">selectCells</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;(</span><span class="si">{x}</span><span class="s1">&gt;2) &amp; (</span><span class="si">{y}</span><span class="s1">&gt;2)&#39;</span><span class="p">)</span>
<span class="n">C</span><span class="o">.</span><span class="n">convertArrays2File</span><span class="p">([</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">d</span><span class="p">,</span><span class="n">e</span><span class="p">],</span> <span class="s1">&#39;out.plt&#39;</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/selectCellsPT.py">Cell selection in a mesh  (pyTree)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - selectCells (pyTree) -</span>
<span class="kn">import</span> <span class="nn">Converter.PyTree</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Generator.PyTree</span> <span class="k">as</span> <span class="nn">G</span>
<span class="kn">import</span> <span class="nn">Post.PyTree</span> <span class="k">as</span> <span class="nn">P</span>

<span class="k">def</span> <span class="nf">F</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">):</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="mi">2</span><span class="o">*</span><span class="n">y</span> <span class="o">+</span> <span class="n">z</span> <span class="o">&gt;</span> <span class="mf">20.</span><span class="p">):</span> <span class="k">return</span> <span class="kc">True</span>
    <span class="k">else</span><span class="p">:</span> <span class="k">return</span> <span class="kc">False</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cart</span><span class="p">(</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">11</span><span class="p">,</span><span class="mi">11</span><span class="p">,</span><span class="mi">11</span><span class="p">)</span> <span class="p">)</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">selectCells</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">F</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;CoordinateX&#39;</span><span class="p">,</span> <span class="s1">&#39;CoordinateY&#39;</span><span class="p">,</span> <span class="s1">&#39;CoordinateZ&#39;</span><span class="p">])</span>
<span class="n">C</span><span class="o">.</span><span class="n">convertPyTree2File</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;out.cgns&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<hr class="docutils" />
<dl class="py function">
<dt class="sig sig-object py" id="Post.selectCells2">
<span class="sig-prename descclassname"><span class="pre">Post.</span></span><span class="sig-name descname"><span class="pre">selectCells2</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tag</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Select cells according to a field defined by a variable &#8216;tag&#8217; (=1 if selected, =0 if not selected).
If &#8216;tag&#8217; is located at centers, only cells of tag=1 are selected.
If &#8216;tag&#8217; is located at nodes and &#8216;strict&#8217;=0, the cell is selected if at least one of the cell vertices is tag=1.
If &#8216;tag&#8217; is located at nodes and &#8216;strict&#8217;=1, the cell is selected if all the cell vertices is tag=1.
In the array version, the tag is an array. In the pyTree version, the tag must be defined in a &#8216;FlowSolution_t&#8217; type node
located at cell centers or nodes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>a</strong> (<em>[</em><em>array</em><em>, </em><em>list</em><em> of </em><em>arrays</em><em>] or </em><em>[</em><em>pyTree</em><em>, </em><em>base</em><em>, </em><em>zone</em><em>, </em><em>list</em><em> of </em><em>zones</em><em>]</em>) &#8211; input data</p></li>
<li><p><strong>tag</strong> (<em>string</em>) &#8211; variable name</p></li>
<li><p><strong>strict</strong> (<em>integer</em>) &#8211; selection mode (0 or 1)</p></li>
<li><p><strong>cleanConnectivity</strong> (<em>True</em><em> or </em><em>False</em>) &#8211; if True, connectivity is cleaned</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>identical to input</p>
</dd>
</dl>
<p><em>Example of use:</em></p>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/selectCells2.py">Cell selection in a mesh with selectCells2 (array)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - selectCells2 (array) -</span>
<span class="kn">import</span> <span class="nn">Converter</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Generator</span> <span class="k">as</span> <span class="nn">G</span>
<span class="kn">import</span> <span class="nn">Post</span> <span class="k">as</span> <span class="nn">P</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cart</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">11</span><span class="p">,</span><span class="mi">11</span><span class="p">,</span><span class="mi">11</span><span class="p">))</span>
<span class="n">tag</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="s1">&#39;tag&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span> <span class="n">tag</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">tag</span><span class="p">,</span> <span class="s1">&#39;tag&#39;</span><span class="p">,</span> <span class="mf">1.</span><span class="p">)</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">selectCells2</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">tag</span><span class="p">)</span>
<span class="n">C</span><span class="o">.</span><span class="n">convertArrays2File</span><span class="p">([</span><span class="n">b</span><span class="p">],</span> <span class="s1">&#39;out.plt&#39;</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/selectCells2PT.py">Cell selection in a mesh with selectCells 2 (pyTree)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - selectCells2 (pyTree) -</span>
<span class="kn">import</span> <span class="nn">Converter.PyTree</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Generator.PyTree</span> <span class="k">as</span> <span class="nn">G</span>
<span class="kn">import</span> <span class="nn">Post.PyTree</span> <span class="k">as</span> <span class="nn">P</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cart</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">11</span><span class="p">,</span><span class="mi">11</span><span class="p">,</span><span class="mi">11</span><span class="p">))</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;tag&#39;</span><span class="p">,</span> <span class="mf">1.</span><span class="p">)</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">selectCells2</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;tag&#39;</span><span class="p">)</span>
<span class="n">C</span><span class="o">.</span><span class="n">convertPyTree2File</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="s1">&#39;out.cgns&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<hr class="docutils" />
<dl class="py function">
<dt class="sig sig-object py" id="Post.interiorFaces">
<span class="sig-prename descclassname"><span class="pre">Post.</span></span><span class="sig-name descname"><span class="pre">interiorFaces</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Select the interior faces of a mesh. Interior faces are faces with
two neighbouring elements. If &#8216;strict&#8217; is set to 1, select the interior faces
that have only interior nodes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>a</strong> (<em>[</em><em>array</em><em>, </em><em>list</em><em> of </em><em>arrays</em><em>] or </em><em>[</em><em>pyTree</em><em>, </em><em>base</em><em>, </em><em>zone</em><em>, </em><em>list</em><em> of </em><em>zones</em><em>]</em>) &#8211; input data</p></li>
<li><p><strong>strict</strong> (<em>integer</em>) &#8211; selection mode (0 or 1)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>identical to input</p>
</dd>
</dl>
<p><em>Example of use:</em></p>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/interiorFaces.py">Select interior faces (array)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - interiorFaces (array) -</span>
<span class="kn">import</span> <span class="nn">Converter</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Post</span> <span class="k">as</span> <span class="nn">P</span>
<span class="kn">import</span> <span class="nn">Generator</span> <span class="k">as</span> <span class="nn">G</span>

<span class="c1"># Get interior faces in broad sense:</span>
<span class="c1"># faces with 2 neighbours</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cartTetra</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mf">1.</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">interiorFaces</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="n">C</span><span class="o">.</span><span class="n">convertArrays2File</span><span class="p">([</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">],</span> <span class="s1">&#39;out1.plt&#39;</span><span class="p">)</span>

<span class="c1"># Get interior faces in strict sense:</span>
<span class="c1"># faces having only interior nodes</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cartTetra</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mf">1.</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">interiorFaces</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="n">C</span><span class="o">.</span><span class="n">convertArrays2File</span><span class="p">([</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">],</span> <span class="s1">&#39;out2.plt&#39;</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/interiorFacesPT.py">Select interior faces (pyTree)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - interiorFaces (pyTree) -</span>
<span class="kn">import</span> <span class="nn">Converter.PyTree</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Post.PyTree</span> <span class="k">as</span> <span class="nn">P</span>
<span class="kn">import</span> <span class="nn">Generator.PyTree</span> <span class="k">as</span> <span class="nn">G</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cartTetra</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mf">1.</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">interiorFaces</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">newPyTree</span><span class="p">([</span><span class="s1">&#39;Base&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="n">b</span><span class="p">])</span>
<span class="n">C</span><span class="o">.</span><span class="n">convertPyTree2File</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="s1">&#39;out.cgns&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<hr class="docutils" />
<dl class="py function">
<dt class="sig sig-object py" id="Post.exteriorFaces">
<span class="sig-prename descclassname"><span class="pre">Post.</span></span><span class="sig-name descname"><span class="pre">exteriorFaces</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indices</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Select the exterior faces of a mesh, and return them in a single unstructured zone. If indices=[], the
indices of the original exterior faces are returned.
For structured grids, indices are the global index containing i faces, then j faces, then k faces, starting from 0.
For NGON grids, indices are the NGON face indices, starting from 1.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>a</strong> (<em>[</em><em>array</em><em>, </em><em>list</em><em> of </em><em>arrays</em><em>] or </em><em>[</em><em>pyTree</em><em>, </em><em>base</em><em>, </em><em>zone</em><em>, </em><em>list</em><em> of </em><em>zones</em><em>]</em>) &#8211; input data</p></li>
<li><p><strong>indices</strong> (<em>list</em><em> of </em><em>integers</em>) &#8211; indices of original exterior faces</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>zone</p>
</dd>
</dl>
<p><em>Example of use:</em></p>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/exteriorFaces.py">Select exterior faces (array)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - exteriorFaces (array) -</span>
<span class="kn">import</span> <span class="nn">Converter</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Post</span> <span class="k">as</span> <span class="nn">P</span>
<span class="kn">import</span> <span class="nn">Generator</span> <span class="k">as</span> <span class="nn">G</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cartTetra</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">20</span><span class="p">))</span>
<span class="n">indices</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">exteriorFaces</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">indices</span><span class="o">=</span><span class="n">indices</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">indices</span><span class="p">)</span>
<span class="n">C</span><span class="o">.</span><span class="n">convertArrays2File</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="s1">&#39;out.plt&#39;</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/exteriorFacesPT.py">Select exterior faces (pyTree)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - exteriorFaces (pyTree)-</span>
<span class="kn">import</span> <span class="nn">Converter.PyTree</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Post.PyTree</span> <span class="k">as</span> <span class="nn">P</span>
<span class="kn">import</span> <span class="nn">Generator.PyTree</span> <span class="k">as</span> <span class="nn">G</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cartTetra</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">exteriorFaces</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="n">C</span><span class="o">.</span><span class="n">convertPyTree2File</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="s1">&#39;out.cgns&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<hr class="docutils" />
<dl class="py function">
<dt class="sig sig-object py" id="Post.exteriorFacesStructured">
<span class="sig-prename descclassname"><span class="pre">Post.</span></span><span class="sig-name descname"><span class="pre">exteriorFacesStructured</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Select the exterior faces of a structured mesh as a list of structured meshes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>a</strong> (<em>[</em><em>array</em><em>, </em><em>list</em><em> of </em><em>arrays</em><em>] or </em><em>[</em><em>pyTree</em><em>, </em><em>base</em><em>, </em><em>zone</em><em>, </em><em>list</em><em> of </em><em>zones</em><em>]</em>) &#8211; input data</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>zone</p>
</dd>
</dl>
<p><em>Example of use:</em></p>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/exteriorFacesStructured.py">Select structured exterior faces (array)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - exteriorFacesStructured (array) -</span>
<span class="kn">import</span> <span class="nn">Converter</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Post</span> <span class="k">as</span> <span class="nn">P</span>
<span class="kn">import</span> <span class="nn">Generator</span> <span class="k">as</span> <span class="nn">G</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cart</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="n">A</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">exteriorFacesStructured</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="n">C</span><span class="o">.</span><span class="n">convertArrays2File</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="s1">&#39;out.plt&#39;</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/exteriorFacesStructuredPT.py">Select structured exterior faces (pyTree)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - exteriorFacesStructured (pyTree)-</span>
<span class="kn">import</span> <span class="nn">Converter.PyTree</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Post.PyTree</span> <span class="k">as</span> <span class="nn">P</span>
<span class="kn">import</span> <span class="nn">Generator.PyTree</span> <span class="k">as</span> <span class="nn">G</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cart</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="n">zones</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">exteriorFacesStructured</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="n">C</span><span class="o">.</span><span class="n">convertPyTree2File</span><span class="p">(</span><span class="n">zones</span><span class="p">,</span> <span class="s1">&#39;out.cgns&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<hr class="docutils" />
<dl class="py function">
<dt class="sig sig-object py" id="Post.exteriorElts">
<span class="sig-prename descclassname"><span class="pre">Post.</span></span><span class="sig-name descname"><span class="pre">exteriorElts</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Select the exterior elements of a mesh, that is the first border fringe of cells.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>a</strong> (<em>[</em><em>array</em><em>, </em><em>list</em><em> of </em><em>arrays</em><em>] or </em><em>[</em><em>pyTree</em><em>, </em><em>base</em><em>, </em><em>zone</em><em>, </em><em>list</em><em> of </em><em>zones</em><em>]</em>) &#8211; input data</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>identical to input</p>
</dd>
</dl>
<p><em>Example of use:</em></p>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/exteriorElts.py">Select exterior elements (array)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - exteriorElts (array) -</span>
<span class="kn">import</span> <span class="nn">Converter</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Post</span> <span class="k">as</span> <span class="nn">P</span>
<span class="kn">import</span> <span class="nn">Generator</span> <span class="k">as</span> <span class="nn">G</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cartTetra</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">exteriorElts</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="n">C</span><span class="o">.</span><span class="n">convertArrays2File</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="s1">&#39;out.plt&#39;</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/exteriorEltsPT.py">Select exterior elements (pyTree)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - exteriorElts (pyTree) -</span>
<span class="kn">import</span> <span class="nn">Converter.PyTree</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Post.PyTree</span> <span class="k">as</span> <span class="nn">P</span>
<span class="kn">import</span> <span class="nn">Generator.PyTree</span> <span class="k">as</span> <span class="nn">G</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cartTetra</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">exteriorElts</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="n">C</span><span class="o">.</span><span class="n">convertPyTree2File</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="s1">&#39;out.cgns&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<hr class="docutils" />
<dl class="py function">
<dt class="sig sig-object py" id="Post.frontFaces">
<span class="sig-prename descclassname"><span class="pre">Post.</span></span><span class="sig-name descname"><span class="pre">frontFaces</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tag</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Select faces that are located at the boundary where a tag indicator change from 0 to 1.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>a</strong> (<em>[</em><em>array</em><em>, </em><em>list</em><em> of </em><em>arrays</em><em>] or </em><em>[</em><em>pyTree</em><em>, </em><em>base</em><em>, </em><em>zone</em><em>, </em><em>list</em><em> of </em><em>zones</em><em>]</em>) &#8211; input data</p></li>
<li><p><strong>tag</strong> (<em>string</em>) &#8211; variable name</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>zone</p>
</dd>
</dl>
<p><em>Example of use:</em></p>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/frontFaces.py">Select a front in a tag (array)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - frontFaces (array) -</span>
<span class="kn">import</span> <span class="nn">Converter</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Generator</span> <span class="k">as</span> <span class="nn">G</span>
<span class="kn">import</span> <span class="nn">Post</span> <span class="k">as</span> <span class="nn">P</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cart</span><span class="p">(</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">11</span><span class="p">,</span><span class="mi">11</span><span class="p">,</span><span class="mi">11</span><span class="p">)</span> <span class="p">)</span>
<span class="k">def</span> <span class="nf">F</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">):</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="mi">2</span><span class="o">*</span><span class="n">y</span> <span class="o">+</span> <span class="n">z</span>   <span class="o">&gt;</span> <span class="mf">20.</span><span class="p">):</span> <span class="k">return</span> <span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span> <span class="k">return</span> <span class="mi">0</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;tag&#39;</span><span class="p">,</span> <span class="n">F</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;z&#39;</span><span class="p">])</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">extractVars</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;tag&#39;</span><span class="p">])</span>
<span class="n">f</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">frontFaces</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>
<span class="n">C</span><span class="o">.</span><span class="n">convertArrays2File</span><span class="p">([</span><span class="n">a</span><span class="p">,</span><span class="n">f</span><span class="p">],</span> <span class="s1">&#39;out.plt&#39;</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/frontFacesPT.py">Select a front in a tag (pyTree)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - frontFaces (pyTree) -</span>
<span class="kn">import</span> <span class="nn">Converter.PyTree</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Generator.PyTree</span> <span class="k">as</span> <span class="nn">G</span>
<span class="kn">import</span> <span class="nn">Post.PyTree</span> <span class="k">as</span> <span class="nn">P</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cart</span><span class="p">(</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">11</span><span class="p">,</span><span class="mi">11</span><span class="p">,</span><span class="mi">11</span><span class="p">)</span> <span class="p">)</span>
<span class="k">def</span> <span class="nf">F</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">):</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="mi">2</span><span class="o">*</span><span class="n">y</span> <span class="o">+</span> <span class="n">z</span> <span class="o">&gt;</span> <span class="mf">20.</span><span class="p">):</span> <span class="k">return</span> <span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span> <span class="k">return</span> <span class="mi">0</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;tag&#39;</span><span class="p">,</span> <span class="n">F</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;CoordinateX&#39;</span><span class="p">,</span> <span class="s1">&#39;CoordinateY&#39;</span><span class="p">,</span> <span class="s1">&#39;CoordinateZ&#39;</span><span class="p">])</span>
<span class="n">f</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">frontFaces</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;tag&#39;</span><span class="p">);</span> <span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;front&#39;</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">newPyTree</span><span class="p">([</span><span class="s1">&#39;Base&#39;</span><span class="p">]);</span> <span class="n">t</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">+=</span> <span class="p">[</span><span class="n">a</span><span class="p">,</span> <span class="n">f</span><span class="p">]</span>
<span class="n">C</span><span class="o">.</span><span class="n">convertPyTree2File</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="s1">&#39;out.cgns&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<hr class="docutils" />
<dl class="py function">
<dt class="sig sig-object py" id="Post.sharpEdges">
<span class="sig-prename descclassname"><span class="pre">Post.</span></span><span class="sig-name descname"><span class="pre">sharpEdges</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alphaRef</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">30.</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Return sharp edges arrays starting from surfaces or contours.
Adjacent cells having an angle deviating from more than alphaRef to 180 degrees are considered as sharp.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>A</strong> (<em>[</em><em>array</em><em>, </em><em>list</em><em> of </em><em>arrays</em><em>] or </em><em>[</em><em>pyTree</em><em>, </em><em>base</em><em>, </em><em>zone</em><em>, </em><em>list</em><em> of </em><em>zones</em><em>]</em>) &#8211; input data</p></li>
<li><p><strong>alphaRef</strong> (<em>float</em>) &#8211; split angle</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>list of arrays / zones <strong>??</strong></p>
</dd>
</dl>
<p><em>Example of use:</em></p>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/sharpEdges.py">Detect sharp edges of a surface (array)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - sharpEdges ( array) -</span>
<span class="kn">import</span> <span class="nn">Converter</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Generator</span> <span class="k">as</span> <span class="nn">G</span>
<span class="kn">import</span> <span class="nn">Post</span> <span class="k">as</span> <span class="nn">P</span>
<span class="kn">import</span> <span class="nn">Transform</span> <span class="k">as</span> <span class="nn">T</span>
<span class="n">a1</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cart</span><span class="p">((</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">),(</span><span class="mf">1.5</span><span class="p">,</span><span class="mf">1.</span><span class="p">,</span><span class="mf">1.</span><span class="p">),(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
<span class="n">a2</span> <span class="o">=</span> <span class="n">T</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="n">a1</span><span class="p">,(</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">),(</span><span class="mf">0.</span><span class="p">,</span><span class="mf">1.</span><span class="p">,</span><span class="mf">0.</span><span class="p">),</span><span class="mf">100.</span><span class="p">)</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">sharpEdges</span><span class="p">([</span><span class="n">a1</span><span class="p">,</span><span class="n">a2</span><span class="p">],</span><span class="n">alphaRef</span><span class="o">=</span><span class="mf">45.</span><span class="p">)</span>
<span class="n">C</span><span class="o">.</span><span class="n">convertArrays2File</span><span class="p">([</span><span class="n">a1</span><span class="p">,</span><span class="n">a2</span><span class="p">]</span><span class="o">+</span><span class="n">res</span><span class="p">,</span><span class="s2">&quot;out.plt&quot;</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/sharpEdgesPT.py">Detect sharp edges of a surface (pyTree)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - sharpEdges (pyTree) -</span>
<span class="kn">import</span> <span class="nn">Converter.PyTree</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Generator.PyTree</span> <span class="k">as</span> <span class="nn">G</span>
<span class="kn">import</span> <span class="nn">Post.PyTree</span> <span class="k">as</span> <span class="nn">P</span>
<span class="kn">import</span> <span class="nn">Transform.PyTree</span> <span class="k">as</span> <span class="nn">T</span>
<span class="n">a1</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cart</span><span class="p">((</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">),(</span><span class="mf">1.5</span><span class="p">,</span><span class="mf">1.</span><span class="p">,</span><span class="mf">1.</span><span class="p">),(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
<span class="n">a2</span> <span class="o">=</span> <span class="n">T</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="n">a1</span><span class="p">,(</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">),(</span><span class="mf">0.</span><span class="p">,</span><span class="mf">1.</span><span class="p">,</span><span class="mf">0.</span><span class="p">),</span><span class="mf">100.</span><span class="p">);</span><span class="n">a2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;cart2&#39;</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">sharpEdges</span><span class="p">([</span><span class="n">a1</span><span class="p">,</span><span class="n">a2</span><span class="p">],</span><span class="n">alphaRef</span><span class="o">=</span><span class="mf">45.</span><span class="p">)</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">newPyTree</span><span class="p">([</span><span class="s1">&#39;Edge&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="s1">&#39;Base&#39;</span><span class="p">,</span><span class="mi">2</span><span class="p">]);</span> <span class="n">t</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">+=</span> <span class="n">res</span><span class="p">;</span> <span class="n">t</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">2</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span><span class="o">+=</span><span class="p">[</span><span class="n">a1</span><span class="p">,</span><span class="n">a2</span><span class="p">]</span>
<span class="n">C</span><span class="o">.</span><span class="n">convertPyTree2File</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="s2">&quot;out.cgns&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<hr class="docutils" />
<dl class="py function">
<dt class="sig sig-object py" id="Post.silhouette">
<span class="sig-prename descclassname"><span class="pre">Post.</span></span><span class="sig-name descname"><span class="pre">silhouette</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vector</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[1.,</span> <span class="pre">0.,</span> <span class="pre">0.]</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Return silhouette arrays starting from surfaces or contours, according to a direction vector.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>a</strong> (<em>[</em><em>array</em><em>, </em><em>list</em><em> of </em><em>arrays</em><em>] or </em><em>[</em><em>pyTree</em><em>, </em><em>base</em><em>, </em><em>zone</em><em>, </em><em>list</em><em> of </em><em>zones</em><em>]</em>) &#8211; input data</p></li>
<li><p><strong>vector</strong> (<em>3-tuple</em><em> of </em><em>floats</em>) &#8211; direction vector</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>identical to input</p>
</dd>
</dl>
<p><em>Example of use:</em></p>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/silhouette.py">Detect silhouette of a surface (array)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - silhouette ( array) -</span>
<span class="kn">import</span> <span class="nn">Generator</span> <span class="k">as</span> <span class="nn">G</span>
<span class="kn">import</span> <span class="nn">Converter</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Post</span> <span class="k">as</span> <span class="nn">P</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cylinder</span><span class="p">((</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">),</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="mf">360.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">10.</span><span class="p">,</span> <span class="p">(</span><span class="mi">50</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">30</span><span class="p">))</span>

<span class="n">vector</span><span class="o">=</span><span class="p">[</span><span class="mf">1.</span><span class="p">,</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">]</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">silhouette</span><span class="p">([</span><span class="n">a</span><span class="p">],</span> <span class="n">vector</span><span class="p">)</span>

<span class="n">l</span> <span class="o">=</span> <span class="p">[</span><span class="n">a</span><span class="p">]</span><span class="o">+</span><span class="n">res</span>
<span class="n">C</span><span class="o">.</span><span class="n">convertArrays2File</span><span class="p">(</span><span class="n">l</span><span class="p">,</span> <span class="s1">&#39;out.plt&#39;</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/silhouettePT.py">Detect silhouette of a surface (pyTree)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - silhouette (pyTree) -</span>
<span class="kn">import</span> <span class="nn">Generator.PyTree</span> <span class="k">as</span> <span class="nn">G</span>
<span class="kn">import</span> <span class="nn">Converter.PyTree</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Post.PyTree</span> <span class="k">as</span> <span class="nn">P</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cylinder</span><span class="p">((</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">),</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="mf">360.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">10.</span><span class="p">,</span> <span class="p">(</span><span class="mi">50</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">30</span><span class="p">))</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">newPyTree</span><span class="p">([</span><span class="s1">&#39;Base&#39;</span><span class="p">]);</span> <span class="n">t</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>

<span class="n">vector</span><span class="o">=</span><span class="p">[</span><span class="mf">1.</span><span class="p">,</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">]</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">silhouette</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">vector</span><span class="p">)</span>
<span class="n">t</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">+=</span> <span class="n">res</span>
<span class="n">C</span><span class="o">.</span><span class="n">convertPyTree2File</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="s1">&#39;out.cgns&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<hr class="docutils" />
<dl class="py function">
<dt class="sig sig-object py" id="Post.coarsen">
<span class="sig-prename descclassname"><span class="pre">Post.</span></span><span class="sig-name descname"><span class="pre">coarsen</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indicName</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'indic'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">argqual</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.25</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.e-6</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Coarsen a triangle mesh by providing a coarsening indicator, which is 1 if the element must be coarsened, 0 elsewhere.
Triangles are merged by edge contraction, if tagged to be coarsened
by indic and if new triangles deviate less than tol to the original triangle.
Required mesh quality is controled by argqual: argqual equal to 0.5
corresponds to an equilateral triangle,
whereas a value near zero corresponds to a bad triangle shape.</p>
<p><strong>Array version</strong>: an indic i-array must be provided, whose dimension ni is equal to the number of elements in the initial triangulation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">b</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">coarsen</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">indic</span><span class="p">,</span> <span class="n">argqual</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">tol</span><span class="o">=</span><span class="mf">1.e6</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>a</strong> (<em>array</em><em>, </em><em>list</em><em> of </em><em>arrays</em>) &#8211; input data</p></li>
<li><p><strong>indic</strong> (<em>i-array</em>) &#8211; tagged element (0 or 1)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>identical to input</p>
</dd>
</dl>
<p><strong>PyTree version</strong>: indic is stored as a solution located at centers:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">b</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">coarsen</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">indicName</span><span class="o">=</span><span class="s1">&#39;indic&#39;</span><span class="p">,</span> <span class="n">argqual</span><span class="o">=</span><span class="mf">0.25</span><span class="p">,</span> <span class="n">tol</span><span class="o">=</span><span class="mf">1.e-6</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>a</strong> (<em>pyTree</em><em>, </em><em>base</em><em>, </em><em>zone</em><em>, </em><em>list</em><em> of </em><em>zones</em>) &#8211; input data</p></li>
<li><p><strong>indicName</strong> (<em>string</em>) &#8211; tag variable name</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>identical to input</p>
</dd>
</dl>
<p><em>Example of use:</em></p>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/coarsen.py">Coarsen all cells in a 2D mesh (array)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - coarsen (array) -</span>
<span class="kn">import</span> <span class="nn">Post</span> <span class="k">as</span> <span class="nn">P</span>
<span class="kn">import</span> <span class="nn">Converter</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Generator</span> <span class="k">as</span> <span class="nn">G</span>
<span class="kn">import</span> <span class="nn">Transform</span> <span class="k">as</span> <span class="nn">T</span>

<span class="c1"># coarsen all cells of a square</span>
<span class="n">ni</span> <span class="o">=</span> <span class="mi">21</span><span class="p">;</span> <span class="n">nj</span> <span class="o">=</span> <span class="mi">21</span><span class="p">;</span> <span class="n">nk</span> <span class="o">=</span> <span class="mi">11</span>
<span class="n">hi</span> <span class="o">=</span> <span class="mf">2.</span><span class="o">/</span><span class="p">(</span><span class="n">ni</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span> <span class="n">hj</span> <span class="o">=</span> <span class="mf">2.</span><span class="o">/</span><span class="p">(</span><span class="n">nj</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span> <span class="n">hk</span> <span class="o">=</span> <span class="mf">1.</span><span class="o">/</span><span class="p">(</span><span class="n">nk</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cart</span><span class="p">((</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">),(</span><span class="n">hi</span><span class="p">,</span><span class="n">hj</span><span class="p">,</span><span class="n">hk</span><span class="p">),</span> <span class="p">(</span><span class="n">ni</span><span class="p">,</span><span class="n">nj</span><span class="p">,</span><span class="n">nk</span><span class="p">))</span>

<span class="n">hi</span> <span class="o">=</span> <span class="n">hi</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span> <span class="n">hj</span> <span class="o">=</span> <span class="n">hj</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span> <span class="n">hk</span> <span class="o">=</span> <span class="n">hk</span><span class="o">/</span><span class="mi">2</span>
<span class="n">m2</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cart</span><span class="p">((</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">),(</span><span class="n">hi</span><span class="p">,</span><span class="n">hj</span><span class="p">,</span><span class="n">hk</span><span class="p">),</span> <span class="p">(</span><span class="n">ni</span><span class="p">,</span><span class="n">nj</span><span class="p">,</span><span class="n">nk</span><span class="p">))</span>
<span class="n">m2</span> <span class="o">=</span> <span class="n">T</span><span class="o">.</span><span class="n">subzone</span><span class="p">(</span><span class="n">m2</span><span class="p">,(</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">6</span><span class="p">),(</span><span class="n">m</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="n">m</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="n">m2</span> <span class="o">=</span> <span class="n">T</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="n">m2</span><span class="p">,</span> <span class="p">(</span><span class="mf">0.75</span><span class="p">,</span><span class="mf">0.75</span><span class="p">,</span><span class="mf">0.25</span><span class="p">))</span>
<span class="n">m2</span> <span class="o">=</span> <span class="n">T</span><span class="o">.</span><span class="n">perturbate</span><span class="p">(</span><span class="n">m2</span><span class="p">,</span> <span class="mf">0.51</span><span class="p">)</span>
<span class="n">tri</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">delaunay</span><span class="p">(</span><span class="n">m2</span><span class="p">)</span>

<span class="n">npts</span> <span class="o">=</span> <span class="n">tri</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="n">indic</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="s1">&#39;indic&#39;</span><span class="p">,</span> <span class="n">npts</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">indic</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">indic</span><span class="p">,</span> <span class="s1">&#39;indic&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

<span class="n">sol</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">coarsen</span><span class="p">(</span><span class="n">tri</span><span class="p">,</span> <span class="n">indic</span><span class="p">,</span> <span class="n">argqual</span><span class="o">=</span><span class="mf">0.25</span><span class="p">,</span> <span class="n">tol</span><span class="o">=</span><span class="mf">1.e6</span><span class="p">)</span>
<span class="n">C</span><span class="o">.</span><span class="n">convertArrays2File</span><span class="p">([</span><span class="n">tri</span><span class="p">,</span> <span class="n">sol</span><span class="p">],</span> <span class="s1">&#39;out.plt&#39;</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/coarsenPT.py">Coarsen all cells in a 2D mesh (pyTree)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - coarsen (pyTree)-</span>
<span class="kn">import</span> <span class="nn">Post.PyTree</span> <span class="k">as</span> <span class="nn">P</span>
<span class="kn">import</span> <span class="nn">Converter.PyTree</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Generator.PyTree</span> <span class="k">as</span> <span class="nn">G</span>
<span class="kn">import</span> <span class="nn">Transform.PyTree</span> <span class="k">as</span> <span class="nn">T</span>

<span class="n">ni</span> <span class="o">=</span> <span class="mi">21</span><span class="p">;</span> <span class="n">nj</span> <span class="o">=</span> <span class="mi">21</span><span class="p">;</span> <span class="n">nk</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">hi</span> <span class="o">=</span> <span class="mf">2.</span><span class="o">/</span><span class="p">(</span><span class="n">ni</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span> <span class="n">hj</span> <span class="o">=</span> <span class="mf">2.</span><span class="o">/</span><span class="p">(</span><span class="n">nj</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cart</span><span class="p">((</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">),(</span><span class="n">hi</span><span class="p">,</span><span class="n">hj</span><span class="p">,</span><span class="mf">1.</span><span class="p">),</span> <span class="p">(</span><span class="n">ni</span><span class="p">,</span><span class="n">nj</span><span class="p">,</span><span class="n">nk</span><span class="p">));</span> <span class="n">m</span> <span class="o">=</span> <span class="n">T</span><span class="o">.</span><span class="n">perturbate</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="mf">0.51</span><span class="p">)</span>
<span class="n">tri</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">delaunay</span><span class="p">(</span><span class="n">m</span><span class="p">);</span> <span class="n">tri</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">tri</span><span class="p">,</span> <span class="s1">&#39;centers:indic&#39;</span><span class="p">,</span> <span class="mf">1.</span><span class="p">)</span>

<span class="n">sol</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">coarsen</span><span class="p">(</span><span class="n">tri</span><span class="p">,</span> <span class="s1">&#39;indic&#39;</span><span class="p">);</span> <span class="n">sol</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;coarse&#39;</span>

<span class="n">C</span><span class="o">.</span><span class="n">convertPyTree2File</span><span class="p">([</span><span class="n">sol</span><span class="p">,</span><span class="n">tri</span><span class="p">],</span> <span class="s1">&#39;out.cgns&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<hr class="docutils" />
<dl class="py function">
<dt class="sig sig-object py" id="Post.refine">
<span class="sig-prename descclassname"><span class="pre">Post.</span></span><span class="sig-name descname"><span class="pre">refine</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Refine a triangle mesh by providing a refinement indicator, which is 1 if the element must be refined, 0 elsewhere.</p>
<p><strong>Array version</strong>: an indic i-array must be provided, whose dimension ni
is equal to the number of elements in the initial triangulation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">b</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">refine</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">indic</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>PyTree version</strong>: indic is stored as a solution located at centers:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">b</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">refine</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">indicName</span><span class="o">=</span><span class="s1">&#39;indic&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p><em>Example of use:</em></p>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/refine.py">Refine all cells in a 2D mesh (array)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - refine (array) -</span>
<span class="kn">import</span> <span class="nn">Post</span> <span class="k">as</span> <span class="nn">P</span>
<span class="kn">import</span> <span class="nn">Converter</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Generator</span> <span class="k">as</span> <span class="nn">G</span>

<span class="c1"># Using indic (linear)</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cartTetra</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
<span class="n">indic</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="s1">&#39;indic&#39;</span><span class="p">,</span> <span class="n">a</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">indic</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">indic</span><span class="p">,</span> <span class="s1">&#39;indic&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">C</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="n">indic</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="n">C</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="n">indic</span><span class="p">,</span> <span class="mi">49</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">refine</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">indic</span><span class="p">)</span>
<span class="n">C</span><span class="o">.</span><span class="n">convertArrays2File</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;out.plt&#39;</span><span class="p">)</span>

<span class="c1"># Using butterfly</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cartTetra</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">exteriorFaces</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="c1">#a = C.initVars(a, &quot;z = 0.1*{x}*{x}+0.2*{y}&quot;)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">):</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">refine</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">w</span><span class="o">=</span><span class="mf">1.</span><span class="o">/</span><span class="mf">64.</span><span class="p">)</span>
<span class="n">C</span><span class="o">.</span><span class="n">convertArrays2File</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;out.plt&#39;</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/refinePT.py">Refine all cells in a 2D mesh (pyTree)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - refine (pyTree) -</span>
<span class="kn">import</span> <span class="nn">Post.PyTree</span> <span class="k">as</span> <span class="nn">P</span>
<span class="kn">import</span> <span class="nn">Converter.PyTree</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Generator.PyTree</span> <span class="k">as</span> <span class="nn">G</span>

<span class="c1"># Linear with indicator field</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cartTetra</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;centers:indic&#39;</span><span class="p">,</span> <span class="mf">1.</span><span class="p">)</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">refine</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;indic&#39;</span><span class="p">)</span>
<span class="n">C</span><span class="o">.</span><span class="n">convertPyTree2File</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;out.cgns&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<hr class="docutils" />
<dl class="py function">
<dt class="sig sig-object py" id="id0">
<span class="sig-prename descclassname"><span class="pre">Post.</span></span><span class="sig-name descname"><span class="pre">refine</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">w</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.</span> <span class="pre">/</span> <span class="pre">64.</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Refine a triangle mesh every where using butterfly interpolation with coefficient w.</p>
<p><em>Example of use:</em></p>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/refine2.py">Refine all cells with butterfly interpolation (array)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - refine (array) -</span>
<span class="kn">import</span> <span class="nn">Post</span> <span class="k">as</span> <span class="nn">P</span>
<span class="kn">import</span> <span class="nn">Converter</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Generator</span> <span class="k">as</span> <span class="nn">G</span>

<span class="c1"># Refine using butterfly</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cartTetra</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">exteriorFaces</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">refine</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">w</span><span class="o">=</span><span class="mf">1.</span><span class="o">/</span><span class="mf">64.</span><span class="p">)</span>
<span class="n">C</span><span class="o">.</span><span class="n">convertArrays2File</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;out.plt&#39;</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/refine2PT.py">Refine all cells with butterfly interpolation (pyTree)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - refine (pyTree) -</span>
<span class="kn">import</span> <span class="nn">Post.PyTree</span> <span class="k">as</span> <span class="nn">P</span>
<span class="kn">import</span> <span class="nn">Converter.PyTree</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Generator.PyTree</span> <span class="k">as</span> <span class="nn">G</span>

<span class="c1"># Refine with butterfly interpolation</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cartTetra</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">refine</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">w</span><span class="o">=</span><span class="mf">1.</span><span class="o">/</span><span class="mf">64.</span><span class="p">)</span>
<span class="n">C</span><span class="o">.</span><span class="n">convertPyTree2File</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;out.cgns&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<hr class="docutils" />
<dl class="py function">
<dt class="sig sig-object py" id="Post.computeIndicatorValue">
<span class="sig-prename descclassname"><span class="pre">Post.</span></span><span class="sig-name descname"><span class="pre">computeIndicatorValue</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">varName</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Compute the indicator value on the unstructured octree mesh a based on the absolute maximum
value of a varName field defined in the corresponding structured octree t.
In the array version, t is a list of zones, and in the pyTree version, it can be a tree or a base or a list of bases
or a zone or a list of zones.
Variable varName can be located at nodes or centers.
The resulting projected field is stored at centers in the octree mesh.</p>
<p><em>Example of use:</em></p>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/.py">Project the maximum value of the indicator field on the octree mesh (array)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - compIndicatorValue(array) -</span>
<span class="kn">import</span> <span class="nn">Generator</span> <span class="k">as</span> <span class="nn">G</span>
<span class="kn">import</span> <span class="nn">Converter</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Geom</span> <span class="k">as</span> <span class="nn">D</span>
<span class="kn">import</span> <span class="nn">Post</span> <span class="k">as</span> <span class="nn">P</span>

<span class="n">s</span> <span class="o">=</span> <span class="n">D</span><span class="o">.</span><span class="n">circle</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="mf">1.</span><span class="p">)</span>
<span class="n">snear</span> <span class="o">=</span> <span class="mf">0.1</span>
<span class="n">o</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">octree</span><span class="p">([</span><span class="n">s</span><span class="p">],</span> <span class="p">[</span><span class="n">snear</span><span class="p">],</span> <span class="n">dfar</span><span class="o">=</span><span class="mf">10.</span><span class="p">,</span> <span class="n">balancing</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">octree2Struct</span><span class="p">(</span><span class="n">o</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="mi">11</span><span class="p">,</span><span class="n">merged</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">vol</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">getVolumeMap</span><span class="p">(</span><span class="n">res</span><span class="p">);</span> <span class="n">res</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">node2Center</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="n">val</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">computeIndicatorValue</span><span class="p">(</span><span class="n">o</span><span class="p">,</span><span class="n">res</span><span class="p">,</span><span class="n">vol</span><span class="p">)</span>
<span class="n">o</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">addVars</span><span class="p">([</span><span class="n">o</span><span class="p">,</span><span class="n">val</span><span class="p">])</span>
<span class="n">C</span><span class="o">.</span><span class="n">convertArrays2File</span><span class="p">([</span><span class="n">o</span><span class="p">],</span> <span class="s2">&quot;out.plt&quot;</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/PT.py">Project the maximum value of the indicator field on the octree mesh (pyTree)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - compIndicatorValue(pyTree) -</span>
<span class="kn">import</span> <span class="nn">Generator.PyTree</span> <span class="k">as</span> <span class="nn">G</span>
<span class="kn">import</span> <span class="nn">Converter.PyTree</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Geom.PyTree</span> <span class="k">as</span> <span class="nn">D</span>
<span class="kn">import</span> <span class="nn">Post.PyTree</span> <span class="k">as</span> <span class="nn">P</span>

<span class="n">s</span> <span class="o">=</span> <span class="n">D</span><span class="o">.</span><span class="n">circle</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="mf">1.</span><span class="p">)</span>
<span class="n">snear</span> <span class="o">=</span> <span class="mf">0.1</span>
<span class="n">o</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">octree</span><span class="p">([</span><span class="n">s</span><span class="p">],</span> <span class="p">[</span><span class="n">snear</span><span class="p">],</span> <span class="n">dfar</span><span class="o">=</span><span class="mf">10.</span><span class="p">,</span> <span class="n">balancing</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">octree2Struct</span><span class="p">(</span><span class="n">o</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="mi">11</span><span class="p">,</span><span class="n">merged</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">getVolumeMap</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="n">o</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">computeIndicatorValue</span><span class="p">(</span><span class="n">o</span><span class="p">,</span><span class="n">res</span><span class="p">,</span><span class="s1">&#39;centers:vol&#39;</span><span class="p">)</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">newPyTree</span><span class="p">([</span><span class="s1">&#39;Base&#39;</span><span class="p">]);</span> <span class="n">t</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">+=</span><span class="p">[</span><span class="n">o</span><span class="p">]</span>
<span class="n">C</span><span class="o">.</span><span class="n">convertPyTree2File</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="s2">&quot;out.cgns&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<hr class="docutils" />
<dl class="py function">
<dt class="sig sig-object py" id="Post.computeIndicatorField">
<span class="sig-prename descclassname"><span class="pre">Post.</span></span><span class="sig-name descname"><span class="pre">computeIndicatorField</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>compute an indicator field to adapt an octree mesh with respect to the
required number of points nbTargetPts, a field, and bodies.
If refineFinestLevel=1, the finest level of the octree o is refined.
If coarsenCoarsestLevel=1, the coarsest level of the octree o is
coarsened provided the balancing is respected.&lt;br&gt;
This function computes epsInf, epsSup, indicator such that when
indicVal &lt; valInf, the octree is coarsened (indicator=-1), when
indicVal &gt; valSup, the octree is refined (indicator=1).</p>
<p>For an octree defined in an array o, and the field in indicVal:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">indicator</span><span class="p">,</span> <span class="n">valInf</span><span class="p">,</span> <span class="n">valSup</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">computeIndicatorField</span><span class="p">(</span><span class="n">o</span><span class="p">,</span> <span class="n">indicVal</span><span class="p">,</span> <span class="n">nbTargetPts</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">bodies</span><span class="o">=</span><span class="p">[],</span> <span class="n">refineFinestLevel</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">coarsenCoarsestLevel</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>For the pyTree version, the name varname of the field on which is based
the indicator must be specified:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">o</span><span class="p">,</span> <span class="n">valInf</span><span class="p">,</span> <span class="n">valSup</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">computeIndicatorField</span><span class="p">(</span><span class="n">o</span><span class="p">,</span> <span class="n">varname</span><span class="p">,</span> <span class="n">nbTargetPts</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">bodies</span><span class="o">=</span><span class="p">[],</span> <span class="n">refineFinestLevel</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">coarsenCoarsestLevel</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p><em>Example of use:</em></p>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/computeIndicatorField.py">Compute the adaptation indicator (array)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - compIndicatorField (array) -</span>
<span class="kn">import</span> <span class="nn">Generator</span> <span class="k">as</span> <span class="nn">G</span>
<span class="kn">import</span> <span class="nn">Converter</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Geom</span> <span class="k">as</span> <span class="nn">D</span>
<span class="kn">import</span> <span class="nn">Post</span> <span class="k">as</span> <span class="nn">P</span>

<span class="n">s</span> <span class="o">=</span> <span class="n">D</span><span class="o">.</span><span class="n">circle</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="mf">1.</span><span class="p">,</span> <span class="n">N</span><span class="o">=</span><span class="mi">100</span><span class="p">);</span> <span class="n">snear</span> <span class="o">=</span> <span class="mf">0.1</span>
<span class="n">o</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">octree</span><span class="p">([</span><span class="n">s</span><span class="p">],</span> <span class="p">[</span><span class="n">snear</span><span class="p">],</span> <span class="n">dfar</span><span class="o">=</span><span class="mf">10.</span><span class="p">,</span> <span class="n">balancing</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">npts</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">o</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
<span class="n">indicVal</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">getVolumeMap</span><span class="p">(</span><span class="n">o</span><span class="p">)</span>
<span class="n">indicator</span><span class="p">,</span> <span class="n">valInf</span><span class="p">,</span> <span class="n">valSup</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">computeIndicatorField</span><span class="p">(</span>
    <span class="n">o</span><span class="p">,</span> <span class="n">indicVal</span><span class="p">,</span> <span class="n">nbTargetPts</span><span class="o">=</span><span class="mf">2.</span><span class="o">*</span><span class="n">npts</span><span class="p">,</span> <span class="n">bodies</span><span class="o">=</span><span class="p">[</span><span class="n">s</span><span class="p">])</span>
<span class="n">indicator</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">center2Node</span><span class="p">(</span><span class="n">indicator</span><span class="p">)</span>
<span class="n">o</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">addVars</span><span class="p">([</span><span class="n">o</span><span class="p">,</span> <span class="n">indicator</span><span class="p">])</span>
<span class="n">C</span><span class="o">.</span><span class="n">convertArrays2File</span><span class="p">(</span><span class="n">o</span><span class="p">,</span> <span class="s2">&quot;out.plt&quot;</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/computeIndicatorFieldPT.py">Compute the adaptation indicator (pyTree)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - compIndicatorField (pyTree) -</span>
<span class="kn">import</span> <span class="nn">Generator.PyTree</span> <span class="k">as</span> <span class="nn">G</span>
<span class="kn">import</span> <span class="nn">Converter.PyTree</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Geom.PyTree</span> <span class="k">as</span> <span class="nn">D</span>
<span class="kn">import</span> <span class="nn">Post.PyTree</span> <span class="k">as</span> <span class="nn">P</span>

<span class="c1">#----------------------</span>
<span class="c1"># indicateur en centres</span>
<span class="c1">#----------------------</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">D</span><span class="o">.</span><span class="n">circle</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="mf">1.</span><span class="p">,</span> <span class="n">N</span><span class="o">=</span><span class="mi">100</span><span class="p">);</span> <span class="n">snear</span> <span class="o">=</span> <span class="mf">0.1</span>
<span class="n">o</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">octree</span><span class="p">([</span><span class="n">s</span><span class="p">],</span> <span class="p">[</span><span class="n">snear</span><span class="p">],</span> <span class="n">dfar</span><span class="o">=</span><span class="mf">10.</span><span class="p">,</span> <span class="n">balancing</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">npts</span> <span class="o">=</span> <span class="n">o</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
<span class="n">o</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">getVolumeMap</span><span class="p">(</span><span class="n">o</span><span class="p">)</span>
<span class="n">o</span><span class="p">,</span> <span class="n">valInf</span><span class="p">,</span> <span class="n">valSup</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">computeIndicatorField</span><span class="p">(</span><span class="n">o</span><span class="p">,</span> <span class="s1">&#39;centers:vol&#39;</span><span class="p">,</span>
                                            <span class="n">nbTargetPts</span><span class="o">=</span><span class="mi">2</span><span class="o">*</span><span class="n">npts</span><span class="p">,</span> <span class="n">bodies</span><span class="o">=</span><span class="p">[</span><span class="n">s</span><span class="p">])</span>
<span class="n">C</span><span class="o">.</span><span class="n">convertPyTree2File</span><span class="p">(</span><span class="n">o</span><span class="p">,</span> <span class="s1">&#39;out.cgns&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
<hr class="docutils" />
<section id="solution-extraction">
<h3>Solution extraction</h3>
<dl class="py function">
<dt class="sig sig-object py" id="Post.extractPoint">
<span class="sig-prename descclassname"><span class="pre">Post.</span></span><span class="sig-name descname"><span class="pre">extractPoint</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">z)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">order=2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">constraint=40.</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tol=1.e-6</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hook=None</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Extract the field in one or several points, given a solution defined by A.
The extracted field(s) is returned as a list of values for each point.
If the point (x,y,z) is not interpolable from a grid, then 0 for all fields is returned.</p>
<p>To extract field in several points use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">F</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">extractPoint</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="p">[(</span><span class="n">x1</span><span class="p">,</span><span class="n">y1</span><span class="p">,</span><span class="n">z1</span><span class="p">),(</span><span class="n">x2</span><span class="p">,</span><span class="n">y2</span><span class="p">,</span><span class="n">z2</span><span class="p">)],</span> <span class="n">order</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">constraint</span><span class="o">=</span><span class="mf">40.</span><span class="p">,</span> <span class="n">tol</span><span class="o">=</span><span class="mf">1.e-6</span><span class="p">,</span> <span class="n">hook</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
<p>In the pyTree version, extractPoint returns the extracted solution
from solutions located at nodes followed by the solution extracted from solutions at centers.</p>
<p>If &#8216;cellN&#8217;, &#8216;ichim&#8217;, &#8216;cellnf&#8217;, &#8216;status&#8217;, or &#8216;cellNF&#8217; variable is defined,
it is returned in the last position in the output array.
The interpolation order can be 2, 3, or 5.</p>
<p>&#8216;constraint&#8217; is a thresold for extrapolation to occur. To enable more
extrapolation, rise this value.</p>
<p>If some blocks in A define surfaces, a tolerance &#8216;tol&#8217; for interpolation cell search can be defined.</p>
<p>A hook can be defined in order to keep in memory the ADT on the
interpolation cell search. The hook argument must be a list of hooks,
each one being built for each donor zone using
the &#8220;createHook&#8221; function of Converter module with &#8216;extractMesh&#8217; argument.</p>
<p><em>Example of use:</em></p>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/extractPoint.py">Extraction in one point (array)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - extractPoint (array) -</span>
<span class="kn">import</span> <span class="nn">Converter</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Generator</span> <span class="k">as</span> <span class="nn">G</span>
<span class="kn">import</span> <span class="nn">Post</span> <span class="k">as</span> <span class="nn">P</span>

<span class="n">ni</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span> <span class="n">nj</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span> <span class="n">nk</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cart</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mf">1.</span><span class="o">/</span><span class="p">(</span><span class="n">ni</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mf">1.</span><span class="o">/</span><span class="p">(</span><span class="n">nj</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mf">1.</span><span class="o">/</span><span class="p">(</span><span class="n">nk</span><span class="o">-</span><span class="mi">1</span><span class="p">)),</span> <span class="p">(</span><span class="n">ni</span><span class="p">,</span><span class="n">nj</span><span class="p">,</span><span class="n">nk</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">F</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">):</span> <span class="k">return</span> <span class="n">x</span><span class="o">*</span><span class="n">x</span><span class="o">*</span><span class="n">x</span><span class="o">*</span><span class="n">x</span> <span class="o">+</span> <span class="mf">2.</span><span class="o">*</span><span class="n">y</span> <span class="o">+</span> <span class="n">z</span><span class="o">*</span><span class="n">z</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;F&#39;</span><span class="p">,</span> <span class="n">F</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span><span class="s1">&#39;y&#39;</span><span class="p">,</span><span class="s1">&#39;z&#39;</span><span class="p">])</span>

<span class="c1"># Utilisation directe</span>
<span class="n">val</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">extractPoint</span><span class="p">([</span><span class="n">a</span><span class="p">],</span> <span class="p">(</span><span class="mf">0.55</span><span class="p">,</span> <span class="mf">0.38</span><span class="p">,</span> <span class="mf">0.12</span><span class="p">),</span> <span class="mi">2</span><span class="p">);</span> <span class="nb">print</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>

<span class="c1"># Utilisation avec un hook</span>
<span class="n">hook</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">createHook</span><span class="p">([</span><span class="n">a</span><span class="p">],</span> <span class="n">function</span><span class="o">=</span><span class="s1">&#39;extractMesh&#39;</span><span class="p">)</span>
<span class="n">val</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">extractPoint</span><span class="p">([</span><span class="n">a</span><span class="p">],</span> <span class="p">(</span><span class="mf">0.55</span><span class="p">,</span> <span class="mf">0.38</span><span class="p">,</span> <span class="mf">0.12</span><span class="p">),</span> <span class="mi">2</span><span class="p">,</span> <span class="n">hook</span><span class="o">=</span><span class="n">hook</span><span class="p">);</span> <span class="nb">print</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/extractPointPT.py">Extraction in one point (pyTree)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - extractPoint (pyTree) -</span>
<span class="kn">import</span> <span class="nn">Converter.PyTree</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Generator.PyTree</span> <span class="k">as</span> <span class="nn">G</span>
<span class="kn">import</span> <span class="nn">Post.PyTree</span> <span class="k">as</span> <span class="nn">P</span>

<span class="n">ni</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span> <span class="n">nj</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span> <span class="n">nk</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cart</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mf">1.</span><span class="o">/</span><span class="p">(</span><span class="n">ni</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mf">1.</span><span class="o">/</span><span class="p">(</span><span class="n">nj</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mf">1.</span><span class="o">/</span><span class="p">(</span><span class="n">nk</span><span class="o">-</span><span class="mi">1</span><span class="p">)),</span> <span class="p">(</span><span class="n">ni</span><span class="p">,</span><span class="n">nj</span><span class="p">,</span><span class="n">nk</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">F</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">):</span> <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="mf">2.</span><span class="o">*</span><span class="n">y</span> <span class="o">+</span> <span class="mf">3.</span><span class="o">*</span><span class="n">z</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;F&#39;</span><span class="p">,</span> <span class="n">F</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;CoordinateX&#39;</span><span class="p">,</span><span class="s1">&#39;CoordinateY&#39;</span><span class="p">,</span><span class="s1">&#39;CoordinateZ&#39;</span><span class="p">])</span>

<span class="c1"># Utilisation directe</span>
<span class="n">val</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">extractPoint</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="p">(</span><span class="mf">0.55</span><span class="p">,</span> <span class="mf">0.38</span><span class="p">,</span> <span class="mf">0.12</span><span class="p">),</span> <span class="mi">2</span><span class="p">);</span> <span class="nb">print</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>

<span class="c1"># Utilisation avec un hook</span>
<span class="n">hook</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">createHook</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">function</span><span class="o">=</span><span class="s1">&#39;extractMesh&#39;</span><span class="p">)</span>
<span class="n">val</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">extractPoint</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="p">(</span><span class="mf">0.55</span><span class="p">,</span> <span class="mf">0.38</span><span class="p">,</span> <span class="mf">0.12</span><span class="p">),</span> <span class="mi">2</span><span class="p">,</span> <span class="n">hook</span><span class="o">=</span><span class="p">[</span><span class="n">hook</span><span class="p">]);</span> <span class="nb">print</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<hr class="docutils" />
<dl class="py function">
<dt class="sig sig-object py" id="Post.extractPlane">
<span class="sig-prename descclassname"><span class="pre">Post.</span></span><span class="sig-name descname"><span class="pre">extractPlane</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(c1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">c2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">c3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">c4)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">order=2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tol=1.e-6</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>slice a solution A with a plane.
The extracted solution is interpolated from A.
Interpolation order can be 2, 3, or 5
(but the 5th order is very time-consuming for the moment).
The best solution is kept. Plane is defined
by <span class="math notranslate nohighlight">\(c1\ x + c2\ y + c3\ z + c4 = 0\)</span>.</p>
<p><em>Example of use:</em></p>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/extractPlane.py">Extraction on a given plane (array)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - extractPlane (array) -</span>
<span class="kn">import</span> <span class="nn">Converter</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Post</span> <span class="k">as</span> <span class="nn">P</span>
<span class="kn">import</span> <span class="nn">Transform</span> <span class="k">as</span> <span class="nn">T</span>
<span class="kn">import</span> <span class="nn">Generator</span> <span class="k">as</span> <span class="nn">G</span>

<span class="n">m</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cylinder</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">360.</span><span class="p">,</span> <span class="mf">10.</span><span class="p">,</span> <span class="p">(</span><span class="mi">50</span><span class="p">,</span><span class="mi">50</span><span class="p">,</span><span class="mi">50</span><span class="p">))</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">T</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="n">m</span> <span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="mf">35.</span><span class="p">)</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">extractPlane</span><span class="p">([</span><span class="n">m</span><span class="p">],</span> <span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">C</span><span class="o">.</span><span class="n">convertArrays2File</span><span class="p">([</span><span class="n">m</span><span class="p">,</span><span class="n">a</span><span class="p">],</span> <span class="s2">&quot;out.plt&quot;</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/extractPlanePT.py">Extraction on a given plane (pyTree)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - extractPlane (pyTree) -</span>
<span class="kn">import</span> <span class="nn">Converter.PyTree</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Post.PyTree</span> <span class="k">as</span> <span class="nn">P</span>
<span class="kn">import</span> <span class="nn">Transform.PyTree</span> <span class="k">as</span> <span class="nn">T</span>
<span class="kn">import</span> <span class="nn">Generator.PyTree</span> <span class="k">as</span> <span class="nn">G</span>

<span class="n">m</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cylinder</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">360.</span><span class="p">,</span> <span class="mf">10.</span><span class="p">,</span> <span class="p">(</span><span class="mi">50</span><span class="p">,</span><span class="mi">50</span><span class="p">,</span><span class="mi">50</span><span class="p">))</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">T</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="mf">35.</span><span class="p">)</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">m</span><span class="p">,</span><span class="s1">&#39;Density&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span> <span class="n">m</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">m</span><span class="p">,</span><span class="s1">&#39;centers:cellN&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="n">z</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">extractPlane</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">C</span><span class="o">.</span><span class="n">convertPyTree2File</span><span class="p">(</span><span class="n">z</span><span class="p">,</span> <span class="s1">&#39;out.cgns&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<hr class="docutils" />
<dl class="py function">
<dt class="sig sig-object py" id="Post.extractMesh">
<span class="sig-prename descclassname"><span class="pre">Post.</span></span><span class="sig-name descname"><span class="pre">extractMesh</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">order</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extrapOrder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">constraint</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">40.</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.e-6</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'robust'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hook</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Interpolate a solution from a set of donor zones defined by A to an extraction zone a.
Parameter order can be 2, 3 or 5, meaning that 2nd, 3rd and 5th order interpolations are performed.</p>
<p>Parameter &#8216;constraint&#8217;&gt;0 enables to extrapolate from A if interpolation is not possible for some points.
Extrapolation order can be 0 or 1 and is defined by extrapOrder.</p>
<p>If mode=&#8217;robust&#8217;, extract from the node mesh (solution in centers is first
put to nodes, resulting interpolated solution is located in nodes).</p>
<p>If mode=&#8217;accurate&#8217;, extract node solution from node mesh and center solution
from center mesh (variables don&#8217;t change location).</p>
<p>The interpolation cell search can be preconditioned if extractMesh is applied several times using the same donor mesh.
Parameter hook is only used in &#8216;robust&#8217; mode and is a list of ADT (one per donor zone), each of them must be created and deleted by C.createHook and C.freeHook (see Converter module userguide).</p>
<p>Exists also as in place version (_extractMesh) that modifies a and return None.</p>
<p><em>Example of use:</em></p>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/extractMesh.py">Extraction on an extraction zone (array)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - extractMesh (array) -</span>
<span class="kn">import</span> <span class="nn">Converter</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Post</span> <span class="k">as</span> <span class="nn">P</span>
<span class="kn">import</span> <span class="nn">Generator</span> <span class="k">as</span> <span class="nn">G</span>

<span class="n">ni</span> <span class="o">=</span> <span class="mi">30</span><span class="p">;</span> <span class="n">nj</span> <span class="o">=</span> <span class="mi">40</span><span class="p">;</span> <span class="n">nk</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cart</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mf">10.</span><span class="o">/</span><span class="p">(</span><span class="n">ni</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mf">10.</span><span class="o">/</span><span class="p">(</span><span class="n">nj</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="n">ni</span><span class="p">,</span><span class="n">nj</span><span class="p">,</span><span class="n">nk</span><span class="p">))</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="s1">&#39;ro&#39;</span><span class="p">,</span> <span class="mf">1.</span><span class="p">)</span>
<span class="c1"># Create extraction mesh</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cart</span><span class="p">((</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">),</span> <span class="p">(</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">),</span> <span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
<span class="c1"># Extract solution on extraction mesh</span>
<span class="n">a2</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">extractMesh</span><span class="p">([</span><span class="n">m</span><span class="p">],</span> <span class="n">a</span><span class="p">)</span>
<span class="n">C</span><span class="o">.</span><span class="n">convertArrays2File</span><span class="p">([</span><span class="n">m</span><span class="p">,</span><span class="n">a2</span><span class="p">],</span> <span class="s1">&#39;out.plt&#39;</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/extractMeshPT.py">Extraction on an extraction zone (pyTree)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - extractMesh (pyTree) -</span>
<span class="kn">import</span> <span class="nn">Converter.PyTree</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Post.PyTree</span> <span class="k">as</span> <span class="nn">P</span>
<span class="kn">import</span> <span class="nn">Generator.PyTree</span> <span class="k">as</span> <span class="nn">G</span>

<span class="n">ni</span> <span class="o">=</span> <span class="mi">30</span><span class="p">;</span> <span class="n">nj</span> <span class="o">=</span> <span class="mi">40</span><span class="p">;</span> <span class="n">nk</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cart</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mf">10.</span><span class="o">/</span><span class="p">(</span><span class="n">ni</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mf">10.</span><span class="o">/</span><span class="p">(</span><span class="n">nj</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="n">ni</span><span class="p">,</span><span class="n">nj</span><span class="p">,</span><span class="n">nk</span><span class="p">))</span>
<span class="n">C</span><span class="o">.</span><span class="n">_initVars</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="s1">&#39;Density&#39;</span><span class="p">,</span> <span class="mf">2.</span><span class="p">)</span>
<span class="n">C</span><span class="o">.</span><span class="n">_initVars</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="s1">&#39;centers:cellN&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

<span class="c1"># Extraction mesh</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cart</span><span class="p">((</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.5</span><span class="p">),</span> <span class="p">(</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">1.</span><span class="p">),</span> <span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">1</span><span class="p">));</span> <span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;extraction&#39;</span>

<span class="c1"># Extract solution on extraction mesh</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">extractMesh</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">newPyTree</span><span class="p">([</span><span class="s1">&#39;Solution&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;Extraction&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<span class="n">t</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">m</span><span class="p">);</span> <span class="n">t</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">2</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">+=</span> <span class="p">[</span><span class="n">a</span><span class="p">]</span>
<span class="n">C</span><span class="o">.</span><span class="n">convertPyTree2File</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;out.cgns&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<hr class="docutils" />
<dl class="py function">
<dt class="sig sig-object py" id="Post.projectCloudSolution">
<span class="sig-prename descclassname"><span class="pre">Post.</span></span><span class="sig-name descname"><span class="pre">projectCloudSolution</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Project the solution by a Least-Square Interpolation defined on a set of points pts defined as a &#8216;NODE&#8217; zone
to a body defined by a &#8216;TRI&#8217; mesh in 3D and &#8216;BAR&#8217; mesh in 2D.</p>
<p><em>Example of use:</em></p>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/projectCloudSolution.py">projectCloudSolution (array)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># -projectCloudSolution (array)</span>
<span class="kn">import</span> <span class="nn">Converter</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Geom</span> <span class="k">as</span> <span class="nn">D</span>
<span class="kn">import</span> <span class="nn">Post</span> <span class="k">as</span> <span class="nn">P</span>
<span class="kn">import</span> <span class="nn">Transform</span> <span class="k">as</span> <span class="nn">T</span>
<span class="kn">import</span> <span class="nn">Generator</span> <span class="k">as</span> <span class="nn">G</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">D</span><span class="o">.</span><span class="n">sphere</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="mf">1.</span><span class="p">,</span><span class="n">N</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">convertArray2Tetra</span><span class="p">(</span><span class="n">a</span><span class="p">);</span> <span class="n">a</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">D</span><span class="o">.</span><span class="n">sphere6</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="mf">1.</span><span class="p">,</span><span class="n">N</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">convertArray2Tetra</span><span class="p">(</span><span class="n">b</span><span class="p">);</span> <span class="n">b</span> <span class="o">=</span> <span class="n">T</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="n">pts</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">convertArray2Node</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="n">pts</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">pts</span><span class="p">,</span><span class="s1">&#39;</span><span class="si">{F}</span><span class="s1">=</span><span class="si">{x}</span><span class="s1">*</span><span class="si">{y}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="s1">&#39;F&#39;</span><span class="p">,</span> <span class="mf">0.</span><span class="p">)</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">projectCloudSolution</span><span class="p">(</span><span class="n">pts</span><span class="p">,</span><span class="n">a</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s1">&#39;nodes&#39;</span><span class="p">)</span>
<span class="n">C</span><span class="o">.</span><span class="n">convertArrays2File</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="s2">&quot;out.plt&quot;</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/projectCloudSolutionPT.py">projectCloudSolution (pyTree)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># -projectCloudSolution (pyTree)</span>
<span class="kn">import</span> <span class="nn">Converter.PyTree</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Geom.PyTree</span> <span class="k">as</span> <span class="nn">D</span>
<span class="kn">import</span> <span class="nn">Post.PyTree</span> <span class="k">as</span> <span class="nn">P</span>
<span class="kn">import</span> <span class="nn">Transform.PyTree</span> <span class="k">as</span> <span class="nn">T</span>
<span class="kn">import</span> <span class="nn">Generator.PyTree</span> <span class="k">as</span> <span class="nn">G</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">D</span><span class="o">.</span><span class="n">sphere</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="mf">1.</span><span class="p">,</span><span class="n">N</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">convertArray2Tetra</span><span class="p">(</span><span class="n">a</span><span class="p">);</span> <span class="n">a</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">D</span><span class="o">.</span><span class="n">sphere6</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="mf">1.</span><span class="p">,</span><span class="n">N</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">convertArray2Tetra</span><span class="p">(</span><span class="n">b</span><span class="p">);</span> <span class="n">b</span> <span class="o">=</span> <span class="n">T</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="n">pts</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">convertArray2Node</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="n">C</span><span class="o">.</span><span class="n">_initVars</span><span class="p">(</span><span class="n">pts</span><span class="p">,</span><span class="s1">&#39;</span><span class="si">{F}</span><span class="s1">=</span><span class="si">{CoordinateX}</span><span class="s1">*</span><span class="si">{CoordinateY}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">C</span><span class="o">.</span><span class="n">_initVars</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="s1">&#39;F&#39;</span><span class="p">,</span> <span class="mf">0.</span><span class="p">)</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">projectCloudSolution</span><span class="p">(</span><span class="n">pts</span><span class="p">,</span><span class="n">a</span><span class="p">)</span>
<span class="n">C</span><span class="o">.</span><span class="n">convertPyTree2File</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s2">&quot;out.cgns&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<hr class="docutils" />
<dl class="py function">
<dt class="sig sig-object py" id="Post.zipper">
<span class="sig-prename descclassname"><span class="pre">Post.</span></span><span class="sig-name descname"><span class="pre">zipper</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">options</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Build an unstructured unique surface mesh, given a list of structured
overlapping surface grids A.
Cell nature field is used to find blanked (0) and interpolated (2) cells.</p>
<p>The options argument is a list of arguments such as [&#8220;argName&#8221;, argValue]. Option names can be:</p>
<ul class="simple">
<li><p>&#8216;overlapTol&#8217; for tolerance required between two overlapping grids : if the projection distance between them is under this value then the grids are considered to be overset. Default value is 1.e-5.</p></li>
<li><p>For some cases, &#8216;matchTol&#8217; can be set to modify the matching boundaries tolerance. Default value is set 1e-6.</p></li>
</ul>
<p>In most cases, one needn&#8217;t modify this parameter.</p>
<p><em>Example of use:</em></p>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/zipper.py">Zipping of an overset surface (array)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - zipper (array) -</span>
<span class="kn">import</span> <span class="nn">Converter</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Post</span> <span class="k">as</span> <span class="nn">P</span>
<span class="kn">import</span> <span class="nn">Generator</span> <span class="k">as</span> <span class="nn">G</span>
<span class="kn">import</span> <span class="nn">Transform</span> <span class="k">as</span> <span class="nn">T</span>

<span class="n">m1</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cylinder</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">360.</span><span class="p">,</span> <span class="mf">10.</span><span class="p">,</span> <span class="p">(</span><span class="mi">50</span><span class="p">,</span><span class="mi">50</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
<span class="n">m1</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">m1</span><span class="p">,</span> <span class="s1">&#39;cellN&#39;</span><span class="p">,</span> <span class="mf">1.</span><span class="p">)</span>

<span class="c1"># Set cellN = 2 (interpolated points) to boundary</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">T</span><span class="o">.</span><span class="n">subzone</span><span class="p">(</span><span class="n">m1</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">m1</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span><span class="mi">1</span><span class="p">),(</span><span class="n">m1</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span><span class="n">m1</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span><span class="n">m1</span><span class="p">[</span><span class="mi">4</span><span class="p">]))</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s1">&#39;cellN&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">m1</span> <span class="o">=</span> <span class="n">T</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="n">m1</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">m1</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span><span class="mi">1</span><span class="p">))</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">T</span><span class="o">.</span><span class="n">subzone</span><span class="p">(</span><span class="n">m1</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),(</span><span class="n">m1</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span><span class="mi">1</span><span class="p">,</span><span class="n">m1</span><span class="p">[</span><span class="mi">4</span><span class="p">]))</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s1">&#39;cellN&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">m1</span> <span class="o">=</span> <span class="n">T</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="n">m1</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>

<span class="n">ni</span> <span class="o">=</span> <span class="mi">30</span><span class="p">;</span> <span class="n">nj</span> <span class="o">=</span> <span class="mi">40</span>
<span class="n">m2</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cart</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mf">10.</span><span class="o">/</span><span class="p">(</span><span class="n">ni</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mf">10.</span><span class="o">/</span><span class="p">(</span><span class="n">nj</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="n">ni</span><span class="p">,</span><span class="n">nj</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
<span class="n">m2</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">m2</span><span class="p">,</span> <span class="s1">&#39;cellN&#39;</span><span class="p">,</span> <span class="mf">1.</span><span class="p">)</span>

<span class="n">array</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">zipper</span><span class="p">([</span><span class="n">m1</span><span class="p">,</span><span class="n">m2</span><span class="p">],[])</span>
<span class="n">C</span><span class="o">.</span><span class="n">convertArrays2File</span><span class="p">([</span><span class="n">array</span><span class="p">],</span> <span class="s1">&#39;out.plt&#39;</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/zipperPT.py">Zipping of an overset surface (pyTree)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - zipper (pyTree) -</span>
<span class="kn">import</span> <span class="nn">Converter.PyTree</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Post.PyTree</span> <span class="k">as</span> <span class="nn">P</span>
<span class="kn">import</span> <span class="nn">Generator.PyTree</span> <span class="k">as</span> <span class="nn">G</span>
<span class="kn">import</span> <span class="nn">Transform.PyTree</span> <span class="k">as</span> <span class="nn">T</span>

<span class="c1"># cylindre</span>
<span class="n">ni</span> <span class="o">=</span> <span class="mi">30</span><span class="p">;</span> <span class="n">nj</span> <span class="o">=</span> <span class="mi">40</span><span class="p">;</span> <span class="n">nk</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">m1</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cylinder</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">360.</span><span class="p">,</span> <span class="mf">10.</span><span class="p">,</span> <span class="p">(</span><span class="n">ni</span><span class="p">,</span><span class="n">nj</span><span class="p">,</span><span class="n">nk</span><span class="p">))</span>
<span class="n">m1</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">addVars</span><span class="p">(</span><span class="n">m1</span><span class="p">,</span> <span class="s1">&#39;Density&#39;</span><span class="p">);</span> <span class="n">m1</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">m1</span><span class="p">,</span><span class="s1">&#39;cellN&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># Set cellN = 2 (interpolated points) to boundary</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">T</span><span class="o">.</span><span class="n">subzone</span><span class="p">(</span><span class="n">m1</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">nj</span><span class="p">,</span><span class="mi">1</span><span class="p">),(</span><span class="n">ni</span><span class="p">,</span><span class="n">nj</span><span class="p">,</span><span class="n">nk</span><span class="p">))</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s1">&#39;cellN&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">m1</span> <span class="o">=</span> <span class="n">T</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="n">m1</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">nj</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">T</span><span class="o">.</span><span class="n">subzone</span><span class="p">(</span><span class="n">m1</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),(</span><span class="n">ni</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="n">nk</span><span class="p">))</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s1">&#39;cellN&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">m1</span> <span class="o">=</span> <span class="n">T</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="n">m1</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>

<span class="c1"># carre</span>
<span class="n">ni</span> <span class="o">=</span> <span class="mi">30</span><span class="p">;</span> <span class="n">nj</span> <span class="o">=</span> <span class="mi">40</span>
<span class="n">m2</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cart</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mf">10.</span><span class="o">/</span><span class="p">(</span><span class="n">ni</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mf">10.</span><span class="o">/</span><span class="p">(</span><span class="n">nj</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="n">ni</span><span class="p">,</span><span class="n">nj</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
<span class="n">m2</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">m2</span><span class="p">,</span> <span class="s1">&#39;Density&#39;</span><span class="p">,</span> <span class="mf">1.2</span><span class="p">);</span> <span class="n">m2</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">m2</span><span class="p">,</span> <span class="s1">&#39;cellN&#39;</span><span class="p">,</span> <span class="mf">1.</span><span class="p">)</span>

<span class="n">t</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">newPyTree</span><span class="p">([</span><span class="s1">&#39;Base&#39;</span><span class="p">,</span><span class="mi">2</span><span class="p">]);</span> <span class="n">t</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">+=</span> <span class="p">[</span><span class="n">m1</span><span class="p">,</span> <span class="n">m2</span><span class="p">]</span>
<span class="n">z</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">zipper</span><span class="p">(</span><span class="n">t</span><span class="p">);</span> <span class="n">z</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;zipper&#39;</span><span class="p">;</span> <span class="n">t</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">z</span><span class="p">)</span>
<span class="n">C</span><span class="o">.</span><span class="n">convertPyTree2File</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="s1">&#39;out.cgns&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<hr class="docutils" />
<dl class="py function">
<dt class="sig sig-object py" id="Post.usurp">
<span class="sig-prename descclassname"><span class="pre">Post.</span></span><span class="sig-name descname"><span class="pre">usurp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>This function computes a &#8220;ratio&#8221; field for structured overlapping surfaces.
The ratio field is located at cell centers.
In case of no overset, ratio are set to 1, otherwise ratio represents
the percentage of overlap of a cell by another mesh.
The finest cells have priority.
All surfaces must be oriented in the same way.</p>
<p>When using the array interface:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">C</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">usurp</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">)</span>
</pre></div>
</div>
<p>the input arrays are a list of grid arrays A, defining nodes coordinates and a
corresponding list of arrays defining the chimera nature of cells at cell centers B. Blanked cells must be flagged by a null value.
Other values are equally considered as computed or interpolated cells.</p>
<p>When using the pyTree interface:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">C</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">usurp</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
</pre></div>
</div>
<p>chimera cell nature field must be defined as a center field in A.</p>
<p>Warning: normal of surfaces grids defined by A must be
oriented in the same direction.</p>
<p><em>Example of use:</em></p>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/usurp.py">Ratio generation for the surface elements (array)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - usurp (array) -</span>
<span class="kn">import</span> <span class="nn">Post</span> <span class="k">as</span> <span class="nn">P</span>
<span class="kn">import</span> <span class="nn">Converter</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Generator</span> <span class="k">as</span> <span class="nn">G</span>
<span class="kn">import</span> <span class="nn">Transform</span> <span class="k">as</span> <span class="nn">T</span>

<span class="n">cyln</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">a1</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cylinder</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">360</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="p">(</span><span class="mi">100</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>
<span class="n">a1</span> <span class="o">=</span> <span class="n">T</span><span class="o">.</span><span class="n">subzone</span><span class="p">(</span><span class="n">a1</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="n">a1</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span><span class="mi">2</span><span class="p">,</span><span class="n">a1</span><span class="p">[</span><span class="mi">4</span><span class="p">]))</span>
<span class="n">cyln</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">a1</span><span class="p">)</span>
<span class="c1">#</span>
<span class="n">a2</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cylinder</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>
<span class="n">a2</span> <span class="o">=</span> <span class="n">T</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="n">a2</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.2</span><span class="p">))</span>
<span class="n">a2</span> <span class="o">=</span> <span class="n">T</span><span class="o">.</span><span class="n">subzone</span><span class="p">(</span><span class="n">a2</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="n">a2</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span><span class="mi">2</span><span class="p">,</span><span class="n">a2</span><span class="p">[</span><span class="mi">4</span><span class="p">]))</span>
<span class="n">cyln</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">a2</span><span class="p">)</span>
<span class="c1">#</span>
<span class="n">c1</span> <span class="o">=</span> <span class="n">cyln</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">ib1</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="s1">&#39;cellN&#39;</span><span class="p">,</span> <span class="n">c1</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">c1</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">c1</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="n">ib1</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">ib1</span><span class="p">,</span><span class="s1">&#39;cellN&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">ib1</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">,</span><span class="mi">586</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.</span>
<span class="c1">#</span>
<span class="n">c2</span> <span class="o">=</span> <span class="n">cyln</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="n">ib2</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="s1">&#39;cellN&#39;</span><span class="p">,</span> <span class="n">c2</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">c2</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">c2</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="n">ib2</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">ib2</span><span class="p">,</span> <span class="s1">&#39;cellN&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

<span class="n">ibc</span> <span class="o">=</span> <span class="p">[</span><span class="n">ib1</span><span class="p">,</span> <span class="n">ib2</span><span class="p">];</span> <span class="n">r</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">usurp</span><span class="p">(</span><span class="n">cyln</span><span class="p">,</span> <span class="n">ibc</span><span class="p">)</span>
<span class="n">cylc</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">node2Center</span><span class="p">(</span><span class="n">cyln</span><span class="p">)</span>
<span class="n">out</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">l</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">cylc</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">l</span><span class="p">)</span> <span class="p">:</span>
    <span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">C</span><span class="o">.</span><span class="n">addVars</span><span class="p">([</span><span class="n">cylc</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">ibc</span><span class="p">[</span><span class="n">i</span><span class="p">]]))</span>

<span class="n">C</span><span class="o">.</span><span class="n">convertArrays2File</span><span class="p">(</span><span class="n">out</span><span class="p">,</span> <span class="s1">&#39;outc.plt&#39;</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/usurpPT.py">Ratio generation for the surface elements (pyTree)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - usurp (pyTree)-</span>
<span class="kn">import</span> <span class="nn">Post.PyTree</span> <span class="k">as</span> <span class="nn">P</span>
<span class="kn">import</span> <span class="nn">Converter.PyTree</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Generator.PyTree</span> <span class="k">as</span> <span class="nn">G</span>
<span class="kn">import</span> <span class="nn">Transform.PyTree</span> <span class="k">as</span> <span class="nn">T</span>

<span class="n">a1</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cylinder</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">360</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="p">(</span><span class="mi">100</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>
<span class="n">a1</span> <span class="o">=</span> <span class="n">T</span><span class="o">.</span><span class="n">subzone</span><span class="p">(</span><span class="n">a1</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">100</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">10</span><span class="p">));</span> <span class="n">a1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">=</span><span class="s1">&#39;cyl1&#39;</span>

<span class="n">a2</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cylinder</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>
<span class="n">a2</span> <span class="o">=</span> <span class="n">T</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="n">a2</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.2</span><span class="p">))</span>
<span class="n">a2</span> <span class="o">=</span> <span class="n">T</span><span class="o">.</span><span class="n">subzone</span><span class="p">(</span><span class="n">a2</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">),(</span><span class="mi">10</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">10</span><span class="p">));</span> <span class="n">a2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">=</span><span class="s1">&#39;cyl2&#39;</span>

<span class="n">a1</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">a1</span><span class="p">,</span> <span class="s1">&#39;centers:cellN&#39;</span><span class="p">,</span><span class="mf">1.</span><span class="p">)</span>
<span class="n">a2</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">a2</span><span class="p">,</span> <span class="s1">&#39;centers:cellN&#39;</span><span class="p">,</span><span class="mf">1.</span><span class="p">)</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">newPyTree</span><span class="p">([</span><span class="s1">&#39;Base&#39;</span><span class="p">,</span><span class="mi">2</span><span class="p">]);</span> <span class="n">t</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">+=</span> <span class="p">[</span><span class="n">a1</span><span class="p">,</span> <span class="n">a2</span><span class="p">]</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">usurp</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="n">C</span><span class="o">.</span><span class="n">convertPyTree2File</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="s1">&#39;out.cgns&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<hr class="docutils" />
<dl class="py function">
<dt class="sig sig-object py" id="Post.Probe.Probe">
<span class="sig-prename descclassname"><span class="pre">Post.Probe.</span></span><span class="sig-name descname"><span class="pre">Probe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fileName</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">X</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(x,</span> <span class="pre">y,</span> <span class="pre">z)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ind</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blockName</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tPermeable</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fields</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">append</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bufferSize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Create a probe. 4 modes are possible :</p>
<ul class="simple">
<li><p>mode 0 : if t and (x,y,z) are provided, the probe will extract given fields from t at single position (x,y,z).</p></li>
<li><p>mode 1 : if t and (ind, blockName) are provided, the probe will extract given fields from block of t at single index ind of blockName.</p></li>
<li><p>mode 2 : if t, (x,y,z) and ind are not provided, the probe will store the zones given at extract.</p></li>
<li><p>mode 3 : if tPermeable is provided, the probe will interpolate on tPermeable.</p></li>
</ul>
<p>Result is periodically flush to file when buffer size exceeds bufferSize.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fileName</strong> (<em>string</em>) &#8211; name of file to dump to</p></li>
<li><p><strong>t</strong> (<em>pyTree</em>) &#8211; pyTree containing solution</p></li>
<li><p><strong>(</strong><strong>x</strong><strong>,</strong><strong>y</strong><strong>,</strong><strong>z</strong><strong>)</strong> (<em>tuple</em><em> of </em><em>3 floats</em>) &#8211; position of single probe (mode 0)</p></li>
<li><p><strong>ind</strong> (<em>integer</em>) &#8211; index of single probe in blockName (mode 1)</p></li>
<li><p><strong>blockName</strong> (<em>string</em>) &#8211; name of block containing probe (mode 1)</p></li>
<li><p><strong>tPermeable</strong> (<em>pyTree</em><em>, </em><em>zone</em><em> or </em><em>list</em><em> of </em><em>zones</em>) &#8211; surface to interpolate to.</p></li>
<li><p><strong>fields</strong> (<em>list</em><em> of </em><em>strings</em><em> or </em><em>None</em>) &#8211; list of fields to extract</p></li>
<li><p><strong>append</strong> (<em>Boolean</em>) &#8211; if True, append result to existing file</p></li>
<li><p><strong>bufferSize</strong> (<em>int</em>) &#8211; size of internal buffer</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>probe instance</p>
</dd>
</dl>
<p><em>Example of use:</em></p>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/probePT.py">Probe extraction (pyTree)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - Probe (pyTree) -</span>
<span class="kn">import</span> <span class="nn">Post.Probe</span> <span class="k">as</span> <span class="nn">Probe</span>
<span class="kn">import</span> <span class="nn">Converter.PyTree</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Generator.PyTree</span> <span class="k">as</span> <span class="nn">G</span>

<span class="c1"># test case</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cartRx</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">30</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">30</span><span class="p">),</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">5</span><span class="p">),</span> <span class="n">depth</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">addCellN</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">C</span><span class="o">.</span><span class="n">_initVars</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">{centers:F}</span><span class="s1"> = {centers:CoordinateX}&#39;</span><span class="p">)</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">newPyTree</span><span class="p">([</span><span class="s1">&#39;Base&#39;</span><span class="p">,</span> <span class="n">a</span><span class="p">])</span>

<span class="c1"># create a probe</span>
<span class="n">p1</span> <span class="o">=</span> <span class="n">Probe</span><span class="o">.</span><span class="n">Probe</span><span class="p">(</span><span class="s1">&#39;probe1.cgns&#39;</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">X</span><span class="o">=</span><span class="p">(</span><span class="mf">10.</span><span class="p">,</span><span class="mf">10.</span><span class="p">,</span><span class="mf">10.</span><span class="p">),</span> <span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;centers:F&#39;</span><span class="p">],</span> <span class="n">append</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">p1</span><span class="o">.</span><span class="n">printInfo</span><span class="p">()</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">110</span><span class="p">):</span>
    <span class="n">time</span> <span class="o">=</span> <span class="mf">0.1</span><span class="o">*</span><span class="n">i</span>
    <span class="n">C</span><span class="o">.</span><span class="n">_initVars</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">{centers:F}</span><span class="s1"> = {centers:CoordinateX}+10.*sin(</span><span class="si">%20.16g</span><span class="s1">)&#39;</span><span class="o">%</span><span class="n">time</span><span class="p">)</span>
    <span class="n">p1</span><span class="o">.</span><span class="n">extract</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">time</span><span class="o">=</span><span class="n">time</span><span class="p">)</span>
<span class="n">p1</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>

<span class="c1"># reread probe from file</span>
<span class="n">p1</span> <span class="o">=</span> <span class="n">Probe</span><span class="o">.</span><span class="n">Probe</span><span class="p">(</span><span class="s1">&#39;probe1.cgns&#39;</span><span class="p">)</span>
<span class="n">out</span> <span class="o">=</span> <span class="n">p1</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="n">C</span><span class="o">.</span><span class="n">convertPyTree2File</span><span class="p">(</span><span class="n">out</span><span class="p">,</span> <span class="s1">&#39;out.cgns&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<hr class="docutils" />
<dl class="py function">
<dt class="sig sig-object py" id="Post.Probe.Probe.extract">
<span class="sig-prename descclassname"><span class="pre">Post.Probe.Probe.</span></span><span class="sig-name descname"><span class="pre">extract</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">t</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Extract probe at given time from t.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>t</strong> (<em>pyTree</em>) &#8211; pyTree containing solution</p></li>
<li><p><strong>time</strong> (<em>float</em>) &#8211; extraction time</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<hr class="docutils" />
<dl class="py function">
<dt class="sig sig-object py" id="Post.Probe.Probe.flush">
<span class="sig-prename descclassname"><span class="pre">Post.Probe.Probe.</span></span><span class="sig-name descname"><span class="pre">flush</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Force probe flush to disk.</p>
</dd></dl>

<hr class="docutils" />
<dl class="py function">
<dt class="sig sig-object py" id="Post.Probe.Probe.read">
<span class="sig-prename descclassname"><span class="pre">Post.Probe.Probe.</span></span><span class="sig-name descname"><span class="pre">read</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cont</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ind</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">probeName</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Read all data stored in probe file and return a zone.
Can be used in two ways:</p>
<ul class="simple">
<li><p>cont: extract the given time container (all probe points)</p></li>
<li><p>ind, probeName: extract the given index, zone (all times)</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cont</strong> (<em>integer</em>) &#8211; number of time container</p></li>
<li><p><strong>ind</strong> (<em>integer</em>) &#8211; index to extract</p></li>
<li><p><strong>probeName</strong> (<em>string</em>) &#8211; name of probe zone to extract</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
<hr class="docutils" />
<section id="streams">
<h3>Streams</h3>
<dl class="py function">
<dt class="sig sig-object py" id="Post.streamLine">
<span class="sig-prename descclassname"><span class="pre">Post.</span></span><span class="sig-name descname"><span class="pre">streamLine</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(x0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">z0)</span></span></em>, <span class="optional">[</span><em class="sig-param"><span class="n"><span class="pre">'v1'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">'v2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">'v3'</span></span></em>, <span class="optional">]</span><em class="sig-param"><span class="n"><span class="pre">N=2000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dir=2</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Compute the stream line with N points starting from point (x0,y0,z0), given a solution A and a vector defined by 3 variables
[&#8216;v1&#8217;,&#8217;v2,&#8217;v3&#8217;].
Parameter &#8216;dir&#8217; can be set to 1 (streamline follows velocity), -1
(streamline follows -velocity), or 2
(streamline expands in both directions).
The output yields the set of N extracted points on the streamline,
and the input fields at these points. The streamline computation
stops when the current point is not interpolable from the input grids.</p>
<p><em>Example of use:</em></p>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/streamLine.py">Streamline extraction (array)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - streamLine (array) -</span>
<span class="kn">import</span> <span class="nn">Converter</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Post</span> <span class="k">as</span> <span class="nn">P</span>
<span class="kn">import</span> <span class="nn">Generator</span> <span class="k">as</span> <span class="nn">G</span>
<span class="kn">import</span> <span class="nn">math</span> <span class="k">as</span> <span class="nn">M</span>

<span class="n">ni</span> <span class="o">=</span> <span class="mi">30</span><span class="p">;</span> <span class="n">nj</span> <span class="o">=</span> <span class="mi">40</span>
<span class="n">m1</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cart</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mf">10.</span><span class="o">/</span><span class="p">(</span><span class="n">ni</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mf">10.</span><span class="o">/</span><span class="p">(</span><span class="n">nj</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="n">ni</span><span class="p">,</span><span class="n">nj</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
<span class="n">m2</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cart</span><span class="p">((</span><span class="mf">5.5</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mf">9.</span><span class="o">/</span><span class="p">(</span><span class="n">ni</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mf">9.</span><span class="o">/</span><span class="p">(</span><span class="n">nj</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="n">ni</span><span class="p">,</span><span class="n">nj</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>

<span class="k">def</span> <span class="nf">F</span><span class="p">(</span><span class="n">x</span><span class="p">):</span> <span class="k">return</span> <span class="n">M</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="n">m</span> <span class="o">=</span> <span class="p">[</span><span class="n">m1</span><span class="p">,</span><span class="n">m2</span><span class="p">]</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="s1">&#39;rou&#39;</span><span class="p">,</span> <span class="mf">1.</span><span class="p">)</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="s1">&#39;rov&#39;</span><span class="p">,</span> <span class="n">F</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">])</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="s1">&#39;row&#39;</span><span class="p">,</span> <span class="mf">0.</span><span class="p">)</span>
<span class="n">x0</span><span class="o">=</span><span class="mf">0.1</span><span class="p">;</span> <span class="n">y0</span><span class="o">=</span><span class="mf">5.</span><span class="p">;</span> <span class="n">z0</span><span class="o">=</span><span class="mf">0.5</span><span class="p">;</span> <span class="n">p</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">streamLine</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="p">(</span><span class="n">x0</span><span class="p">,</span><span class="n">y0</span><span class="p">,</span><span class="n">z0</span><span class="p">),[</span><span class="s1">&#39;rou&#39;</span><span class="p">,</span><span class="s1">&#39;rov&#39;</span><span class="p">,</span><span class="s1">&#39;row&#39;</span><span class="p">])</span>
<span class="n">C</span><span class="o">.</span><span class="n">convertArrays2File</span><span class="p">(</span><span class="n">m</span><span class="o">+</span><span class="p">[</span><span class="n">p</span><span class="p">],</span> <span class="s1">&#39;out.plt&#39;</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/streamLinePT.py">Streamline extraction (pyTree)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - streamLine (pyTree) -</span>
<span class="kn">import</span> <span class="nn">Converter.PyTree</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Post.PyTree</span> <span class="k">as</span> <span class="nn">P</span>
<span class="kn">import</span> <span class="nn">Generator.PyTree</span> <span class="k">as</span> <span class="nn">G</span>
<span class="kn">import</span> <span class="nn">math</span> <span class="k">as</span> <span class="nn">M</span>

<span class="k">def</span> <span class="nf">F</span><span class="p">(</span><span class="n">x</span><span class="p">):</span> <span class="k">return</span> <span class="n">M</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">ni</span> <span class="o">=</span> <span class="mi">30</span><span class="p">;</span> <span class="n">nj</span> <span class="o">=</span> <span class="mi">40</span>
<span class="n">m1</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cart</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mf">10.</span><span class="o">/</span><span class="p">(</span><span class="n">ni</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mf">10.</span><span class="o">/</span><span class="p">(</span><span class="n">nj</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="n">ni</span><span class="p">,</span><span class="n">nj</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
<span class="n">m2</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cart</span><span class="p">((</span><span class="mf">5.5</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mf">9.</span><span class="o">/</span><span class="p">(</span><span class="n">ni</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mf">9.</span><span class="o">/</span><span class="p">(</span><span class="n">nj</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="n">ni</span><span class="p">,</span><span class="n">nj</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">newPyTree</span><span class="p">([</span><span class="s1">&#39;Base&#39;</span><span class="p">,</span><span class="s1">&#39;StreamR&#39;</span><span class="p">]);</span> <span class="n">t</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">m1</span><span class="p">,</span><span class="n">m2</span><span class="p">]</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="s1">&#39;vx&#39;</span><span class="p">,</span> <span class="mf">1.</span><span class="p">)</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="s1">&#39;vy&#39;</span><span class="p">,</span> <span class="n">F</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;CoordinateX&#39;</span><span class="p">])</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="s1">&#39;vz&#39;</span><span class="p">,</span> <span class="mf">0.</span><span class="p">)</span>
<span class="n">x0</span><span class="o">=</span><span class="mf">0.1</span><span class="p">;</span> <span class="n">y0</span><span class="o">=</span><span class="mf">5.</span><span class="p">;</span> <span class="n">z0</span><span class="o">=</span><span class="mf">0.5</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">streamLine</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="p">(</span><span class="n">x0</span><span class="p">,</span><span class="n">y0</span><span class="p">,</span><span class="n">z0</span><span class="p">),[</span><span class="s1">&#39;vx&#39;</span><span class="p">,</span><span class="s1">&#39;vy&#39;</span><span class="p">,</span><span class="s1">&#39;vz&#39;</span><span class="p">])</span>
<span class="n">C</span><span class="o">.</span><span class="n">convertPyTree2File</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="s2">&quot;out.cgns&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<hr class="docutils" />
<dl class="py function">
<dt class="sig sig-object py" id="Post.streamRibbon">
<span class="sig-prename descclassname"><span class="pre">Post.</span></span><span class="sig-name descname"><span class="pre">streamRibbon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(x0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">z0)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(nx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ny</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nz)</span></span></em>, <span class="optional">[</span><em class="sig-param"><span class="n"><span class="pre">'v1'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">'v2'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">'v3'</span></span></em>, <span class="optional">]</span><em class="sig-param"><span class="n"><span class="pre">N=2000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dir=2</span></span></em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl>
<dt>0    Compute the stream ribbon starting from point (x0,y0,z0), of width and direction given by the vector (nx,ny,nz).</dt><dd><p>This vector must be roughly orthogonal to the vector [&#8216;v1&#8217;, &#8216;v2&#8217;, &#8216;v3&#8217;] at point (x0,y0,z0).
The output yields the set of N extracted points on the stream ribbon,
and the input fields at these points. The stream ribbon computation
stops when the current point is not interpolable from the input grids.</p>
<p><em>Example of use:</em></p>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/streamRibbon.py">Stream ribbon extraction (array)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - streamRibbon (array) -</span>
<span class="kn">import</span> <span class="nn">Converter</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Post</span> <span class="k">as</span> <span class="nn">P</span>
<span class="kn">import</span> <span class="nn">Generator</span> <span class="k">as</span> <span class="nn">G</span>
<span class="kn">import</span> <span class="nn">math</span> <span class="k">as</span> <span class="nn">M</span>

<span class="n">ni</span> <span class="o">=</span> <span class="mi">30</span><span class="p">;</span> <span class="n">nj</span> <span class="o">=</span> <span class="mi">40</span>
<span class="k">def</span> <span class="nf">F</span><span class="p">(</span><span class="n">x</span><span class="p">):</span> <span class="k">return</span> <span class="n">M</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="n">m1</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cart</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mf">10.</span><span class="o">/</span><span class="p">(</span><span class="n">ni</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mf">10.</span><span class="o">/</span><span class="p">(</span><span class="n">nj</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="n">ni</span><span class="p">,</span><span class="n">nj</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
<span class="n">m2</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cart</span><span class="p">((</span><span class="mf">5.5</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mf">9.</span><span class="o">/</span><span class="p">(</span><span class="n">ni</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mf">9.</span><span class="o">/</span><span class="p">(</span><span class="n">nj</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="n">ni</span><span class="p">,</span><span class="n">nj</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
<span class="n">m</span> <span class="o">=</span> <span class="p">[</span><span class="n">m1</span><span class="p">,</span><span class="n">m2</span><span class="p">]</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="s1">&#39;rou&#39;</span><span class="p">,</span> <span class="mf">1.</span><span class="p">)</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="s1">&#39;rov&#39;</span><span class="p">,</span> <span class="n">F</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">])</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="s1">&#39;row&#39;</span><span class="p">,</span> <span class="mf">0.</span><span class="p">)</span>
<span class="n">x0</span><span class="o">=</span><span class="mf">0.1</span><span class="p">;</span> <span class="n">y0</span><span class="o">=</span><span class="mf">5.</span><span class="p">;</span> <span class="n">z0</span><span class="o">=</span><span class="mf">0.5</span><span class="p">;</span> <span class="n">p</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">streamRibbon</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="p">(</span><span class="n">x0</span><span class="p">,</span><span class="n">y0</span><span class="p">,</span><span class="n">z0</span><span class="p">),(</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.2</span><span class="p">,</span><span class="mf">0.</span><span class="p">),[</span><span class="s1">&#39;rou&#39;</span><span class="p">,</span><span class="s1">&#39;rov&#39;</span><span class="p">,</span><span class="s1">&#39;row&#39;</span><span class="p">])</span>
<span class="n">C</span><span class="o">.</span><span class="n">convertArrays2File</span><span class="p">(</span><span class="n">m</span><span class="o">+</span><span class="p">[</span><span class="n">p</span><span class="p">],</span> <span class="s1">&#39;out.plt&#39;</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/streamRibbonPT.py">Stream ribbon extraction (pyTree)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - streamRibbon (pyTree) -</span>
<span class="kn">import</span> <span class="nn">Converter.PyTree</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Post.PyTree</span> <span class="k">as</span> <span class="nn">P</span>
<span class="kn">import</span> <span class="nn">Generator.PyTree</span> <span class="k">as</span> <span class="nn">G</span>
<span class="kn">import</span> <span class="nn">math</span> <span class="k">as</span> <span class="nn">M</span>

<span class="k">def</span> <span class="nf">F</span><span class="p">(</span><span class="n">x</span><span class="p">):</span> <span class="k">return</span> <span class="n">M</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">ni</span> <span class="o">=</span> <span class="mi">30</span><span class="p">;</span> <span class="n">nj</span> <span class="o">=</span> <span class="mi">40</span>
<span class="n">m1</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cart</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mf">10.</span><span class="o">/</span><span class="p">(</span><span class="n">ni</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mf">10.</span><span class="o">/</span><span class="p">(</span><span class="n">nj</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="n">ni</span><span class="p">,</span><span class="n">nj</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
<span class="n">m2</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cart</span><span class="p">((</span><span class="mf">5.5</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mf">9.</span><span class="o">/</span><span class="p">(</span><span class="n">ni</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mf">9.</span><span class="o">/</span><span class="p">(</span><span class="n">nj</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="n">ni</span><span class="p">,</span><span class="n">nj</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">newPyTree</span><span class="p">([</span><span class="s1">&#39;Base&#39;</span><span class="p">,</span><span class="s1">&#39;StreamR&#39;</span><span class="p">]);</span> <span class="n">t</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">m1</span><span class="p">,</span><span class="n">m2</span><span class="p">]</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="s1">&#39;vx&#39;</span><span class="p">,</span> <span class="mf">1.</span><span class="p">)</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="s1">&#39;vy&#39;</span><span class="p">,</span> <span class="n">F</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;CoordinateX&#39;</span><span class="p">])</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="s1">&#39;vz&#39;</span><span class="p">,</span> <span class="mf">0.</span><span class="p">)</span>
<span class="n">x0</span><span class="o">=</span><span class="mf">0.1</span><span class="p">;</span> <span class="n">y0</span><span class="o">=</span><span class="mf">5.</span><span class="p">;</span> <span class="n">z0</span><span class="o">=</span><span class="mf">0.5</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">streamRibbon</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="p">(</span><span class="n">x0</span><span class="p">,</span><span class="n">y0</span><span class="p">,</span><span class="n">z0</span><span class="p">),(</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.2</span><span class="p">,</span><span class="mf">0.</span><span class="p">),[</span><span class="s1">&#39;vx&#39;</span><span class="p">,</span><span class="s1">&#39;vy&#39;</span><span class="p">,</span><span class="s1">&#39;vz&#39;</span><span class="p">])</span>
<span class="n">C</span><span class="o">.</span><span class="n">convertPyTree2File</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="s2">&quot;out.cgns&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd>
</dl>
<hr class="docutils" />
<dl class="py function">
<dt class="sig sig-object py" id="Post.streamSurf">
<span class="sig-prename descclassname"><span class="pre">Post.</span></span><span class="sig-name descname"><span class="pre">streamSurf</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">c</span></span></em>, <span class="optional">[</span><em class="sig-param"><span class="n"><span class="pre">'v1'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">'v2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">'v3'</span></span></em>, <span class="optional">]</span><em class="sig-param"><span class="n"><span class="pre">N=2000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dir=1</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Compute the stream surface starting from a BAR array c.</p>
<p><em>Example of use:</em></p>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/streamSurf.py">Stream surface extraction (array)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - streamSurf (array) -</span>
<span class="kn">import</span> <span class="nn">Converter</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Post</span> <span class="k">as</span> <span class="nn">P</span>
<span class="kn">import</span> <span class="nn">Generator</span> <span class="k">as</span> <span class="nn">G</span>
<span class="kn">import</span> <span class="nn">Geom</span> <span class="k">as</span> <span class="nn">D</span>
<span class="kn">import</span> <span class="nn">math</span> <span class="k">as</span> <span class="nn">M</span>

<span class="n">ni</span> <span class="o">=</span> <span class="mi">30</span><span class="p">;</span> <span class="n">nj</span> <span class="o">=</span> <span class="mi">40</span>

<span class="c1"># Node mesh</span>
<span class="n">m1</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cart</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mf">10.</span><span class="o">/</span><span class="p">(</span><span class="n">ni</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mf">10.</span><span class="o">/</span><span class="p">(</span><span class="n">nj</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="n">ni</span><span class="p">,</span><span class="n">nj</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
<span class="n">m2</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cart</span><span class="p">((</span><span class="mf">5.5</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mf">9.</span><span class="o">/</span><span class="p">(</span><span class="n">ni</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mf">9.</span><span class="o">/</span><span class="p">(</span><span class="n">nj</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="n">ni</span><span class="p">,</span><span class="n">nj</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">D</span><span class="o">.</span><span class="n">line</span><span class="p">((</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">5.</span><span class="p">,</span><span class="mf">0.1</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">5.</span><span class="p">,</span><span class="mf">3.9</span><span class="p">),</span> <span class="n">N</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">convertArray2Tetra</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="n">m</span> <span class="o">=</span> <span class="p">[</span><span class="n">m1</span><span class="p">,</span><span class="n">m2</span><span class="p">]</span>
<span class="k">def</span> <span class="nf">F</span><span class="p">(</span><span class="n">x</span><span class="p">):</span> <span class="k">return</span> <span class="n">M</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="n">m</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="s1">&#39;rou&#39;</span><span class="p">,</span> <span class="mf">1.</span><span class="p">)</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="s1">&#39;rov&#39;</span><span class="p">,</span> <span class="n">F</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">])</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="s1">&#39;row&#39;</span><span class="p">,</span> <span class="mf">0.</span><span class="p">)</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">streamSurf</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">b</span><span class="p">,[</span><span class="s1">&#39;rou&#39;</span><span class="p">,</span><span class="s1">&#39;rov&#39;</span><span class="p">,</span><span class="s1">&#39;row&#39;</span><span class="p">])</span>
<span class="n">C</span><span class="o">.</span><span class="n">convertArrays2File</span><span class="p">(</span><span class="n">m</span><span class="o">+</span><span class="p">[</span><span class="n">p</span><span class="p">],</span> <span class="s1">&#39;out.plt&#39;</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/streamSurfPT.py">Stream surface extraction (pyTree)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - streamSurf (pyTree) -</span>
<span class="kn">import</span> <span class="nn">Converter.PyTree</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Post.PyTree</span> <span class="k">as</span> <span class="nn">P</span>
<span class="kn">import</span> <span class="nn">Generator.PyTree</span> <span class="k">as</span> <span class="nn">G</span>
<span class="kn">import</span> <span class="nn">Geom.PyTree</span> <span class="k">as</span> <span class="nn">D</span>

<span class="n">ni</span> <span class="o">=</span> <span class="mi">30</span><span class="p">;</span> <span class="n">nj</span> <span class="o">=</span> <span class="mi">40</span><span class="p">;</span> <span class="n">nk</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">m1</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cart</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mf">10.</span><span class="o">/</span><span class="p">(</span><span class="n">ni</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mf">10.</span><span class="o">/</span><span class="p">(</span><span class="n">nj</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="n">ni</span><span class="p">,</span><span class="n">nj</span><span class="p">,</span><span class="n">nk</span><span class="p">));</span> <span class="n">m1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;cart1&#39;</span>
<span class="n">m2</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cart</span><span class="p">((</span><span class="mf">5.5</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mf">9.</span><span class="o">/</span><span class="p">(</span><span class="n">ni</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mf">9.</span><span class="o">/</span><span class="p">(</span><span class="n">nj</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="n">ni</span><span class="p">,</span><span class="n">nj</span><span class="p">,</span><span class="n">nk</span><span class="p">));</span> <span class="n">m2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;cart2&#39;</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">D</span><span class="o">.</span><span class="n">line</span><span class="p">((</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">5.</span><span class="p">,</span><span class="mf">0.1</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">5.</span><span class="p">,</span><span class="mf">3.9</span><span class="p">),</span> <span class="n">N</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">convertArray2Tetra</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>

<span class="n">t</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">newPyTree</span><span class="p">([</span><span class="s1">&#39;Base&#39;</span><span class="p">,</span><span class="n">m1</span><span class="p">,</span><span class="n">m2</span><span class="p">])</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="s1">&#39;vx&#39;</span><span class="p">,</span> <span class="mf">1.</span><span class="p">)</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">{vy}</span><span class="s1">=cos(</span><span class="si">{CoordinateX}</span><span class="s1">)&#39;</span><span class="p">)</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="s1">&#39;vz&#39;</span><span class="p">,</span> <span class="mf">0.</span><span class="p">)</span>
<span class="n">x0</span><span class="o">=</span><span class="mf">0.1</span><span class="p">;</span> <span class="n">y0</span><span class="o">=</span><span class="mf">5.</span><span class="p">;</span> <span class="n">z0</span><span class="o">=</span><span class="mf">0.5</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">streamSurf</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;vx&#39;</span><span class="p">,</span><span class="s1">&#39;vy&#39;</span><span class="p">,</span><span class="s1">&#39;vz&#39;</span><span class="p">])</span>
<span class="n">C</span><span class="o">.</span><span class="n">convertPyTree2File</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="s2">&quot;out.cgns&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
<hr class="docutils" />
<section id="isos">
<h3>Isos</h3>
<dl class="py function">
<dt class="sig sig-object py" id="Post.isoLine">
<span class="sig-prename descclassname"><span class="pre">Post.</span></span><span class="sig-name descname"><span class="pre">isoLine</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">val</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Compute an isoline correponding to value val of field.</p>
<p><em>Example of use:</em></p>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/isoLine.py">Isoline computation (array)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - isoLine (array) -</span>
<span class="kn">import</span> <span class="nn">Post</span> <span class="k">as</span> <span class="nn">P</span>
<span class="kn">import</span> <span class="nn">Converter</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Generator</span> <span class="k">as</span> <span class="nn">G</span>

<span class="k">def</span> <span class="nf">F</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span> <span class="k">return</span> <span class="n">x</span><span class="o">*</span><span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="o">*</span><span class="n">y</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cartTetra</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;field&#39;</span><span class="p">,</span> <span class="n">F</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span><span class="s1">&#39;y&#39;</span><span class="p">])</span>

<span class="n">isos</span> <span class="o">=</span> <span class="p">[]</span>
<span class="nb">min</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">getMinValue</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;field&#39;</span><span class="p">)</span>
<span class="nb">max</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">getMaxValue</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;field&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">20</span><span class="p">):</span>
    <span class="n">value</span> <span class="o">=</span> <span class="nb">min</span> <span class="o">+</span> <span class="p">(</span><span class="nb">max</span><span class="o">-</span><span class="nb">min</span><span class="p">)</span><span class="o">/</span><span class="mf">18.</span><span class="o">*</span><span class="n">v</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">i</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">isoLine</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;field&#39;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">!=</span> <span class="p">[]:</span> <span class="n">isos</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="k">except</span><span class="p">:</span> <span class="k">pass</span>
<span class="n">C</span><span class="o">.</span><span class="n">convertArrays2File</span><span class="p">([</span><span class="n">a</span><span class="p">]</span><span class="o">+</span><span class="n">isos</span><span class="p">,</span> <span class="s1">&#39;out.plt&#39;</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/isoLinePT.py">Isoline (pyTree)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - isoLine (pyTree) -</span>
<span class="kn">import</span> <span class="nn">Post.PyTree</span> <span class="k">as</span> <span class="nn">P</span>
<span class="kn">import</span> <span class="nn">Converter.PyTree</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Generator.PyTree</span> <span class="k">as</span> <span class="nn">G</span>

<span class="k">def</span> <span class="nf">F</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span> <span class="k">return</span> <span class="n">x</span><span class="o">*</span><span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="o">*</span><span class="n">y</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cartTetra</span><span class="p">(</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;field&#39;</span><span class="p">,</span> <span class="n">F</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;CoordinateX&#39;</span><span class="p">,</span><span class="s1">&#39;CoordinateY&#39;</span><span class="p">])</span>

<span class="n">isos</span> <span class="o">=</span> <span class="p">[]</span>
<span class="nb">min</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">getMinValue</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;field&#39;</span><span class="p">)</span>
<span class="nb">max</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">getMaxValue</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;field&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">20</span><span class="p">):</span>
    <span class="n">value</span> <span class="o">=</span> <span class="nb">min</span> <span class="o">+</span> <span class="p">(</span><span class="nb">max</span><span class="o">-</span><span class="nb">min</span><span class="p">)</span><span class="o">/</span><span class="mf">18.</span><span class="o">*</span><span class="n">v</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">i</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">isoLine</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;field&#39;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
        <span class="n">isos</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="k">except</span><span class="p">:</span> <span class="k">pass</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">newPyTree</span><span class="p">([</span><span class="s1">&#39;Base&#39;</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="s1">&#39;ISOS&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
<span class="n">t</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="n">t</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">2</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">+=</span> <span class="n">isos</span>
<span class="n">C</span><span class="o">.</span><span class="n">convertPyTree2File</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="s1">&#39;out.cgns&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<hr class="docutils" />
<dl class="py function">
<dt class="sig sig-object py" id="Post.isoSurf">
<span class="sig-prename descclassname"><span class="pre">Post.</span></span><span class="sig-name descname"><span class="pre">isoSurf</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">val</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vars</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">split</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'simple'</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Compute an isosurface corresponding to value val of field (using marching
tetrahedra). Resulting solution is always located in nodes.
Return a list of two zones (one TRI and one BAR, if relevant).
If vars (for ex: [&#8216;centers:F&#8217;, &#8216;G&#8217;]) is given, extract only given variables.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>a</strong> (<em>[</em><em>array</em><em>, </em><em>list</em><em> of </em><em>arrays</em><em>] or </em><em>[</em><em>pyTree</em><em>, </em><em>base</em><em>, </em><em>zone</em><em>, </em><em>list</em><em> of </em><em>zones</em><em>]</em>) &#8211; input data</p></li>
<li><p><strong>field</strong> (<em>string</em>) &#8211; field name used in iso computation</p></li>
<li><p><strong>val</strong> (<em>float</em>) &#8211; value of field for extraction</p></li>
<li><p><strong>vars</strong> (<em>list</em><em> of </em><em>strings</em>) &#8211; list of variable names you want to see on final iso-surface</p></li>
<li><p><strong>split</strong> (<em>string</em>) &#8211; &#8216;simple&#8217; or &#8216;withBarycenters&#8217;, used in decomposing a in tetra (if needed)</p></li>
</ul>
</dd>
</dl>
<p><em>Example of use:</em></p>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/isoSurf.py">Isosurface extraction by marching tetra (array)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - isoSurf (array) -</span>
<span class="kn">import</span> <span class="nn">Post</span> <span class="k">as</span> <span class="nn">P</span>
<span class="kn">import</span> <span class="nn">Converter</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Generator</span> <span class="k">as</span> <span class="nn">G</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cartTetra</span><span class="p">((</span><span class="o">-</span><span class="mi">20</span><span class="p">,</span><span class="o">-</span><span class="mi">20</span><span class="p">,</span><span class="o">-</span><span class="mi">20</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.25</span><span class="p">,</span><span class="mf">0.25</span><span class="p">,</span><span class="mf">0.5</span><span class="p">),</span> <span class="p">(</span><span class="mi">100</span><span class="p">,</span><span class="mi">100</span><span class="p">,</span><span class="mi">50</span><span class="p">))</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">{field}</span><span class="s1">=</span><span class="si">{x}</span><span class="s1">*</span><span class="si">{x}</span><span class="s1">+</span><span class="si">{y}</span><span class="s1">*</span><span class="si">{y}</span><span class="s1">+</span><span class="si">{z}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">iso</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">isoSurf</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;field&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mf">5.</span><span class="p">)</span>
<span class="n">C</span><span class="o">.</span><span class="n">convertArrays2File</span><span class="p">(</span><span class="n">iso</span><span class="p">,</span> <span class="s1">&#39;out.plt&#39;</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/isoSurfPT.py">Isosurface extraction by marching tetra (pyTree)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - isoSurf (pyTree) -</span>
<span class="kn">import</span> <span class="nn">Post.PyTree</span> <span class="k">as</span> <span class="nn">P</span>
<span class="kn">import</span> <span class="nn">Converter.PyTree</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Generator.PyTree</span> <span class="k">as</span> <span class="nn">G</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cartTetra</span><span class="p">((</span><span class="o">-</span><span class="mi">20</span><span class="p">,</span><span class="o">-</span><span class="mi">20</span><span class="p">,</span><span class="o">-</span><span class="mi">20</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.5</span><span class="p">,</span><span class="mf">0.5</span><span class="p">,</span><span class="mf">0.5</span><span class="p">),</span> <span class="p">(</span><span class="mi">50</span><span class="p">,</span><span class="mi">50</span><span class="p">,</span><span class="mi">50</span><span class="p">))</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">{field}</span><span class="s1">=</span><span class="si">{CoordinateX}</span><span class="s1">*</span><span class="si">{CoordinateX}</span><span class="s1">+</span><span class="si">{CoordinateY}</span><span class="s1">*</span><span class="si">{CoordinateY}</span><span class="s1">+</span><span class="si">{CoordinateZ}</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="n">iso</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">isoSurf</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;field&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mf">5.</span><span class="p">)</span>
<span class="n">C</span><span class="o">.</span><span class="n">convertPyTree2File</span><span class="p">(</span><span class="n">iso</span><span class="p">,</span> <span class="s1">&#39;out.cgns&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<hr class="docutils" />
<dl class="py function">
<dt class="sig sig-object py" id="Post.isoSurfMC">
<span class="sig-prename descclassname"><span class="pre">Post.</span></span><span class="sig-name descname"><span class="pre">isoSurfMC</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">val</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vars</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">split</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'simple'</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Compute an isosurface corresponding to value val of field (using marching
cubes). Resulting solution is always located in nodes.
If vars (for ex: [&#8216;centers:F&#8217;, &#8216;G&#8217;]) is given, extract only given variables.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>a</strong> (<em>[</em><em>array</em><em>, </em><em>list</em><em> of </em><em>arrays</em><em>] or </em><em>[</em><em>pyTree</em><em>, </em><em>base</em><em>, </em><em>zone</em><em>, </em><em>list</em><em> of </em><em>zones</em><em>]</em>) &#8211; input data</p></li>
<li><p><strong>field</strong> (<em>string</em>) &#8211; field name used in iso computation</p></li>
<li><p><strong>val</strong> (<em>float</em>) &#8211; value of field for extraction</p></li>
<li><p><strong>vars</strong> (<em>list</em><em> of </em><em>strings</em>) &#8211; list of variable names you want to see on final iso-surface</p></li>
<li><p><strong>split</strong> (<em>string</em>) &#8211; &#8216;simple&#8217; or &#8216;withBarycenters&#8217;, used in decomposing a in tetra (if needed)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a list of isosurface (one per original zones)</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list of arrays or list of zones</p>
</dd>
</dl>
<p><em>Example of use:</em></p>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/isoSurfMC.py">Isosurface by marching cube (array)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - isoSurfMC (array) -</span>
<span class="kn">import</span> <span class="nn">Post</span> <span class="k">as</span> <span class="nn">P</span>
<span class="kn">import</span> <span class="nn">Converter</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Generator</span> <span class="k">as</span> <span class="nn">G</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cartHexa</span><span class="p">((</span><span class="o">-</span><span class="mi">20</span><span class="p">,</span><span class="o">-</span><span class="mi">20</span><span class="p">,</span><span class="o">-</span><span class="mi">20</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.25</span><span class="p">,</span><span class="mf">0.25</span><span class="p">,</span><span class="mf">0.5</span><span class="p">),</span> <span class="p">(</span><span class="mi">100</span><span class="p">,</span><span class="mi">100</span><span class="p">,</span><span class="mi">50</span><span class="p">))</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">{field}</span><span class="s1">=</span><span class="si">{x}</span><span class="s1">*</span><span class="si">{x}</span><span class="s1">+</span><span class="si">{y}</span><span class="s1">*</span><span class="si">{y}</span><span class="s1">+</span><span class="si">{z}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">iso</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">isoSurfMC</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;field&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mf">5.</span><span class="p">)</span>
<span class="n">C</span><span class="o">.</span><span class="n">convertArrays2File</span><span class="p">(</span><span class="n">iso</span><span class="p">,</span> <span class="s1">&#39;out.plt&#39;</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/isoSurfMCPT.py">Isosurface by marching cube (pyTree)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - isoSurfMC (pyTree) -</span>
<span class="kn">import</span> <span class="nn">Post.PyTree</span> <span class="k">as</span> <span class="nn">P</span>
<span class="kn">import</span> <span class="nn">Converter.PyTree</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Generator.PyTree</span> <span class="k">as</span> <span class="nn">G</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cartHexa</span><span class="p">((</span><span class="o">-</span><span class="mi">20</span><span class="p">,</span><span class="o">-</span><span class="mi">20</span><span class="p">,</span><span class="o">-</span><span class="mi">20</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.5</span><span class="p">,</span><span class="mf">0.5</span><span class="p">,</span><span class="mf">0.5</span><span class="p">),</span> <span class="p">(</span><span class="mi">50</span><span class="p">,</span><span class="mi">50</span><span class="p">,</span><span class="mi">50</span><span class="p">))</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">{field}</span><span class="s1">=</span><span class="si">{CoordinateX}</span><span class="s1">*</span><span class="si">{CoordinateX}</span><span class="s1">+</span><span class="si">{CoordinateY}</span><span class="s1">*</span><span class="si">{CoordinateY}</span><span class="s1">+</span><span class="si">{CoordinateZ}</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="n">iso</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">isoSurfMC</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;field&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mf">5.</span><span class="p">)</span>
<span class="n">C</span><span class="o">.</span><span class="n">convertPyTree2File</span><span class="p">(</span><span class="n">iso</span><span class="p">,</span> <span class="s1">&#39;out.cgns&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
<hr class="docutils" />
<section id="solution-integration">
<h3>Solution integration</h3>
<blockquote>
<div><p>For all integration functions, the interface is different when using
Converter arrays interface or pyTree interface. For arrays, fields
must be input separately, for pyTree, they must be defined in
each zone.</p>
</div></blockquote>
<hr class="docutils" />
<dl class="py function">
<dt class="sig sig-object py" id="Post.integ">
<span class="sig-prename descclassname"><span class="pre">Post.</span></span><span class="sig-name descname"><span class="pre">integ</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'F'</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Compute the integral <span class="math notranslate nohighlight">\(\int F.dS\)</span> of a scalar field (whose name is in var string) over
the geometry defined by arrays containing the coordinates + field ( + an optional &#8220;ratio&#8221; field ).
Solution and ratio can be located at nodes or at centers.</p>
<p>For array interface:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">res</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">integ</span><span class="p">([</span><span class="n">coord</span><span class="p">],</span> <span class="p">[</span><span class="n">field</span><span class="p">],</span> <span class="p">[</span><span class="n">ratio</span><span class="p">]</span><span class="o">=</span><span class="p">[])</span>
</pre></div>
</div>
<p>For pyTree interface, the variable to be integrated can be specified. If no variable
is specified, all the fields located at nodes and centers are integrated:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">res</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">integ</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">var</span><span class="o">=</span><span class="s1">&#39;F&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>A</strong> (<em>[</em><em>array</em><em>, </em><em>list</em><em> of </em><em>arrays</em><em>] or </em><em>[</em><em>pyTree</em><em>, </em><em>base</em><em>, </em><em>zone</em><em>, </em><em>list</em><em> of </em><em>zones</em><em>]</em>) &#8211; input data</p></li>
<li><p><strong>var</strong> (<em>string</em>) &#8211; field name</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>the result of integration</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>a list of 1 float</p>
</dd>
</dl>
<p>Exists also as parallel distributed version (P.Mpi.integ).</p>
<p><em>Example of use:</em></p>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/integ.py">Scalar integration (array)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - integ (array) -</span>
<span class="kn">import</span> <span class="nn">Converter</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Generator</span> <span class="k">as</span> <span class="nn">G</span>
<span class="kn">import</span> <span class="nn">Post</span> <span class="k">as</span> <span class="nn">P</span>

<span class="c1"># Node mesh</span>
<span class="n">ni</span> <span class="o">=</span> <span class="mi">30</span><span class="p">;</span> <span class="n">nj</span> <span class="o">=</span> <span class="mi">40</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cart</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mf">10.</span><span class="o">/</span><span class="p">(</span><span class="n">ni</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mf">10.</span><span class="o">/</span><span class="p">(</span><span class="n">nj</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="n">ni</span><span class="p">,</span><span class="n">nj</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>

<span class="c1"># Field in centers</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="s1">&#39;vx&#39;</span><span class="p">,</span> <span class="n">ni</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">nj</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span> <span class="n">c</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="s1">&#39;vx&#39;</span><span class="p">,</span> <span class="mf">1.</span><span class="p">)</span>
<span class="n">resc</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">integ</span><span class="p">([</span><span class="n">m</span><span class="p">],</span> <span class="p">[</span><span class="n">c</span><span class="p">],</span> <span class="p">[])[</span><span class="mi">0</span><span class="p">];</span> <span class="nb">print</span><span class="p">(</span><span class="n">resc</span><span class="p">)</span>

<span class="c1"># Field in nodes</span>
<span class="n">cn</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="s1">&#39;vx&#39;</span><span class="p">,</span> <span class="n">ni</span><span class="p">,</span> <span class="n">nj</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span> <span class="n">cn</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">cn</span><span class="p">,</span> <span class="s1">&#39;vx&#39;</span><span class="p">,</span> <span class="mf">1.</span><span class="p">)</span>
<span class="n">resn</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">integ</span><span class="p">([</span><span class="n">m</span><span class="p">],</span> <span class="p">[</span><span class="n">cn</span><span class="p">],</span> <span class="p">[])[</span><span class="mi">0</span><span class="p">];</span> <span class="nb">print</span><span class="p">(</span><span class="n">resn</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/integPT.py">Scalar integration (pyTree)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - integ (pyTree) -</span>
<span class="kn">import</span> <span class="nn">Converter.PyTree</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Generator.PyTree</span> <span class="k">as</span> <span class="nn">G</span>
<span class="kn">import</span> <span class="nn">Post.PyTree</span> <span class="k">as</span> <span class="nn">P</span>

<span class="n">ni</span> <span class="o">=</span> <span class="mi">30</span><span class="p">;</span> <span class="n">nj</span> <span class="o">=</span> <span class="mi">40</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cart</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mf">10.</span><span class="o">/</span><span class="p">(</span><span class="n">ni</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mf">10.</span><span class="o">/</span><span class="p">(</span><span class="n">nj</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="n">ni</span><span class="p">,</span><span class="n">nj</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
<span class="n">C</span><span class="o">.</span><span class="n">_initVars</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="s1">&#39;vx&#39;</span><span class="p">,</span> <span class="mf">1.</span><span class="p">);</span> <span class="n">C</span><span class="o">.</span><span class="n">_initVars</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="s1">&#39;ratio&#39;</span><span class="p">,</span> <span class="mf">1.</span><span class="p">)</span>
<span class="n">resn</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">integ</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="s1">&#39;vx&#39;</span><span class="p">);</span> <span class="nb">print</span><span class="p">(</span><span class="n">resn</span><span class="p">)</span>
<span class="c1">#&gt;&gt; [99.99999999999989]</span>
</pre></div>
</div>
</dd></dl>

<hr class="docutils" />
<dl class="py function">
<dt class="sig sig-object py" id="Post.integNorm">
<span class="sig-prename descclassname"><span class="pre">Post.</span></span><span class="sig-name descname"><span class="pre">integNorm</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'F'</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Compute the integral <span class="math notranslate nohighlight">\(\int F.\vec n.dS\)</span> of a scalar field times the surface normal
over the geometry defined by coord. For array interface:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">P</span><span class="o">.</span><span class="n">integNorm</span><span class="p">([</span><span class="n">coord</span><span class="p">],</span> <span class="p">[</span><span class="n">field</span><span class="p">],</span> <span class="p">[</span><span class="n">ratio</span><span class="p">]</span><span class="o">=</span><span class="p">[])</span>
</pre></div>
</div>
<p>For pyTree interface, the variable to be integrated can be specified. If no variable
is specified, all the fields located at nodes and centers are integrated:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">P</span><span class="o">.</span><span class="n">integNorm</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">var</span><span class="o">=</span><span class="s1">&#39;F&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>A</strong> (<em>[</em><em>array</em><em>, </em><em>list</em><em> of </em><em>arrays</em><em>] or </em><em>[</em><em>pyTree</em><em>, </em><em>base</em><em>, </em><em>zone</em><em>, </em><em>list</em><em> of </em><em>zones</em><em>]</em>) &#8211; input data</p></li>
<li><p><strong>var</strong> (<em>string</em>) &#8211; field name</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>the result of integration</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>double list of 3 floats</p>
</dd>
</dl>
<p>Exists also as parallel distributed version (P.Mpi.integNorm).</p>
<p><em>Example of use:</em></p>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/integNorm.py">Integration dot the surface normal (array)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - integNorm (array) -</span>
<span class="kn">import</span> <span class="nn">Converter</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Generator</span> <span class="k">as</span> <span class="nn">G</span>
<span class="kn">import</span> <span class="nn">Post</span> <span class="k">as</span> <span class="nn">P</span>

<span class="c1"># Node mesh and field</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cartTetra</span><span class="p">((</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.2</span><span class="p">),</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
<span class="n">c1</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="s1">&#39;ro&#39;</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">162</span><span class="p">,</span> <span class="s1">&#39;TRI&#39;</span><span class="p">)</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">c1</span><span class="p">,</span> <span class="s1">&#39;ro&#39;</span><span class="p">,</span> <span class="mf">1.</span><span class="p">)</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">integNorm</span><span class="p">([</span><span class="n">m</span><span class="p">],</span> <span class="p">[</span><span class="n">c</span><span class="p">],</span> <span class="p">[]);</span> <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;res1 = </span><span class="si">%f</span><span class="s1">&#39;</span><span class="o">%</span><span class="n">res</span><span class="p">)</span>

<span class="c1"># Node mesh</span>
<span class="n">ni</span> <span class="o">=</span> <span class="mi">30</span><span class="p">;</span> <span class="n">nj</span> <span class="o">=</span> <span class="mi">40</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cart</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mf">10.</span><span class="o">/</span><span class="p">(</span><span class="n">ni</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mf">10.</span><span class="o">/</span><span class="p">(</span><span class="n">nj</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="n">ni</span><span class="p">,</span><span class="n">nj</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>

<span class="c1"># Centers field</span>
<span class="n">c1</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="s1">&#39;vx&#39;</span><span class="p">,</span> <span class="n">ni</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">nj</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">c1</span><span class="p">,</span> <span class="s1">&#39;vx&#39;</span><span class="p">,</span> <span class="mf">1.</span><span class="p">)</span>

<span class="c1"># Integration</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">integNorm</span><span class="p">([</span><span class="n">m</span><span class="p">],</span> <span class="p">[</span><span class="n">c</span><span class="p">],</span> <span class="p">[]);</span> <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;res2 = </span><span class="si">%f</span><span class="s1">&#39;</span><span class="o">%</span><span class="n">res</span><span class="p">)</span>

<span class="c1"># Node field</span>
<span class="n">c1</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="s1">&#39;vx, vy&#39;</span><span class="p">,</span> <span class="n">ni</span><span class="p">,</span> <span class="n">nj</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">cn</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">c1</span><span class="p">,</span> <span class="s1">&#39;vx&#39;</span><span class="p">,</span> <span class="mf">1.</span><span class="p">)</span>
<span class="n">cn</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">c1</span><span class="p">,</span> <span class="s1">&#39;vy&#39;</span><span class="p">,</span> <span class="mf">1.</span><span class="p">)</span>
<span class="n">resn</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">integNorm</span><span class="p">([</span><span class="n">m</span><span class="p">],</span> <span class="p">[</span><span class="n">cn</span><span class="p">],</span> <span class="p">[]);</span> <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;res3 = </span><span class="si">%f</span><span class="s1">&#39;</span><span class="o">%</span><span class="n">resn</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/integNormPT.py">Integration dot the surface normal (pyTree)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - integNorm (pyTree)-</span>
<span class="kn">import</span> <span class="nn">Converter.PyTree</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Generator.PyTree</span> <span class="k">as</span> <span class="nn">G</span>
<span class="kn">import</span> <span class="nn">Post.PyTree</span> <span class="k">as</span> <span class="nn">P</span>

<span class="c1"># Node mesh</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cartTetra</span><span class="p">((</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.2</span><span class="p">),</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="s1">&#39;Density&#39;</span><span class="p">,</span> <span class="mf">1.</span><span class="p">)</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">newPyTree</span><span class="p">([</span><span class="s1">&#39;Base&#39;</span><span class="p">,</span> <span class="n">m</span><span class="p">])</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">integNorm</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="s1">&#39;Density&#39;</span><span class="p">);</span> <span class="nb">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="c1">#&gt;&gt; [[0.0, 0.0, 0.8099999999999997]]</span>
</pre></div>
</div>
</dd></dl>

<hr class="docutils" />
<dl class="py function">
<dt class="sig sig-object py" id="Post.integNormProduct">
<span class="sig-prename descclassname"><span class="pre">Post.</span></span><span class="sig-name descname"><span class="pre">integNormProduct</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vector</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">['vx',</span> <span class="pre">'vy',</span> <span class="pre">'vz']</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Compute the integral <span class="math notranslate nohighlight">\(\int \vec V \times \vec n.dS\)</span> of a vector field times the surface normal
over the geometry defined by coord. The input field must have 3
variables. For array interface, field must be a vector field:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">res</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">integNormProduct</span><span class="p">([</span><span class="n">coord</span><span class="p">],</span> <span class="p">[</span><span class="n">field</span><span class="p">],</span> <span class="p">[</span><span class="n">ratio</span><span class="p">]</span><span class="o">=</span><span class="p">[])</span>
</pre></div>
</div>
<p>For pyTree interface, the vector field to be integrated must be specified:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">res</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">integNormProduct</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">vector</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;vx&#39;</span><span class="p">,</span><span class="s1">&#39;vy&#39;</span><span class="p">,</span><span class="s1">&#39;vz&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>Exists also as parallel distributed version (P.Mpi.integNormProduct).</p>
<p><em>Example of use:</em></p>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/integNormProduct.py">Integration cross the surface normal (array)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - integNormProduct (array) -</span>
<span class="kn">import</span> <span class="nn">Converter</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Generator</span> <span class="k">as</span> <span class="nn">G</span>
<span class="kn">import</span> <span class="nn">Post</span> <span class="k">as</span> <span class="nn">P</span>

<span class="c1"># Maillage et champs non structure, en noeuds</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cartTetra</span><span class="p">((</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.2</span><span class="p">),</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="s1">&#39;vx,vy,vz&#39;</span><span class="p">,</span> <span class="n">m</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">m</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="s1">&#39;TRI&#39;</span><span class="p">)</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="s1">&#39;vx,vy,vz&#39;</span><span class="p">,</span> <span class="mf">1.</span><span class="p">)</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">integNormProduct</span><span class="p">([</span><span class="n">m</span><span class="p">],</span> <span class="p">[</span><span class="n">c</span><span class="p">],</span> <span class="p">[]);</span> <span class="nb">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

<span class="c1"># Maillage en noeuds</span>
<span class="n">ni</span> <span class="o">=</span> <span class="mi">30</span><span class="p">;</span> <span class="n">nj</span> <span class="o">=</span> <span class="mi">40</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cart</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mf">10.</span><span class="o">/</span><span class="p">(</span><span class="n">ni</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mf">10.</span><span class="o">/</span><span class="p">(</span><span class="n">nj</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="n">ni</span><span class="p">,</span><span class="n">nj</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>

<span class="c1"># Champ a integrer en centres</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="s1">&#39;vx,vy,vz&#39;</span><span class="p">,</span> <span class="n">ni</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">nj</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="s1">&#39;vx,vy,vz&#39;</span><span class="p">,</span> <span class="mf">1.</span><span class="p">)</span>

<span class="c1"># Integration de chaque champ</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">integNormProduct</span><span class="p">([</span><span class="n">m</span><span class="p">],</span> <span class="p">[</span><span class="n">c</span><span class="p">],</span> <span class="p">[]);</span> <span class="nb">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

<span class="c1"># Champ a integrer en noeuds</span>
<span class="n">cn</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="s1">&#39;vx,vy,vz&#39;</span><span class="p">,</span> <span class="n">ni</span><span class="p">,</span> <span class="n">nj</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">cn</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">cn</span><span class="p">,</span> <span class="s1">&#39;vx,vy,vz&#39;</span><span class="p">,</span> <span class="mf">1.</span><span class="p">)</span>
<span class="n">resn</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">integNormProduct</span><span class="p">([</span><span class="n">m</span><span class="p">],</span> <span class="p">[</span><span class="n">cn</span><span class="p">],</span> <span class="p">[]);</span> <span class="nb">print</span><span class="p">(</span><span class="n">resn</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/integNormProductPT.py">Integration cross the surface normal (pyTree)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - integNormProduct (pyTree) -</span>
<span class="kn">import</span> <span class="nn">Converter.PyTree</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Generator.PyTree</span> <span class="k">as</span> <span class="nn">G</span>
<span class="kn">import</span> <span class="nn">Post.PyTree</span> <span class="k">as</span> <span class="nn">P</span>

<span class="n">ni</span> <span class="o">=</span> <span class="mi">30</span><span class="p">;</span> <span class="n">nj</span> <span class="o">=</span> <span class="mi">40</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cart</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mf">10.</span><span class="o">/</span><span class="p">(</span><span class="n">ni</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mf">10.</span><span class="o">/</span><span class="p">(</span><span class="n">nj</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="n">ni</span><span class="p">,</span><span class="n">nj</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">m</span><span class="p">,</span><span class="s1">&#39;MomentumX&#39;</span><span class="p">,</span><span class="mf">1.</span><span class="p">)</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">m</span><span class="p">,</span><span class="s1">&#39;MomentumY&#39;</span><span class="p">,</span><span class="mf">1.</span><span class="p">)</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">m</span><span class="p">,</span><span class="s1">&#39;MomentumZ&#39;</span><span class="p">,</span><span class="mf">1.</span><span class="p">)</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">integNormProduct</span><span class="p">(</span><span class="n">m</span><span class="p">,[</span><span class="s1">&#39;MomentumX&#39;</span><span class="p">,</span><span class="s1">&#39;MomentumY&#39;</span><span class="p">,</span><span class="s1">&#39;MomentumZ&#39;</span><span class="p">]);</span> <span class="nb">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="c1">#&gt;&gt; 100.0</span>
</pre></div>
</div>
</dd></dl>

<hr class="docutils" />
<dl class="py function">
<dt class="sig sig-object py" id="Post.integMoment">
<span class="sig-prename descclassname"><span class="pre">Post.</span></span><span class="sig-name descname"><span class="pre">integMoment</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">center</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0.,</span> <span class="pre">0.,</span> <span class="pre">0.)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vector</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">['vx',</span> <span class="pre">'vy',</span> <span class="pre">'vz']</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Compute the integral <span class="math notranslate nohighlight">\(\int \vec{CM} \times \vec V.dS\)</span> of a moment over the geometry defined by coord.
The input field must have 3 variables. center=(cx,cy,cz) are the center coordinates.</p>
<p>For array interface:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">res</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">integMoment</span><span class="p">([</span><span class="n">coord</span><span class="p">],</span> <span class="p">[</span><span class="n">field</span><span class="p">],</span> <span class="p">[</span><span class="n">ratio</span><span class="p">]</span><span class="o">=</span><span class="p">[],</span> <span class="n">center</span><span class="o">=</span><span class="p">(</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">))</span>
</pre></div>
</div>
<p>For pyTree interface, the vector of variables to be integrated must be specified:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">res</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">integMoment</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">center</span><span class="o">=</span><span class="p">(</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">),</span> <span class="n">vector</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;vx&#39;</span><span class="p">,</span><span class="s1">&#39;vy&#39;</span><span class="p">,</span><span class="s1">&#39;vz&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>Exists also as parallel distributed version (P.Mpi.integMoment).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>A</strong> (<em>[</em><em>array</em><em>, </em><em>list</em><em> of </em><em>arrays</em><em>] or </em><em>[</em><em>pyTree</em><em>, </em><em>base</em><em>, </em><em>zone</em><em>, </em><em>list</em><em> of </em><em>zones</em><em>]</em>) &#8211; input data</p></li>
<li><p><strong>vector</strong> (<em>list</em><em> of </em><em>3 strings</em>) &#8211; list of vector field names</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>the result of integration</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>a list of 3 floats</p>
</dd>
</dl>
<p><em>Example of use:</em></p>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/integMoment.py">Moment integration  (array)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - integMoment (array) -</span>
<span class="kn">import</span> <span class="nn">Converter</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Generator</span> <span class="k">as</span> <span class="nn">G</span>
<span class="kn">import</span> <span class="nn">Post</span> <span class="k">as</span> <span class="nn">P</span>

<span class="c1"># Maillage et champs non structure, en noeuds</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cartTetra</span><span class="p">((</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.2</span><span class="p">),</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="s1">&#39;vx,vy,vz&#39;</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">162</span><span class="p">,</span> <span class="s1">&#39;TRI&#39;</span><span class="p">)</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="s1">&#39;vx,vy,vz&#39;</span><span class="p">,</span> <span class="mf">1.</span><span class="p">)</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">integMoment</span><span class="p">([</span><span class="n">m</span><span class="p">],</span> <span class="p">[</span><span class="n">c</span><span class="p">],</span> <span class="p">[],</span> <span class="p">(</span><span class="mf">5.</span><span class="p">,</span><span class="mf">5.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">));</span> <span class="nb">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

<span class="c1"># Maillage en noeuds</span>
<span class="n">ni</span> <span class="o">=</span> <span class="mi">30</span><span class="p">;</span> <span class="n">nj</span> <span class="o">=</span> <span class="mi">40</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cart</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mf">10.</span><span class="o">/</span><span class="p">(</span><span class="n">ni</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mf">10.</span><span class="o">/</span><span class="p">(</span><span class="n">nj</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="n">ni</span><span class="p">,</span><span class="n">nj</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
<span class="n">C</span><span class="o">.</span><span class="n">convertArrays2File</span><span class="p">([</span><span class="n">m</span><span class="p">],</span> <span class="s2">&quot;new.plt&quot;</span><span class="p">,</span> <span class="s2">&quot;bin_tp&quot;</span><span class="p">)</span>

<span class="c1"># Champ a integrer en centres</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="s1">&#39;vx,vy,vz&#39;</span><span class="p">,</span> <span class="n">ni</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">nj</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="s1">&#39;vx,vy,vz&#39;</span><span class="p">,</span> <span class="mf">1.</span><span class="p">)</span>

<span class="c1"># Integration de chaque champ</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">integMoment</span><span class="p">([</span><span class="n">m</span><span class="p">],</span> <span class="p">[</span><span class="n">c</span><span class="p">],</span> <span class="p">[],</span> <span class="p">(</span><span class="mf">5.</span><span class="p">,</span><span class="mf">5.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">)</span> <span class="p">);</span> <span class="nb">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

<span class="c1"># Champ a integrer en noeuds</span>
<span class="n">cn</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="s1">&#39;vx,vy,vz&#39;</span><span class="p">,</span> <span class="n">ni</span><span class="p">,</span> <span class="n">nj</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">cn</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">cn</span><span class="p">,</span> <span class="s1">&#39;vx,vy,vz&#39;</span><span class="p">,</span> <span class="mf">1.</span><span class="p">)</span>
<span class="n">resn</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">integMoment</span><span class="p">([</span><span class="n">m</span><span class="p">],</span> <span class="p">[</span><span class="n">cn</span><span class="p">],</span> <span class="p">[],</span> <span class="p">(</span><span class="mf">5.</span><span class="p">,</span><span class="mf">5.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">));</span> <span class="nb">print</span><span class="p">(</span><span class="n">resn</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/integMomentPT.py">Moment integration  (pyTree)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - integMoment (pyTree) -</span>
<span class="kn">import</span> <span class="nn">Converter.PyTree</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Generator.PyTree</span> <span class="k">as</span> <span class="nn">G</span>
<span class="kn">import</span> <span class="nn">Post.PyTree</span> <span class="k">as</span> <span class="nn">P</span>

<span class="n">m</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cartTetra</span><span class="p">((</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.2</span><span class="p">),</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
<span class="n">C</span><span class="o">.</span><span class="n">_initVars</span><span class="p">(</span><span class="n">m</span><span class="p">,</span><span class="s1">&#39;vx&#39;</span><span class="p">,</span><span class="mf">1.</span><span class="p">);</span> <span class="n">C</span><span class="o">.</span><span class="n">_initVars</span><span class="p">(</span><span class="n">m</span><span class="p">,</span><span class="s1">&#39;vy&#39;</span><span class="p">,</span><span class="mf">0.</span><span class="p">);</span> <span class="n">C</span><span class="o">.</span><span class="n">_initVars</span><span class="p">(</span><span class="n">m</span><span class="p">,</span><span class="s1">&#39;vz&#39;</span><span class="p">,</span><span class="mf">0.</span><span class="p">)</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">integMoment</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">center</span><span class="o">=</span><span class="p">(</span><span class="mf">5.</span><span class="p">,</span><span class="mf">5.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">),</span> <span class="n">vector</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;vx&#39;</span><span class="p">,</span><span class="s1">&#39;vy&#39;</span><span class="p">,</span><span class="s1">&#39;vz&#39;</span><span class="p">]);</span> <span class="nb">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="c1">#&gt;&gt; [0.0, 0.0, 3.6854999999999976]</span>
</pre></div>
</div>
</dd></dl>

<hr class="docutils" />
<dl class="py function">
<dt class="sig sig-object py" id="Post.integMomentNorm">
<span class="sig-prename descclassname"><span class="pre">Post.</span></span><span class="sig-name descname"><span class="pre">integMomentNorm</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">center</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(cx,</span> <span class="pre">cy,</span> <span class="pre">cz)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'F'</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Compute the integral <span class="math notranslate nohighlight">\(\int \vec{CM} \times F.\vec n. dS\)</span> of a moment over the geometry
defined by coord, taking into account the surface normal. The input field is a scalar.</p>
<p>For array interface:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">res</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">integMomentNorm</span><span class="p">([</span><span class="n">coord</span><span class="p">],</span> <span class="p">[</span><span class="n">field</span><span class="p">],</span> <span class="p">[</span><span class="n">ratio</span><span class="p">]</span><span class="o">=</span><span class="p">[],</span> <span class="n">center</span><span class="o">=</span><span class="p">(</span><span class="n">cx</span><span class="p">,</span><span class="n">cy</span><span class="p">,</span><span class="n">cz</span><span class="p">))</span>
</pre></div>
</div>
<p>For pyTree interface, the variable to be integrated can be specified. If no variable
is specified, all the fields located at nodes and centers are integrated:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">res</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">integMomentNorm</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">center</span><span class="o">=</span><span class="p">(</span><span class="n">cx</span><span class="p">,</span><span class="n">cy</span><span class="p">,</span><span class="n">cz</span><span class="p">),</span> <span class="n">var</span><span class="o">=</span><span class="s1">&#39;F&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>A</strong> (<em>[</em><em>array</em><em>, </em><em>list</em><em> of </em><em>arrays</em><em>] or </em><em>[</em><em>pyTree</em><em>, </em><em>base</em><em>, </em><em>zone</em><em>, </em><em>list</em><em> of </em><em>zones</em><em>]</em>) &#8211; input data</p></li>
<li><p><strong>var</strong> (<em>string</em>) &#8211; field name</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>the result of integration</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>a list of 3 floats</p>
</dd>
</dl>
<p>Exists also as parallel distributed version (P.Mpi.integMomentNorm).</p>
<p><em>Example of use:</em></p>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/integMomentNorm.py">Moment integration with normal (array)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - integMomentNorm (array) -</span>
<span class="kn">import</span> <span class="nn">Converter</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Generator</span> <span class="k">as</span> <span class="nn">G</span>
<span class="kn">import</span> <span class="nn">Post</span> <span class="k">as</span> <span class="nn">P</span>

<span class="c1"># Maillage et champs non structure, en noeuds</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cartTetra</span><span class="p">((</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.2</span><span class="p">),</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="s1">&#39;ro&#39;</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">162</span><span class="p">,</span> <span class="s1">&#39;TRI&#39;</span><span class="p">)</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="s1">&#39;ro&#39;</span><span class="p">,</span> <span class="mf">1.</span><span class="p">)</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">integMomentNorm</span><span class="p">([</span><span class="n">m</span><span class="p">],</span> <span class="p">[</span><span class="n">c</span><span class="p">],</span> <span class="p">[],</span> <span class="p">(</span><span class="mf">5.</span><span class="p">,</span><span class="mf">5.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">));</span> <span class="nb">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

<span class="c1"># Maillage en noeuds</span>
<span class="n">ni</span> <span class="o">=</span> <span class="mi">30</span><span class="p">;</span> <span class="n">nj</span> <span class="o">=</span> <span class="mi">40</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cart</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mf">10.</span><span class="o">/</span><span class="p">(</span><span class="n">ni</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mf">10.</span><span class="o">/</span><span class="p">(</span><span class="n">nj</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="n">ni</span><span class="p">,</span><span class="n">nj</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>

<span class="c1"># Champ a integrer en centres</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="s1">&#39;v&#39;</span><span class="p">,</span> <span class="n">ni</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">nj</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="s1">&#39;v&#39;</span><span class="p">,</span> <span class="mf">1.</span><span class="p">)</span>

<span class="c1"># Integration de chaque champ</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">integMomentNorm</span><span class="p">([</span><span class="n">m</span><span class="p">],</span> <span class="p">[</span><span class="n">c</span><span class="p">],</span> <span class="p">[],</span> <span class="p">(</span><span class="mf">5.</span><span class="p">,</span><span class="mf">5.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">)</span> <span class="p">);</span> <span class="nb">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

<span class="c1"># Champ a integrer en noeuds</span>
<span class="n">cn</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="s1">&#39;v&#39;</span><span class="p">,</span> <span class="n">ni</span><span class="p">,</span> <span class="n">nj</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">cn</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">cn</span><span class="p">,</span> <span class="s1">&#39;v&#39;</span><span class="p">,</span> <span class="mf">1.</span><span class="p">)</span>
<span class="n">resn</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">integMomentNorm</span><span class="p">([</span><span class="n">m</span><span class="p">],</span> <span class="p">[</span><span class="n">cn</span><span class="p">],</span> <span class="p">[],</span> <span class="p">(</span><span class="mf">5.</span><span class="p">,</span><span class="mf">5.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">));</span> <span class="nb">print</span><span class="p">(</span><span class="n">resn</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p><a class="reference external" href="Examples/Post/integMomentNormPT.py">Moment integration with normal (pyTree)</a>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># - integMomentNorm (pyTree)-</span>
<span class="kn">import</span> <span class="nn">Converter.PyTree</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">Generator.PyTree</span> <span class="k">as</span> <span class="nn">G</span>
<span class="kn">import</span> <span class="nn">Post.PyTree</span> <span class="k">as</span> <span class="nn">P</span>

<span class="n">m</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">cartTetra</span><span class="p">((</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.2</span><span class="p">),</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">initVars</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="s1">&#39;Density&#39;</span><span class="p">,</span> <span class="mf">1.</span><span class="p">)</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">integMomentNorm</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">var</span><span class="o">=</span><span class="s1">&#39;Density&#39;</span><span class="p">,</span> <span class="n">center</span><span class="o">=</span><span class="p">(</span><span class="mf">5.</span><span class="p">,</span><span class="mf">5.</span><span class="p">,</span><span class="mf">0.</span><span class="p">));</span> <span class="nb">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="c1">#&gt;&gt; [[-3.685500000000002, 3.6855, 0.0]]</span>
</pre></div>
</div>
</dd></dl>

<hr class="docutils" />
<div class="toctree-wrapper compound">
</div>
</section>
</section>
<section id="index">
<h2>Index</h2>
<ul class="simple">
<li><p><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></p></li>
<li><p><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></p></li>
<li><p><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></p></li>
</ul>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="#">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Post: post-processing module</a><ul>
<li><a class="reference internal" href="#preamble">Preamble</a></li>
<li><a class="reference internal" href="#list-of-functions">List of functions</a></li>
<li><a class="reference internal" href="#contents">Contents</a></li>
<li><a class="reference internal" href="#index">Index</a></li>
</ul>
</li>
</ul>

  </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script><a  href="Post.pdf" target="_self">Download pdf version</a>
<p></p>
<head>
<style>
#myBtn {
  display: none;
  position: fixed;
  bottom: 20px;
  right: 30px;
  z-index: 99;
  border: none;
  outline: none;
  background-color: #282a35;
  cursor: pointer;
  padding: 15px;
  border-radius: 10px;
}

#myBtn:hover {
  background-color: rgb(26,85,85);
}

#myImg:hover {
  opacity: 50%;
}

</style>
</head>

<button onclick="topFunction()" id="myBtn" title="Go to top"><img src="./_static/icon.png" width="20" height="20"></button>

<script>
const targetDiv = document.getElementsByClassName('sphinxsidebarwrapper')[0];

const link = document.createElement('a');
link.href = "../index.html";

const newImage = document.createElement('img');
newImage.src = '../Images/CassiopeeLogo.png';
newImage.id = 'myImg';
newImage.style.width = '80%';
newImage.style.height = 'auto';
newImage.style.border = 'none';
newImage.style.borderRadius = '0px';
newImage.style.marginLeft = '18px';
newImage.style.marginBottom = '50px';

// Append the image to the div
link.appendChild(newImage);
targetDiv.prepend(link);

// When the user scrolls down 20px from the top of the document, show the button
window.onscroll = scrollFunction;
function scrollFunction() {
    if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
        document.getElementById("myBtn").style.display = "block";
    } else {
        document.getElementById("myBtn").style.display = "none";
    }
}

// When the user clicks on the button, scroll to the top of the document
function topFunction() {
    document.body.scrollTop = 0;
    document.documentElement.scrollTop = 0;
}

// When the window is too small, hide the sidebar
window.onresize = resizeFunction;
window.onload = resizeFunction;
function resizeFunction() {
  var bodyWidth = document.bodyWidth;
  if (window.outerWidth < 1000) {
        document.getElementsByClassName("sphinxsidebar")[0].style.visibility = "hidden";
        document.getElementById("myBtn").style.visibility = "visible";
        document.getElementsByClassName("body")[0].style.marginLeft = "-170px";
        document.getElementsByClassName("body")[0].style.maxWidth = "135%";
        document.getElementsByClassName("body")[0].style.paddingLeft = "30px";
    } else {
        document.getElementsByClassName("sphinxsidebar")[0].style.visibility = "visible";
        document.getElementsByClassName("body")[0].style.marginLeft = "130px";
        document.getElementsByClassName("body")[0].style.maxWidth = "80%";
        document.getElementsByClassName("body")[0].style.paddingLeft = "0px";
    }
}

</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="#">Post 4.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Post: post-processing module</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    </div>
  </body>
</html>